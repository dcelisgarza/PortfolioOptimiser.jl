<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Generalities · PortfolioOptimiser.jl</title><meta name="title" content="Generalities · PortfolioOptimiser.jl"/><meta property="og:title" content="Generalities · PortfolioOptimiser.jl"/><meta property="twitter:title" content="Generalities · PortfolioOptimiser.jl"/><meta name="description" content="Documentation for PortfolioOptimiser.jl."/><meta property="og:description" content="Documentation for PortfolioOptimiser.jl."/><meta property="twitter:description" content="Documentation for PortfolioOptimiser.jl."/><meta property="og:url" content="https://dcelisgarza.github.io/PortfolioOptimiser.jl/RiskMeasures/RiskMeasures1-1/"/><meta property="twitter:url" content="https://dcelisgarza.github.io/PortfolioOptimiser.jl/RiskMeasures/RiskMeasures1-1/"/><link rel="canonical" href="https://dcelisgarza.github.io/PortfolioOptimiser.jl/RiskMeasures/RiskMeasures1-1/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="PortfolioOptimiser.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PortfolioOptimiser.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/1_Mean_Risk_Optimisation/">Example 1: Mean Risk Optimisation</a></li><li><a class="tocitem" href="../../examples/2_Mean_Risk_Optimisation_Linear_Asset_Weight_Constraints/">Example 2: Mean Risk Optimisation with Linear Asset Weight Constraints</a></li><li><a class="tocitem" href="../../examples/3_Mean_Risk_Optimisation_Factor_Models/">Example 3: Mean Risk Optimisation with Factor Models</a></li><li><a class="tocitem" href="../../examples/4_Mean_Risk_Optimisation_Factor_Models_Linear_Factor_Constraints/">Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints</a></li><li><a class="tocitem" href="../../examples/5_Black_Litterman_Mean_Risk_Optimisation/">Example 5: Black Litterman Mean Risk Optimisation</a></li><li><a class="tocitem" href="../../examples/6_Black_Litterman_Factors_Mean_Risk_Optimisation/">Example 6: Black Litterman Factors Mean Risk Optimisation</a></li><li><a class="tocitem" href="../../examples/7_Near_Optimal_Centering_Mean_Risk_Optimisation/">Example 7: Near Optimal Centering (NOC) Mean Risk Optimisation</a></li><li><a class="tocitem" href="../../examples/risk_measure_examples/">Risk Measures</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../Solvers/">Solvers</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Risk</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2-1"><span class="docs-label">Measures</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1-1" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2-1-1"><span class="docs-label">Util</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Generalities</a><ul class="internal"><li><a class="tocitem" href="#Abstract-types"><span>Abstract types</span></a></li><li><a class="tocitem" href="#Constants"><span>Constants</span></a></li><li><a class="tocitem" href="#Settings"><span>Settings</span></a></li></ul></li><li><a class="tocitem" href="../RiskMeasures1-2/">Specifics</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-1-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1-2"><span class="docs-label">RiskMeasure</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../RiskMeasures2-1/">Dispersion</a></li><li><a class="tocitem" href="../RiskMeasures2-2/">Downside dispersion</a></li><li><a class="tocitem" href="../RiskMeasures2-3/">Downside</a></li><li><a class="tocitem" href="../RiskMeasures2-4/">Drawdown</a></li><li><a class="tocitem" href="../RiskMeasures2-5/">Linear moments</a></li><li><a class="tocitem" href="../RiskMeasures2-6/">Tracking and Turnover</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-1-3" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1-3"><span class="docs-label">HCRiskMeasure</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../RiskMeasures3-1/">Dispersion</a></li><li><a class="tocitem" href="../RiskMeasures3-2/">Downside dispersion</a></li><li><a class="tocitem" href="../RiskMeasures3-3/">Downside</a></li><li><a class="tocitem" href="../RiskMeasures3-4/">Drawdown</a></li><li><a class="tocitem" href="../RiskMeasures3-5/">Equal Risk Contribution</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-1-4" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1-4"><span class="docs-label">NoOptRiskMeasure</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../RiskMeasures4-1/">Dispersion</a></li></ul></li></ul></li><li><a class="tocitem" href="../RiskValue/">Risk value</a></li><li><a class="tocitem" href="../RiskStatistics/">Risk statistics</a></li><li><a class="tocitem" href="../MiscRiskMeasureFunctions/">Miscelaneous Functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Parameter Estimation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ParameterEstimation/PosdefFix/">Fixing non-positive definite matrices</a></li><li><a class="tocitem" href="../../ParameterEstimation/MatrixDenoising/">Matrix denoising</a></li><li><a class="tocitem" href="../../ParameterEstimation/DetoneMatrix/">Detone matrix</a></li><li><a class="tocitem" href="../../ParameterEstimation/LoGoMatrix/">Detone matrix</a></li><li><a class="tocitem" href="../../ParameterEstimation/DistanceMatrices/">Distance matrices</a></li><li><a class="tocitem" href="../../ParameterEstimation/Clustering/">Clustering</a></li><li><a class="tocitem" href="../../ParameterEstimation/CovCorKurtSkew/">Covariance, correlation, cokurtosis and coskewness</a></li><li><a class="tocitem" href="../../ParameterEstimation/MeanEstimators/">Expected returns</a></li><li><a class="tocitem" href="../../ParameterEstimation/WorstCase/">Worst case mean variance sets</a></li><li><a class="tocitem" href="../../ParameterEstimation/Regression/">Regression</a></li><li><a class="tocitem" href="../../ParameterEstimation/BlackLitterman/">Black Litterman models</a></li><li><a class="tocitem" href="../../ParameterEstimation/OWA/">Ordered Weight Arrays</a></li><li><a class="tocitem" href="../../ParameterEstimation/ParameterEstimationMisc/">Miscelaneous</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Constraints</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Constraints/WeightConstraints/">Weight constraints</a></li><li><a class="tocitem" href="../../Constraints/ViewsConstraints/">Views constraints</a></li><li><a class="tocitem" href="../../Constraints/NetworkConstraints/">Network constraints</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">(HC)Portfolio</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Portfolio/PortfolioTypes/">Types</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioStatistics/">Statistics</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioRisk/">Risk</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioClustering/">Clustering</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioNetwork/">Network</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">Optimisation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Optimisation/OptimisationKinds/">Optimisation kinds</a></li><li><a class="tocitem" href="../../Optimisation/ObjectiveFunctions/">Objective functions</a></li><li><a class="tocitem" href="../../Optimisation/PortfolioClasses/">Portfolio classes</a></li><li><a class="tocitem" href="../../Optimisation/AssetAllocation/">Asset allocation</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationConstraints/">Constraints</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationSetup/">Setup functions</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationRiskMeasures/">Risk measures</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationGetZ/">Entropic and relativistic moments</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationFinalisation/">Finalisation functions</a></li></ul></li><li><a class="tocitem" href="../../PlotsExtension/">Plots Extension</a></li><li><a class="tocitem" href="../../References/">References</a></li><li><a class="tocitem" href="../../Contents/">Index</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li><a class="is-disabled">Risk</a></li><li><a class="is-disabled">Measures</a></li><li><a class="is-disabled">Util</a></li><li class="is-active"><a href>Generalities</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Generalities</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/main/docs/src/RiskMeasures/RiskMeasures1-1.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Generalities"><a class="docs-heading-anchor" href="#Generalities">Generalities</a><a id="Generalities-1"></a><a class="docs-heading-anchor-permalink" href="#Generalities" title="Permalink"></a></h1><p>This section details general types, structures, and constants that play a supporting role in defining risk measures.</p><h2 id="Abstract-types"><a class="docs-heading-anchor" href="#Abstract-types">Abstract types</a><a id="Abstract-types-1"></a><a class="docs-heading-anchor-permalink" href="#Abstract-types" title="Permalink"></a></h2><p><a href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/"><code>PortfolioOptimiser</code></a>&#39;s risk measures are implemented using <code>Julia</code>&#39;s type hierarchy. This makes it easy to add new ones by implementing the relevant types and methods.</p><p>By properly subtyping and following the implementation instructions of each abstract type, it&#39;s possible to define risk measures that will be entirely compatible with current functionality, without the need for extending method definitions and/or subtyping any of the myriad of abstract types that allow users to define custom behaviour within the library.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.AbstractRiskMeasure" href="#PortfolioOptimiser.AbstractRiskMeasure"><code>PortfolioOptimiser.AbstractRiskMeasure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractRiskMeasure end</code></pre><p>Supertype for all risk measaures.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.NoOptRiskMeasure"><code>NoOptRiskMeasure</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L276-L282">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RiskMeasure" href="#PortfolioOptimiser.RiskMeasure"><code>PortfolioOptimiser.RiskMeasure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type RiskMeasure &lt;: AbstractRiskMeasure end</code></pre><p>Supertype for risk measures compatible with optimisations which accept risk measures.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasureSolvers"><code>RiskMeasureSolvers</code></a>, <a href="#PortfolioOptimiser.RiskMeasureSigma"><code>RiskMeasureSigma</code></a>, <a href="#PortfolioOptimiser.RiskMeasureSkew"><code>RiskMeasureSkew</code></a>, <a href="#PortfolioOptimiser.RiskMeasureOWA"><code>RiskMeasureOWA</code></a>, <a href="#PortfolioOptimiser.RiskMeasureMu"><code>RiskMeasureMu</code></a>, <a href="#PortfolioOptimiser.RiskMeasureTarget"><code>RiskMeasureTarget</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Implementation</strong></p><p>To ensure a risk measure can be used any of the above optimisation types, it must abide by a few rules.</p><ul><li>Implement: <code>Base.iterate</code>, <code>Base.Symbol</code>, <code>Base.length</code>, <code>Base.getindex</code>, and <code>Base.view</code>.</li></ul><pre><code class="language-julia hljs">struct MyRiskMeasure &lt;: RiskMeasure
    # Properties of MyRiskMeasure
end

Base.iterate(S::MyRiskMeasure, state = 1) = state &gt; 1 ? nothing : (S, state + 1)
function Base.String(s::MyRiskMeasure)
    return &quot;MyRiskMeasure&quot;
end
function Base.Symbol(::MyRiskMeasure)
    return Symbol(&quot;MyRiskMeasure&quot;)
end
function Base.length(::MyRiskMeasure)
    return 1
end
function Base.getindex(S::MyRiskMeasure, ::Any)
    return S
end
function Base.view(S::MyRiskMeasure, ::Any)
    return S
end</code></pre><ul><li>Include a <code>settings::RMSettings</code> property, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>.</li></ul><pre><code class="language-julia hljs">struct MyRiskMeasure &lt;: RiskMeasure
    # Properties of MyRiskMeasure
    settings::RMSettings
end</code></pre><ul><li>Implement your measure&#39;s risk calculation method, <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a>. This will let the library use the risk function everywhere it needs to.</li></ul><pre><code class="language-julia hljs">function expected_risk(my_risk::MyRiskMeasure, w::AbstractVector; kwargs...)
    # Risk measure calculation
end</code></pre><ul><li>A scalar <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> model implementation of <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>. If appropriate, a vector equivalent.</li></ul><pre><code class="language-julia hljs"># The scalar function.
function PortfolioOptimiser.set_rm(port, rm::MyRiskMeasure, type::Union{Trad, RB, NOC};
                                   kwargs...)
    # Get optimisation model.
    model = port.model

    ###
    # Variables, constraints, expressions, etc.
    ###

    # Define the risk expression for MyRiskMeasure
    @expression(model, MyRiskMeasure_risk, ...)

    # Define the key name for the upper bound.
    # The upper bound key will be `Symbol(&quot;MyRiskMeasure_risk_ub&quot;)`
    ub_key = &quot;MyRiskMeasure_risk&quot;

    # Set the upper bound on MyRiskMeasure_risk. 
    # If isinf(rm.settings.ub), no upper bound will be set.
    set_rm_risk_upper_bound(type, model, MyRiskMeasure_risk, rm.settings.ub, ub_key)

    # Add the risk to the risk expression.
    # If rm.settings.flag == true, MyRiskMeasure_risk will be added to the vector of risks.
    # This means it will form part of the objective function when the objective function 
    # is MinRisk, Utility or Sharpe.
    # If rm.settings.flag == false, MyRiskMeasure_risk will only be used as a risk 
    # constraint.
    set_risk_expression(model, MyRiskMeasure_risk, rm.settings.scale, rm.settings.flag)

    return nothing
end

# Vector equivalent if it&#39;s possible to provide multiple instances of MyRiskMeasure.
function PortfolioOptimiser.set_rm(port, rms::AbstractVector{&lt;:MyRiskMeasure},
                                   type::Union{Trad, RB, NOC}; kwargs...)

    # Get optimisation model.
    model = port.model
    count = length(rms)

    ###
    # Variables, constraints, expressions, that can be initialised beforehand etc.
    ###

    # Define the risk expression for MyRiskMeasure.
    # It can also be defined in the iteration using the 
    # `model[key] = @expression(model, ..., ...) `
    # construct, then reference the `model[key]` expression.
    # Or use its anonymous version
    # `key = @expression(model, ..., ...)` 
    # and reference the `key` expression.
    @expression(model, MyRiskMeasure_risk[1:count], ...)

    for (i, rm) ∈ pairs(rms)
        ###
        # Variables, constraints, expressions, that must be set during each iteration.
        # If you want to register them in the model use:
        # `model[constraint_key] = @constraint(model, ..., ...)`
        # `model[expression_key] = @expression(model, ..., ...)`
        # `model[variable_key] = @variable(model, ..., ...)`
        # If you want them to be anonymous (i.e. not registered in the model) use:
        # `constraint_key = @constraint(model, ..., ...)`
        # `expression_key = @expression(model, ..., ...)`
        # `variable_key = @variable(model, ..., ...)`
        # If they were defined outside of the loop like MyRiskMeasure_risk 
        # but need to be modified then use:
        # `add_to_expression!(MyRiskMeasure_risk[i], ...).`
        ###

        # Define the key name for the upper bound.
        # The upper bound key will be `Symbol(&quot;MyRiskMeasure_risk_$(i)_ub&quot;)`
        ub_key = &quot;MyRiskMeasure_risk_$(i)&quot;

        # Set the upper bound on MyRiskMeasure_risk[i]. 
        # If isinf(rm.settings.ub), no upper bound will be set.
        set_rm_risk_upper_bound(type, model, MyRiskMeasure_risk[i], rm.settings.ub, ub_key)

        # Add the risk to the risk expression.
        # If rm.settings.flag == true, MyRiskMeasure_risk[i] will be added to the vector of
        # risks. This means it will form part of the objective function when the objective 
        # function is MinRisk, Utility or Sharpe.
        # If rm.settings.flag == false, MyRiskMeasure_risk[i] will only be used as a risk 
        # constraint.
        set_risk_expression(model, MyRiskMeasure_risk[i], rm.settings.scale,
                            rm.settings.flag)
    end

    return nothing
end</code></pre><ul><li>If a risk measure is to be compatible with hierarchical optimisations that take risk measures as parameters, and it contains a properties which can/must be indexed/computed per asset, like a vector or matrix, it must implement <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.set_custom_hc_rm!-Tuple"><code>set_custom_hc_rm!</code></a> and <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.unset_custom_hc_rm!-Tuple"><code>unset_custom_hc_rm!</code></a> which dispatches on the custom risk measure.</li></ul><pre><code class="language-julia hljs">struct MyRiskMeasure{T1, T2, T3} &lt;: RiskMeasure
    # Properties containing asset information (computable or indexable).
    indexable_vector::Vector{T1}
    indexable_matrix::Matrix{T1}
    computable_vector::Vector{T1}
    computable_matrix::Matrix{T1}
    computable_vector_args::T2
    computable_matrix_args::T3
end

# We have some computable properties, so we need to define the function to do so.
function compute_MyRiskMeasure_vec_mtx!(rm::MyRiskMeasure, args...)
    # Compute vector and matrix
    new_computable_vector = ...
    new_computable_matrix = ...

    rm.computable_vector = new_computable_vector
    rm.computable_matrix = new_computable_matrix

    return nothing
end

# port is the portfolio, sigma is the covariance matrix, cluster are the indices defining the cluster.
function set_custom_hc_rm!(rm::MyRiskMeasure, port, sigma, cluster)
    old_i_vector = rm.indexable_vector
    old_i_matrix = rm.indexable_matrix
    old_c_vector = rm.computable_vector
    old_c_matrix = rm.computable_matrix

    ###
    ###
    # These can be placed inside if statements that condition the indexing
    rm.indexable_vector = rm.indexable_vector[cluster]
    rm.indexable_matrix = rm.indexable_matrix[cluster, cluster]
    ###
    ###

    compute_MyRiskMeasure_vec_mtx!(rm, port, sigma, cluster)

    return Tuple(old_i_vector, old_i_matrix, old_c_vector, old_c_matrix)
end
function unset_custom_hc_rm!(rm::MyRiskMeasure, old_custom)
    rm.indexable_vector = old_custom[1]
    rm.indexable_matrix = old_custom[2]
    rm.computable_vector = old_custom[3]
    rm.computable_matrix = old_custom[4]

    return nothing
end</code></pre><ul><li>Similarly, if the risk measure is to be used in <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> optimisations, and it contains a properties which can/must be indexed/computed per asset, like a vector or matrix, it must implement <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.pre_modify_intra_port!-Tuple{PortfolioOptimiser.NoNCOModify, Vararg{Any, 8}}"><code>pre_modify_intra_port!</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.post_modify_intra_port!-Tuple{PortfolioOptimiser.NoNCOModify, Vararg{Any, 8}}"><code>post_modify_intra_port!</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.reset_intra_port!-Tuple{PortfolioOptimiser.NoNCOModify, Nothing, PortfolioOptimiser.NoNCOModify, Nothing, Vararg{Any, 8}}"><code>reset_intra_port!</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.pre_modify_inter_port!-Tuple{PortfolioOptimiser.NoNCOModify, Vararg{Any, 4}}"><code>pre_modify_inter_port!</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.post_modify_inter_port!-Tuple{PortfolioOptimiser.NoNCOModify, Vararg{Any, 4}}"><code>post_modify_inter_port!</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.reset_inter_port!-Tuple{PortfolioOptimiser.NoNCOModify, Nothing, PortfolioOptimiser.NoNCOModify, Nothing, Vararg{Any, 4}}"><code>reset_inter_port!</code></a>, which dispatch on custom structures that. The functions can then check for the custom risk measure and modify it as in the previous bullet point. See the function&#39;s docstrings for explanations on their arguments and use.</li></ul><pre><code class="language-julia hljs"># Structures for dispatching on.
struct MyPreModify &lt;: AbstractNCOModify
    # Custom properties.
end
struct MyPostModify &lt;: AbstractNCOModify
    # Custom properties.
end

# Procedures for computing or modifying risk measures for the internal optimisations.
# Each cluster is treated as a single portfolio.
function pre_modify_intra_port!(pre_modify::MyPreModify, intra_port, internal_args, i,
                                cluster, cidx, idx_sq, Nc, special_rm_idx)
    # Modify intra-cluster portfolio pre computation of statistics.
    return pre_mod_output
end
function post_modify_intra_port!(post_modify::MyPostModify, intra_port, internal_args, i,
                                 cluster, cidx, idx_sq, Nc, special_rm_idx)
    # Modify intra-cluster portfolio post computation of statistics.
    return post_mod_output
end
function reset_intra_port!(pre_modify::MyPreModify, pre_mod_output,
                           post_modify::MyPostModify, post_mod_output, intra_port,
                           internal_args, i, cluster, cidx, idx_sq, Nc, special_rm_idx)
    # Reset any changes done to the optimisation arguments.
    return nothing
end

# Procedures for computing or modifying risk measures for the external optimisation.
# Each cluster is turned into a synthetic asset and a portfolio optimisation is
# performed on them.
function pre_modify_inter_port!(pre_modify::MyPreModify, inter_port, wi, external_args,
                                special_rm_idx)
    # Modify inter-cluster portfolio pre computation of statistics.
    return pre_mod_output
end
function post_modify_inter_port!(post_modify::MyPostModify, inter_port, wi, external_args,
                                 special_rm_idx)
    # Modify inter-cluster portfolio post computation of statistics.
    return post_mod_output
end
function reset_inter_port!(pre_modify::MyPreModify, pre_mod_output,
                           post_modify::MyPostModify, post_mod_output, inter_port, wi,
                           external_args, special_rm_idx)
    # Reset any changes done to the optimisation arguments.
    return nothing
end

# The NCO optimisation type would then be defined like so.
type = NCO(;
           internal = NCOArgs(; type = Trad(; rm = MyRiskMeasure()),
                              pre_modify = MyPreModify(), post_modify = MyPostModify()),
           # In case the external optimisation is to use something different.
           external = ...)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L285-L543">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.HCRiskMeasure" href="#PortfolioOptimiser.HCRiskMeasure"><code>PortfolioOptimiser.HCRiskMeasure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type HCRiskMeasure &lt;: AbstractRiskMeasure end</code></pre><p>Supertype for risk measures compatible with optimisations which accept risk measures and do not use <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models.</p><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasureSolvers"><code>HCRiskMeasureSolvers</code></a>, <a href="#PortfolioOptimiser.HCRiskMeasureMu"><code>HCRiskMeasureMu</code></a>, <a href="#PortfolioOptimiser.HCRiskMeasureTarget"><code>HCRiskMeasureTarget</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a>.</p><p><strong>Implementation</strong></p><p>To ensure a risk measure can be used by the above optimisation types, it must abide by a few rules.</p><ul><li>Implement: <code>Base.iterate</code>, <code>Base.Symbol</code>, <code>Base.length</code>, <code>Base.getindex</code>, and <code>Base.view</code>.</li></ul><pre><code class="language-julia hljs">struct MyHCRiskMeasure &lt;: HCRiskMeasure
    # Properties of MyHCRiskMeasure
end

Base.iterate(S::MyHCRiskMeasure, state = 1) = state &gt; 1 ? nothing : (S, state + 1)
function Base.String(s::MyHCRiskMeasure)
    return &quot;MyHCRiskMeasure&quot;
end
function Base.Symbol(::MyHCRiskMeasure)
    return Symbol(&quot;MyHCRiskMeasure&quot;)
end
function Base.length(::MyHCRiskMeasure)
    return 1
end
function Base.getindex(S::MyHCRiskMeasure, ::Any)
    return S
end
function Base.view(S::MyHCRiskMeasure, ::Any)
    return S
end</code></pre><ul><li>Include a <code>settings::HCRMSettings</code> property, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>.</li></ul><pre><code class="language-julia hljs">struct MyHCRiskMeasure &lt;: HCRiskMeasure
    # Properties of MyHCRiskMeasure
    settings::HCRMSettings
end</code></pre><ul><li>Implement your measure&#39;s risk calculation method, <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a>. This will let the library use the risk function everywhere it needs to.</li></ul><pre><code class="language-julia hljs">function expected_risk(my_risk::MyHCRiskMeasure, w::AbstractVector; kwargs...)
    # Risk measure calculation
end</code></pre><ul><li>If a risk measure is to be compatible with hierarchical optimisations that take risk measures as parameters, and it contains a properties which can/must be indexed/computed per asset, like a vector or matrix, it must implement <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.set_custom_hc_rm!-Tuple"><code>set_custom_hc_rm!</code></a> and <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.unset_custom_hc_rm!-Tuple"><code>unset_custom_hc_rm!</code></a> which dispatches on the custom risk measure.</li></ul><pre><code class="language-julia hljs">struct MyHCRiskMeasure{T1, T2, T3} &lt;: HCRiskMeasure
    # Properties containing asset information (computable or indexable).
    indexable_vector::Vector{T1}
    indexable_matrix::Matrix{T1}
    computable_vector::Vector{T1}
    computable_matrix::Matrix{T1}
    computable_vector_args::T2
    computable_matrix_args::T3
end

# We have some computable properties, so we need to define the function to do so.
function compute_MyRiskMeasure_vec_mtx!(rm::MyHCRiskMeasure, args...)
    # Compute vector and matrix
    new_computable_vector = ...
    new_computable_matrix = ...

    rm.computable_vector = new_computable_vector
    rm.computable_matrix = new_computable_matrix

    return nothing
end

# port is the portfolio, sigma is the covariance matrix, cluster are the indices defining the cluster.
function set_custom_hc_rm!(rm::MyHCRiskMeasure, port, sigma, cluster)
    old_i_vector = rm.indexable_vector
    old_i_matrix = rm.indexable_matrix
    old_c_vector = rm.computable_vector
    old_c_matrix = rm.computable_matrix

    ###
    ###
    # These can be placed inside if statements that condition the indexing
    rm.indexable_vector = rm.indexable_vector[cluster]
    rm.indexable_matrix = rm.indexable_matrix[cluster, cluster]
    ###
    ###

    compute_MyRiskMeasure_vec_mtx!(rm, port, sigma, cluster)

    return Tuple(old_i_vector, old_i_matrix, old_c_vector, old_c_matrix)
end
function unset_custom_hc_rm!(rm::MyHCRiskMeasure, old_custom)
    rm.indexable_vector = old_custom[1]
    rm.indexable_matrix = old_custom[2]
    rm.computable_vector = old_custom[3]
    rm.computable_matrix = old_custom[4]

    return nothing
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L546-L652">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.NoOptRiskMeasure" href="#PortfolioOptimiser.NoOptRiskMeasure"><code>PortfolioOptimiser.NoOptRiskMeasure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type NoOptRiskMeasure &lt;: AbstractRiskMeasure end</code></pre><p>Abstract type for risk measures that cannot be used in optimisations but can be used as performance measurements via <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a>. This can be for two reasons:</p><ol><li>They can be negative, therefore unsuitable for optimisations that accept risk measures and do not use <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models.</li><li>They have no known optimisation formulation, therefore unsuitable for optimisations that accept risk measures and use <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models.</li></ol><p>See also: <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a>.</p><p><strong>Implementation</strong></p><ul><li>Implement: <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a> for the type. This will let the library use the risk function everywhere it needs to.</li></ul><pre><code class="language-julia hljs">struct MyNoOptRiskMeasure &lt;: NoOptRiskMeasure
    # Properties of MyNoOptRiskMeasure
end

function expected_risk(my_risk::MyNoOptRiskMeasure, w::AbstractVector; kwargs...)
    # Risk measure calculation
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L655-L678">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RiskMeasureSigma" href="#PortfolioOptimiser.RiskMeasureSigma"><code>PortfolioOptimiser.RiskMeasureSigma</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type RiskMeasureSigma &lt;: RiskMeasure end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a> which can use an <code>N×N</code> covariance matrix.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="../RiskMeasures2-1/#Variance"><code>Variance</code></a>, <a href="../RiskMeasures2-1/#PortfolioOptimiser.SD"><code>SD</code></a>, <a href="../RiskMeasures2-1/#PortfolioOptimiser.WCVariance"><code>WCVariance</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>sigma::Union{&lt;:AbstractMatrix, Nothing}</code>: property to store an <code>N×N</code> covariance matrix.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L715-L729">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RiskMeasureMu" href="#PortfolioOptimiser.RiskMeasureMu"><code>PortfolioOptimiser.RiskMeasureMu</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type RiskMeasureMu &lt;: RiskMeasure end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a> which can use a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean, and an <code>N×1</code> expected returns vector.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RiskMeasureTarget"><code>RiskMeasureTarget</code></a>, <a href="../RiskMeasures2-1/#PortfolioOptimiser.MAD"><code>MAD</code></a>, <a href="../RiskMeasures2-2/#PortfolioOptimiser.SSD"><code>SSD</code></a>, <a href="../RiskMeasures2-2/#PortfolioOptimiser.SVariance"><code>SVariance</code></a>, <a href="../RiskMeasures2-1/#PortfolioOptimiser.Kurt"><code>Kurt</code></a>, <a href="../RiskMeasures2-2/#PortfolioOptimiser.SKurt"><code>SKurt</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>mu::Union{&lt;:AbstractVector, Nothing}</code>: property to store an <code>N×1</code> expected returns vector.</li><li><code>w::Union{&lt;:AbstractWeights, Nothing}</code>: property to store a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L769-L784">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.HCRiskMeasureMu" href="#PortfolioOptimiser.HCRiskMeasureMu"><code>PortfolioOptimiser.HCRiskMeasureMu</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type HCRiskMeasureMu &lt;: RiskMeasure end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a> which can use a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean, and an <code>N×1</code> expected returns vector.</p><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="../RiskMeasures3-1/#PortfolioOptimiser.FTCM"><code>FTCM</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>mu::Union{&lt;:AbstractVector, Nothing}</code>: property to store an <code>N×1</code> expected returns vector.</li><li><code>w::Union{&lt;:AbstractWeights, Nothing}</code>: property to store a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L787-L802">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.NoOptRiskMeasureMu" href="#PortfolioOptimiser.NoOptRiskMeasureMu"><code>PortfolioOptimiser.NoOptRiskMeasureMu</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type NoOptRiskMeasureMu &lt;: RiskMeasure end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.NoOptRiskMeasure"><code>NoOptRiskMeasure</code></a> which can use a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean, and an <code>N×1</code> expected returns vector.</p><p>See also: <a href="#PortfolioOptimiser.NoOptRiskMeasure"><code>NoOptRiskMeasure</code></a>, <a href="../RiskMeasures4-1/#PortfolioOptimiser.TCM"><code>TCM</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>w::Union{&lt;:AbstractWeights, Nothing}</code>: property to store a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean.</li><li><code>mu::Union{&lt;:AbstractVector, Nothing}</code>: property to store an <code>N×1</code> expected returns vector.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L805-L820">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RiskMeasureTarget" href="#PortfolioOptimiser.RiskMeasureTarget"><code>PortfolioOptimiser.RiskMeasureTarget</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type RiskMeasureTarget &lt;: RiskMeasureMu end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a> which can use a scalar or an <code>N×1</code> vector specifying the minimum return threshold for classifying downside returns, a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean, and an <code>N×1</code> expected returns vector.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="../RiskMeasures2-2/#PortfolioOptimiser.FLPM"><code>FLPM</code></a>, <a href="../RiskMeasures2-2/#PortfolioOptimiser.SSD"><code>SSD</code></a>, <a href="../RiskMeasures2-2/#PortfolioOptimiser.SVariance"><code>SVariance</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>target::Union{&lt;:Real, &lt;:AbstractVector{&lt;:Real}, Nothing}</code>: scalar or <code>N×1</code> minimum return threshold for classifying downside returns. Only returns equal to or below this value are considered in the calculation. Must be in the same frequency as the returns.</li><li><code>w::Union{&lt;:AbstractWeights, Nothing}</code>: property to store a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean.</li><li><code>mu::Union{&lt;:AbstractVector, Nothing}</code>: property to store an <code>N×1</code> expected returns vector.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L823-L839">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.HCRiskMeasureTarget" href="#PortfolioOptimiser.HCRiskMeasureTarget"><code>PortfolioOptimiser.HCRiskMeasureTarget</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type HCRiskMeasureTarget &lt;: RiskMeasureMu end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a> which can use a scalar or <code>N×1</code> vector specifying the minimum return threshold for classifying downside returns, a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean, and an <code>N×1</code> expected returns vector.</p><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="../RiskMeasures3-2/#PortfolioOptimiser.TLPM"><code>TLPM</code></a>, <a href="../RiskMeasures3-2/#PortfolioOptimiser.FTLPM"><code>FTLPM</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>target::Union{&lt;:Real, &lt;:AbstractVector{&lt;:Real}, Nothing}</code>: scalar or <code>N×1</code> minimum return threshold for classifying downside returns. Only returns equal to or below this value are considered in the calculation. Must be in the same frequency as the returns.</li><li><code>w::Union{&lt;:AbstractWeights, Nothing}</code>: property to store a <code>T×1</code> <a href="https://juliastats.org/StatsBase.jl/stable/weights/"><code>AbstractWeights</code></a> vector for computing the weighted mean.</li><li><code>mu::Union{&lt;:AbstractVector, Nothing}</code>: property to store an <code>N×1</code> expected returns vector.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L842-L858">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RiskMeasureSolvers" href="#PortfolioOptimiser.RiskMeasureSolvers"><code>PortfolioOptimiser.RiskMeasureSolvers</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type RiskMeasureSolvers &lt;: RiskMeasure end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a> for which computing the risk requires solving an optimisation model.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="../RiskMeasures2-3/#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="../RiskMeasures2-4/#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="../RiskMeasures2-3/#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a>, <a href="../RiskMeasures2-4/#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>solvers::Union{Nothing, PortOptSolver, &lt;:AbstractVector{PortOptSolver}}</code>: (optional) instance or <code>AbstractVector</code> of <a href="../../Solvers/#PortfolioOptimiser.PortOptSolver"><code>PortOptSolver</code></a>.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L681-L695">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.HCRiskMeasureSolvers" href="#PortfolioOptimiser.HCRiskMeasureSolvers"><code>PortfolioOptimiser.HCRiskMeasureSolvers</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type HCRiskMeasureSolvers &lt;: HCRiskMeasure end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a> for which computing the risk requires solving an optimisation model.</p><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="../RiskMeasures3-4/#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="../RiskMeasures3-4/#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>solvers::Union{Nothing, PortOptSolver, &lt;:AbstractVector{PortOptSolver}}</code>: (optional) instance or <code>AbstractVector</code> of <a href="../../Solvers/#PortfolioOptimiser.PortOptSolver"><code>PortOptSolver</code></a>.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L698-L712">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RiskMeasureOWA" href="#PortfolioOptimiser.RiskMeasureOWA"><code>PortfolioOptimiser.RiskMeasureOWA</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type RiskMeasureOWA &lt;: RiskMeasure end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a> which is implemented via an Ordered Weight Array formulation.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="../RiskMeasures2-1/#PortfolioOptimiser.GMD"><code>GMD</code></a>, <a href="../RiskMeasures2-3/#PortfolioOptimiser.TG"><code>TG</code></a>, <a href="../RiskMeasures2-1/#PortfolioOptimiser.TGRG"><code>TGRG</code></a>, <a href="../RiskMeasures2-5/#PortfolioOptimiser.OWA"><code>OWA</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>formulation::OWAFormulation</code>: property to store the formulation dispatch type.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L752-L766">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RiskMeasureSkew" href="#PortfolioOptimiser.RiskMeasureSkew"><code>PortfolioOptimiser.RiskMeasureSkew</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type RiskMeasureSkew &lt;: RiskMeasure end</code></pre><p>Abstract type for subtyping <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a> which can use an <code>N×N²</code> coskew matrix and <code>N×N</code> matrix that stores the sum of the symmetric negative spectral slices of the coskewness.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="../RiskMeasures2-1/#PortfolioOptimiser.NQSkew"><code>NQSkew</code></a>, <a href="../RiskMeasures2-2/#PortfolioOptimiser.NQSSkew"><code>NQSSkew</code></a>.</p><p><strong>Implementation</strong></p><ul><li><p>Concrete subtypes must contain the following properties:</p><ul><li><code>skew::Union{&lt;:AbstractMatrix, Nothing}</code>: property to store an <code>N×N²</code> coskew matrix.</li><li><code>V::Union{&lt;:AbstractMatrix, Nothing}</code>: property to store an <code>N×N</code> matrix that stores the sum of the symmetric negative spectral slices of the coskewness.</li></ul></li><li><p>Ideally perform any necessary validation checks at instantiation and <code>setproperty!</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L734-L749">source</a></section></article><h2 id="Constants"><a class="docs-heading-anchor" href="#Constants">Constants</a><a id="Constants-1"></a><a class="docs-heading-anchor-permalink" href="#Constants" title="Permalink"></a></h2><p>It is useful to group risk measures by their properties as well as their types. By defining constants which group various risk measure types with certain characteristics, we can facilitate their use in the many different optimisation types offered by <a href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/"><code>PortfolioOptimiser</code></a>. This makes adding new features easier and simplifies the definition of customised behaviour.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RMSolvers" href="#PortfolioOptimiser.RMSolvers"><code>PortfolioOptimiser.RMSolvers</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">const RMSolvers = Union{RiskMeasureSolvers, HCRiskMeasureSolvers}</code></pre><p>Risk measures that use <code>solvers</code>.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasureSolvers"><code>RiskMeasureSolvers</code></a>, <a href="#PortfolioOptimiser.HCRiskMeasureSolvers"><code>HCRiskMeasureSolvers</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L4300-L4306">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RMSigma" href="#PortfolioOptimiser.RMSigma"><code>PortfolioOptimiser.RMSigma</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">const RMSigma = Union{RiskMeasureSigma}</code></pre><p>Risk measures that use <code>sigma</code>.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasureSigma"><code>RiskMeasureSigma</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L4309-L4315">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RMSkew" href="#PortfolioOptimiser.RMSkew"><code>PortfolioOptimiser.RMSkew</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">const RMSkew = Union{RiskMeasureSkew}</code></pre><p>Risk measures that use <code>skew</code> and <code>V</code>.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasureSkew"><code>RiskMeasureSkew</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L4318-L4324">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RMOWA" href="#PortfolioOptimiser.RMOWA"><code>PortfolioOptimiser.RMOWA</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">const RMOWA = Union{RiskMeasureOWA}</code></pre><p>Risk measures that use Ordered Weight Array formulations.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasureOWA"><code>RiskMeasureOWA</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L4327-L4333">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RMMu" href="#PortfolioOptimiser.RMMu"><code>PortfolioOptimiser.RMMu</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">const RMMu = Union{RiskMeasureMu, HCRiskMeasureMu, NoOptRiskMeasureMu}</code></pre><p>Risk measures that use <code>mu</code> and <code>w</code>.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasureMu"><code>RiskMeasureMu</code></a>, <a href="#PortfolioOptimiser.HCRiskMeasureMu"><code>HCRiskMeasureMu</code></a>, <a href="#PortfolioOptimiser.NoOptRiskMeasureMu"><code>NoOptRiskMeasureMu</code></a>, <a href="../RiskMeasures1-2/#PortfolioOptimiser.calc_ret_mu"><code>calc_ret_mu</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L4336-L4342">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RMTarget" href="#PortfolioOptimiser.RMTarget"><code>PortfolioOptimiser.RMTarget</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">const RMTarget = Union{RiskMeasureTarget, HCRiskMeasureTarget}</code></pre><p>Risk measures that use <code>target</code>, <code>mu</code> and <code>w</code>.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasureTarget"><code>RiskMeasureTarget</code></a>, <a href="#PortfolioOptimiser.HCRiskMeasureTarget"><code>HCRiskMeasureTarget</code></a>, <a href="../RiskMeasures1-2/#PortfolioOptimiser.calc_target_ret_mu"><code>calc_target_ret_mu</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L4345-L4351">source</a></section></article><h2 id="Settings"><a class="docs-heading-anchor" href="#Settings">Settings</a><a id="Settings-1"></a><a class="docs-heading-anchor-permalink" href="#Settings" title="Permalink"></a></h2><p>Portfolio Optimisation has typically limited itself to using a single risk measure. However, some risk measures can/must use internal parameters in order to compute the risk. There is nothing preventing us from using multiple measures simultaneously, or even multiple instances of the same risk measure with different hyperparameters. This can be achieved via multiple objective optimisation (not currently supported, but may in the future), or a scalarisation procedure <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>PortfolioOptimiser.AbstractScalarisation</code></a>. Each instance&#39;s contribution to the overall risk expression is tunable via a weight parameter (called <code>scale</code> for disambiguation purposes).</p><p>For risk measures that can be used in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models, we must also provide a way to define their upper bound, and whether or not they should be included in the risk expression or used only for setting a risk upper bound.</p><p>For these purposes, we have two special structures that need to be included in risk measures that are to be used in optimisations. The choice of which one to use depends on what optimisation types the risk measure is meant to be compatible with.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.AbstractRMSettings" href="#PortfolioOptimiser.AbstractRMSettings"><code>PortfolioOptimiser.AbstractRMSettings</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractRMSettings end</code></pre><p>Abstract type for subtyping risk measure settings.</p><p>See also: <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L169-L175">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RMSettings" href="#PortfolioOptimiser.RMSettings"><code>PortfolioOptimiser.RMSettings</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct RMSettings{T1 &lt;: Real, T2 &lt;: Real} &lt;: AbstractRMSettings</code></pre><p>Configuration settings for concrete subtypes of <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>. Having this property makes it possible for a risk measure to be used in any optimisation types that take risk measures as parameters.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a>, <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a>.</p><p><strong>Keyword Arguments</strong></p><p><strong>In optimisations which take risk measures and use <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models</strong></p><ul><li><p><code>flag::Bool = true</code>:</p><ul><li>If <code>true</code>: it is included in the optimisation&#39;s risk vector.</li><li>If <code>false</code>: it is <em>not</em> included in the optimisation&#39;s risk vector, used when you want to constrain the upper bound of a risk measure without having that risk measure appear in the <a href="../../Optimisation/ObjectiveFunctions/#PortfolioOptimiser.MinRisk"><code>MinRisk</code></a>, <a href="../../Optimisation/ObjectiveFunctions/#PortfolioOptimiser.Utility"><code>Utility</code></a>, or <a href="../../Optimisation/ObjectiveFunctions/#PortfolioOptimiser.Sharpe"><code>Sharpe</code></a> objective measures.</li></ul></li><li><p><code>scale::T1 = 1.0</code>: weight parameter of the risk measure in the <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a> method being used.</p></li><li><p><code>ub::T2 = Inf</code>: upper bound risk constraint.</p></li></ul><p><strong>In optimisations which take risk measures and do not use <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models</strong></p><ul><li><code>flag::Bool = true</code>: no effect, the risk cannot be bounded in these optimisations.</li><li><code>scale::T1 = 1.0</code>: weight parameter of the risk measure in the <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a> method being used.</li><li><code>ub::T2 = Inf</code>: no effect, the risk cannot be bounded in these optimisations.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L178-L204">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.HCRMSettings" href="#PortfolioOptimiser.HCRMSettings"><code>PortfolioOptimiser.HCRMSettings</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct HCRMSettings{T1 &lt;: Real} &lt;: AbstractRMSettings</code></pre><p>Configuration settings for concrete subtypes of <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>.</p><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a>, <a href="../RiskValue/#PortfolioOptimiser.expected_risk"><code>expected_risk</code></a>.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>scale::T1 = 1.0</code>: weight parameter of the risk measure in the <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a> method being used.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/78246d0682a50017b54a68cad9e3458f2bde77a1/src/RiskMeasures/Types/RiskMeasureTypes.jl#L214-L226">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../Solvers/">« Solvers</a><a class="docs-footer-nextpage" href="../RiskMeasures1-2/">Specifics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.2 on <span class="colophon-date" title="Monday 28 April 2025 14:32">Monday 28 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
