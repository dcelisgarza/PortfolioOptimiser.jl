<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints · PortfolioOptimiser.jl</title><meta name="title" content="Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints · PortfolioOptimiser.jl"/><meta property="og:title" content="Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints · PortfolioOptimiser.jl"/><meta property="twitter:title" content="Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints · PortfolioOptimiser.jl"/><meta name="description" content="Documentation for PortfolioOptimiser.jl."/><meta property="og:description" content="Documentation for PortfolioOptimiser.jl."/><meta property="twitter:description" content="Documentation for PortfolioOptimiser.jl."/><meta property="og:url" content="https://dcelisgarza.github.io/PortfolioOptimiser.jl/examples/4_Mean_Risk_Optimisation_Factor_Models_Linear_Factor_Constraints/"/><meta property="twitter:url" content="https://dcelisgarza.github.io/PortfolioOptimiser.jl/examples/4_Mean_Risk_Optimisation_Factor_Models_Linear_Factor_Constraints/"/><link rel="canonical" href="https://dcelisgarza.github.io/PortfolioOptimiser.jl/examples/4_Mean_Risk_Optimisation_Factor_Models_Linear_Factor_Constraints/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="PortfolioOptimiser.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PortfolioOptimiser.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../1_Mean_Risk_Optimisation/">Example 1: Mean Risk Optimisation</a></li><li><a class="tocitem" href="../2_Mean_Risk_Optimisation_Linear_Asset_Weight_Constraints/">Example 2: Mean Risk Optimisation with Linear Asset Weight Constraints</a></li><li><a class="tocitem" href="../3_Mean_Risk_Optimisation_Factor_Models/">Example 3: Mean Risk Optimisation with Factor Models</a></li><li class="is-active"><a class="tocitem" href>Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints</a><ul class="internal"><li><a class="tocitem" href="#1.-Download-data."><span>1. Download data.</span></a></li><li><a class="tocitem" href="#2.-Estimating-Mean-Risk-Portfolios"><span>2. Estimating Mean Risk Portfolios</span></a></li><li><a class="tocitem" href="#3.-Factor-constraints"><span>3. Factor constraints</span></a></li></ul></li><li><a class="tocitem" href="../5_Black_Litterman_Mean_Risk_Optimisation/">Example 5: Black Litterman Mean Risk Optimisation</a></li><li><a class="tocitem" href="../6_Black_Litterman_Factors_Mean_Risk_Optimisation/">Example 6: Black Litterman Factors Mean Risk Optimisation</a></li><li><a class="tocitem" href="../7_Near_Optimal_Centering_Mean_Risk_Optimisation/">Example 7: Near Optimal Centering (NOC) Mean Risk Optimisation</a></li><li><a class="tocitem" href="../risk_measure_examples/">Risk Measures</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../Solvers/">Solvers</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Risk</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1"><span class="docs-label">Measures</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1-1" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1-1"><span class="docs-label">Util</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures1-1/">Generalities</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures1-2/">Specifics</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-1-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1-2"><span class="docs-label">RiskMeasure</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures2-1/">Dispersion</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures2-2/">Downside dispersion</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures2-3/">Downside</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures2-4/">Drawdown</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures2-5/">Linear moments</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures2-6/">Tracking and Turnover</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-1-3" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1-3"><span class="docs-label">HCRiskMeasure</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures3-1/">Dispersion</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures3-2/">Downside dispersion</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures3-3/">Downside</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures3-4/">Drawdown</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures3-5/">Equal Risk Contribution</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-1-4" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1-4"><span class="docs-label">NoOptRiskMeasure</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../RiskMeasures/RiskMeasures4-1/">Dispersion</a></li></ul></li></ul></li><li><a class="tocitem" href="../../RiskMeasures/RiskValue/">Risk value</a></li><li><a class="tocitem" href="../../RiskMeasures/RiskStatistics/">Risk statistics</a></li><li><a class="tocitem" href="../../RiskMeasures/MiscRiskMeasureFunctions/">Miscelaneous Functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Parameter Estimation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ParameterEstimation/PosdefFix/">Fixing non-positive definite matrices</a></li><li><a class="tocitem" href="../../ParameterEstimation/MatrixDenoising/">Matrix denoising</a></li><li><a class="tocitem" href="../../ParameterEstimation/DetoneMatrix/">Detone matrix</a></li><li><a class="tocitem" href="../../ParameterEstimation/LoGoMatrix/">Detone matrix</a></li><li><a class="tocitem" href="../../ParameterEstimation/DistanceMatrices/">Distance matrices</a></li><li><a class="tocitem" href="../../ParameterEstimation/Clustering/">Clustering</a></li><li><a class="tocitem" href="../../ParameterEstimation/CovCorKurtSkew/">Covariance, correlation, cokurtosis and coskewness</a></li><li><a class="tocitem" href="../../ParameterEstimation/MeanEstimators/">Expected returns</a></li><li><a class="tocitem" href="../../ParameterEstimation/WorstCase/">Worst case mean variance sets</a></li><li><a class="tocitem" href="../../ParameterEstimation/Regression/">Regression</a></li><li><a class="tocitem" href="../../ParameterEstimation/BlackLitterman/">Black Litterman models</a></li><li><a class="tocitem" href="../../ParameterEstimation/OWA/">Ordered Weight Arrays</a></li><li><a class="tocitem" href="../../ParameterEstimation/ParameterEstimationMisc/">Miscelaneous</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Constraints</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Constraints/WeightConstraints/">Weight constraints</a></li><li><a class="tocitem" href="../../Constraints/ViewsConstraints/">Views constraints</a></li><li><a class="tocitem" href="../../Constraints/NetworkConstraints/">Network constraints</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">(HC)Portfolio</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Portfolio/PortfolioTypes/">Types</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioStatistics/">Statistics</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioRisk/">Risk</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioClustering/">Clustering</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioNetwork/">Network</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">Optimisation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Optimisation/OptimisationKinds/">Optimisation kinds</a></li><li><a class="tocitem" href="../../Optimisation/ObjectiveFunctions/">Objective functions</a></li><li><a class="tocitem" href="../../Optimisation/PortfolioClasses/">Portfolio classes</a></li><li><a class="tocitem" href="../../Optimisation/AssetAllocation/">Asset allocation</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationConstraints/">Constraints</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationSetup/">Setup functions</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationRiskMeasures/">Risk measures</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationGetZ/">Entropic and relativistic moments</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationFinalisation/">Finalisation functions</a></li></ul></li><li><a class="tocitem" href="../../PlotsExtension/">Plots Extension</a></li><li><a class="tocitem" href="../../References/">References</a></li><li><a class="tocitem" href="../../Contents/">Index</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/main/examples/4_Mean_Risk_Optimisation_Factor_Models_Linear_Factor_Constraints.jl#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>The source files for all examples can be found in <a href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/tree/main/examples/">/examples</a>.</p><h1 id="Example-4:-Mean-Risk-Optimisation-with-Factor-Models-with-Linear-Factor-Constraints"><a class="docs-heading-anchor" href="#Example-4:-Mean-Risk-Optimisation-with-Factor-Models-with-Linear-Factor-Constraints">Example 4: Mean Risk Optimisation with Factor Models with Linear Factor Constraints</a><a id="Example-4:-Mean-Risk-Optimisation-with-Factor-Models-with-Linear-Factor-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Example-4:-Mean-Risk-Optimisation-with-Factor-Models-with-Linear-Factor-Constraints" title="Permalink"></a></h1><h2 id="1.-Download-data."><a class="docs-heading-anchor" href="#1.-Download-data.">1. Download data.</a><a id="1.-Download-data.-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Download-data." title="Permalink"></a></h2><pre><code class="language-julia hljs">using PortfolioOptimiser, TimeSeries, DataFrames, PrettyTables, Clarabel, HiGHS, YFinance,
      GraphRecipes, StatsPlots, JuMP, GLM

# Format for pretty tables.
fmt1 = (v, i, j) -&gt; begin
    if j == 1
        return Date(v)
    else
        return v
    end
end;
fmt2 = (v, i, j) -&gt; begin
    if j == 1
        return v
    else
        return isa(v, Number) ? &quot;$(round(v, digits=5))&quot; : v
    end
end;
fmt3 = (v, i, j) -&gt; begin
    if j == 1
        return v
    else
        return isa(v, Number) ? &quot;$(round(v*100, digits=4)) %&quot; : v
    end
end;

# Convert prices to time array.
function stock_price_to_time_array(x)
    # Only get the keys that are not ticker or datetime.
    coln = collect(keys(x))[3:end]
    # Convert the dictionary into a matrix.
    m = hcat([x[k] for k ∈ coln]...)
    return TimeArray(x[&quot;timestamp&quot;], m, Symbol.(coln), x[&quot;ticker&quot;])
end

# Asset tickers.
assets = sort!([&quot;AAPL&quot;, &quot;ADI&quot;, &quot;ADP&quot;, &quot;AMGN&quot;, &quot;AMZN&quot;, &quot;BKNG&quot;, &quot;CMCSA&quot;, &quot;COST&quot;, &quot;CSCO&quot;,
                &quot;GILD&quot;, &quot;GOOG&quot;, &quot;GOOGL&quot;, &quot;HON&quot;, &quot;ISRG&quot;, &quot;LIN&quot;, &quot;MAR&quot;, &quot;META&quot;, &quot;MRK&quot;, &quot;MSFT&quot;,
                &quot;NFLX&quot;, &quot;NVDA&quot;, &quot;ORLY&quot;, &quot;PANW&quot;, &quot;QCOM&quot;, &quot;SBUX&quot;, &quot;T&quot;, &quot;TMUS&quot;, &quot;TSLA&quot;, &quot;TXN&quot;,
                &quot;VRTX&quot;])
# Factor tickers.
factors = sort!([&quot;MTUM&quot;, &quot;QUAL&quot;, &quot;SIZE&quot;, &quot;USMV&quot;, &quot;VLUE&quot;, &quot;LRGF&quot;, &quot;INTF&quot;, &quot;GLOF&quot;, &quot;EFAV&quot;,
                 &quot;EEMV&quot;])

tickers = [assets; factors]

# Prices date range.
Date_0 = &quot;2019-01-01&quot;
Date_1 = &quot;2025-01-31&quot;

# Download the price data using YFinance.
prices = get_prices.(tickers; startdt = Date_0, enddt = Date_1)
prices = stock_price_to_time_array.(prices)
prices = hcat(prices...)
cidx = colnames(prices)[occursin.(r&quot;adj&quot;, string.(colnames(prices)))]
prices = prices[cidx]
TimeSeries.rename!(prices, Symbol.(tickers))
pretty_table(prices[1:5]; formatters = fmt1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌────────────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
│<span class="sgr1">      timestamp </span>│<span class="sgr1">    AAPL </span>│<span class="sgr1">     ADI </span>│<span class="sgr1">     ADP </span>│<span class="sgr1">    AMGN </span>│<span class="sgr1">    AMZN </span>│<span class="sgr1">    BKNG </span>│<span class="sgr1">   CMCSA </span>│<span class="sgr1">    COST </span>│<span class="sgr1">    CSCO </span>│<span class="sgr1">    GILD </span>│<span class="sgr1">    GOOG </span>│<span class="sgr1">   GOOGL </span>│<span class="sgr1">     HON </span>│<span class="sgr1">    ISRG </span>│<span class="sgr1">     LIN </span>│<span class="sgr1">     MAR </span>│<span class="sgr1">    META </span>│<span class="sgr1">     MRK </span>│<span class="sgr1">    MSFT </span>│<span class="sgr1">    NFLX </span>│<span class="sgr1">    NVDA </span>│<span class="sgr1">    ORLY </span>│<span class="sgr1">    PANW </span>│<span class="sgr1">    QCOM </span>│<span class="sgr1">    SBUX </span>│<span class="sgr1">       T </span>│<span class="sgr1">    TMUS </span>│<span class="sgr1">    TSLA </span>│<span class="sgr1">     TXN </span>│<span class="sgr1">    VRTX </span>│<span class="sgr1">    EEMV </span>│<span class="sgr1">    EFAV </span>│<span class="sgr1">    GLOF </span>│<span class="sgr1">    INTF </span>│<span class="sgr1">    LRGF </span>│<span class="sgr1">    MTUM </span>│<span class="sgr1">    QUAL </span>│<span class="sgr1">    SIZE </span>│<span class="sgr1">    USMV </span>│<span class="sgr1">    VLUE </span>│
│<span class="sgr90"> Dates.DateTime </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90"> Float64 </span>│
├────────────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│     2019-01-02 │ 37.6672 │  76.502 │ 114.096 │ 158.586 │ 76.9565 │ 1703.08 │ 29.3779 │ 186.145 │ 35.2656 │ 49.4591 │  52.046 │ 52.4831 │ 115.883 │ 155.343 │ 142.983 │ 102.526 │ 135.044 │  59.732 │ 95.1198 │  267.66 │ 3.37778 │  341.15 │  30.535 │ 49.2806 │ 56.4324 │ 13.7452 │ 63.8184 │ 20.6747 │ 79.3542 │  164.08 │ 47.7295 │ 56.0996 │ 22.5756 │ 19.1238 │ 25.2604 │ 92.5543 │ 70.1644 │ 69.4985 │ 46.5205 │ 61.6125 │
│     2019-01-03 │ 33.9153 │ 71.8809 │ 110.651 │ 156.173 │  75.014 │ 1645.13 │ 29.6086 │ 182.199 │ 33.9831 │ 50.8702 │ 50.5635 │ 51.0295 │ 114.336 │  150.08 │ 138.518 │ 97.0689 │ 131.122 │ 58.5072 │ 91.6205 │   271.2 │  3.1737 │  346.13 │   29.95 │ 47.8211 │ 53.9846 │ 13.7638 │ 63.5837 │  20.024 │ 74.6745 │  163.73 │ 47.1816 │ 55.9899 │ 22.1652 │ 18.9294 │ 24.6248 │ 89.9978 │ 68.3993 │ 68.2081 │ 45.8398 │ 60.4445 │
│     2019-01-04 │ 35.3631 │  73.626 │ 115.061 │ 161.512 │ 78.7695 │ 1698.97 │ 30.6087 │  187.49 │ 35.5139 │ 53.2091 │ 53.2831 │  53.647 │ 118.336 │ 157.227 │ 142.465 │  102.86 │ 137.303 │ 60.2694 │ 95.8818 │  297.57 │ 3.37704 │  341.82 │ 30.7317 │ 48.5938 │ 55.7744 │ 14.1174 │ 65.9992 │ 21.1793 │  78.052 │   172.7 │ 48.2774 │ 57.2133 │  22.853 │ 19.6017 │ 25.4148 │ 93.0098 │ 70.8137 │ 70.5435 │ 46.8429 │ 62.5621 │
│     2019-01-07 │ 35.2844 │ 74.0891 │ 114.438 │ 163.685 │ 81.4755 │ 1693.31 │ 30.2839 │ 188.181 │ 35.7538 │ 53.4507 │ 53.1677 │   53.54 │ 118.995 │  159.48 │ 142.338 │ 103.051 │ 137.402 │ 59.6056 │  96.004 │  315.34 │ 3.55582 │  339.69 │  31.225 │ 48.4564 │ 55.7744 │ 14.3734 │ 66.9282 │ 22.3307 │ 79.3962 │  175.85 │ 48.3631 │ 57.2808 │ 23.0365 │ 19.7394 │ 25.6146 │ 93.9023 │ 71.2435 │ 71.3886 │ 46.9952 │ 63.2847 │
│     2019-01-08 │  35.957 │ 75.8965 │ 115.113 │ 165.784 │  82.829 │ 1668.68 │ 30.5318 │  189.59 │ 36.0434 │ 53.0843 │ 53.5603 │ 54.0103 │ 118.749 │ 160.997 │ 143.847 │ 104.721 │ 141.861 │ 60.0481 │ 96.7001 │  320.27 │ 3.46729 │  336.07 │ 31.7383 │ 48.0357 │ 55.8182 │ 14.5548 │  66.273 │ 22.3567 │ 79.2954 │  178.19 │ 48.4401 │ 57.3989 │ 23.2192 │ 19.9338 │  25.896 │ 95.0643 │ 72.0117 │ 72.1155 │ 47.3983 │ 63.7133 │
└────────────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘</code></pre><h2 id="2.-Estimating-Mean-Risk-Portfolios"><a class="docs-heading-anchor" href="#2.-Estimating-Mean-Risk-Portfolios">2. Estimating Mean Risk Portfolios</a><a id="2.-Estimating-Mean-Risk-Portfolios-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Estimating-Mean-Risk-Portfolios" title="Permalink"></a></h2><h3 id="2.1.-Factor-and-asset-statistics"><a class="docs-heading-anchor" href="#2.1.-Factor-and-asset-statistics">2.1. Factor and asset statistics</a><a id="2.1.-Factor-and-asset-statistics-1"></a><a class="docs-heading-anchor-permalink" href="#2.1.-Factor-and-asset-statistics" title="Permalink"></a></h3><p>In order to use factor models, we need to estimate how the factors and assets are related. The relationships are summarised by the loadings matrix, which is obtained via regression. For this basic tutorial we will use the defaults.</p><p>This is a simple example so we will only use default parameters for computing the statistics.</p><p><a href="../../ParameterEstimation/MeanEstimators/#PortfolioOptimiser.MeanEstimator"><code>PortfolioOptimiser.MeanEstimator</code></a>, <a href="../../ParameterEstimation/CovCorKurtSkew/#PortfolioOptimiser.PortfolioOptimiserCovCor"><code>PortfolioOptimiser.PortfolioOptimiserCovCor</code></a>, <a href="../../ParameterEstimation/Regression/#PortfolioOptimiser.FactorType"><code>FactorType</code></a>, <a href="../../Portfolio/PortfolioStatistics/#PortfolioOptimiser.asset_statistics!-Tuple{PortfolioOptimiser.AbstractPortfolio}"><code>asset_statistics!</code></a>, <a href="../../Portfolio/PortfolioStatistics/#PortfolioOptimiser.factor_statistics!-Tuple{PortfolioOptimiser.AbstractPortfolio}"><code>factor_statistics!</code></a>.</p><pre><code class="language-julia hljs"># Creating the portfolio object. Internally computes the returns if you give a prices TimeArray.
port = Portfolio(; prices = prices[Symbol.(assets)], f_prices = prices[Symbol.(factors)],
                 # Continuous solvers.
                 solvers = PortOptSolver(; name = :Clarabel, solver = Clarabel.Optimizer,
                                         params = Dict(&quot;verbose&quot; =&gt; false)),
                 # Discrete solvers (for discrete allocation).
                 alloc_solvers = PortOptSolver(; name = :HiGHS,
                                               solver = optimizer_with_attributes(HiGHS.Optimizer,
                                                                                  MOI.Silent() =&gt; true)))
# Compute relevant statistics.
# Expected returns, covariance estimation and factor estimation methods.
mu_type = MuSimple()
cov_type = PortCovCor()
factor_type = FactorType()

asset_statistics!(port; mu_type = mu_type, cov_type = cov_type, set_kurt = false,
                  set_skurt = false, set_skew = false, set_sskew = false)
factor_statistics!(port; factor_type = factor_type, cov_type = cov_type, mu_type = mu_type)

# Show the loadings matrix.
pretty_table(port.loadings; formatters = fmt2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌─────────┬──────────┬──────────┬──────────┬──────────┬──────────┬──────────┬──────────┬──────────┬──────────┬──────────┬──────────┐
│<span class="sgr1"> tickers </span>│<span class="sgr1">    const </span>│<span class="sgr1">     EEMV </span>│<span class="sgr1">     EFAV </span>│<span class="sgr1">     GLOF </span>│<span class="sgr1">     INTF </span>│<span class="sgr1">     LRGF </span>│<span class="sgr1">     MTUM </span>│<span class="sgr1">     QUAL </span>│<span class="sgr1">     SIZE </span>│<span class="sgr1">     USMV </span>│<span class="sgr1">     VLUE </span>│
│<span class="sgr90">  String </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│<span class="sgr90">  Float64 </span>│
├─────────┼──────────┼──────────┼──────────┼──────────┼──────────┼──────────┼──────────┼──────────┼──────────┼──────────┼──────────┤
│    AAPL │  0.00047 │   0.3745 │      0.0 │ -0.51585 │      0.0 │  1.70423 │      0.0 │  1.08208 │ -0.78701 │ -0.21275 │  -0.4267 │
│     ADI │   8.0e-5 │      0.0 │ -0.20649 │  0.87699 │      0.0 │      0.0 │  0.13771 │  0.56253 │  0.56364 │ -0.85734 │      0.0 │
│     ADP │  0.00012 │      0.0 │      0.0 │      0.0 │ -0.15139 │ -0.27028 │ -0.10547 │  0.29239 │  0.39497 │  1.02401 │      0.0 │
│    AMGN │  0.00016 │      0.0 │  0.41865 │      0.0 │ -0.31137 │      0.0 │  0.14153 │      0.0 │ -0.70072 │  0.92843 │  0.50029 │
│    AMZN │   1.0e-5 │      0.0 │      0.0 │      0.0 │      0.0 │  1.23751 │  0.14982 │  1.39469 │      0.0 │ -1.03425 │ -0.97176 │
│    BKNG │   0.0003 │  0.35027 │ -0.34513 │ -0.52803 │   0.5604 │ -0.81985 │      0.0 │  1.15924 │  1.08752 │  -0.7327 │  0.27436 │
│   CMCSA │ -0.00023 │      0.0 │      0.0 │      0.0 │      0.0 │  -0.3187 │ -0.14363 │  0.34665 │      0.0 │  0.52973 │  0.53298 │
│    COST │  0.00055 │ -0.16283 │      0.0 │      0.0 │      0.0 │  0.72656 │      0.0 │  0.61306 │ -0.59651 │   0.5314 │ -0.33806 │
│    CSCO │  -7.0e-5 │      0.0 │      0.0 │      0.0 │ -0.12129 │      0.0 │      0.0 │  0.72579 │ -0.87887 │  0.44767 │  0.84452 │
│    GILD │  0.00034 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │ -0.19176 │ -0.91992 │  1.20247 │  0.68384 │
│    GOOG │  0.00016 │      0.0 │      0.0 │      0.0 │      0.0 │  0.34228 │      0.0 │  1.97533 │ -0.29553 │ -0.67524 │ -0.41857 │
│   GOOGL │  0.00016 │  0.11801 │      0.0 │      0.0 │      0.0 │  0.41001 │      0.0 │  1.90942 │ -0.34519 │ -0.65492 │ -0.44345 │
│     HON │   3.0e-5 │      0.0 │      0.0 │      0.0 │      0.0 │ -0.57956 │ -0.18571 │  0.55376 │  0.26645 │  0.39678 │  0.59488 │
│    ISRG │  0.00015 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │  0.18751 │  0.93352 │  0.82654 │      0.0 │ -0.74007 │
│     LIN │  0.00034 │      0.0 │      0.0 │  0.15006 │  0.40231 │      0.0 │      0.0 │      0.0 │      0.0 │  0.58576 │      0.0 │
│     MAR │  0.00032 │      0.0 │ -1.06865 │      0.0 │  0.81762 │ -0.66941 │ -0.27059 │  0.60893 │   1.4435 │ -0.67076 │  0.45067 │
│    META │  0.00026 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │  3.15101 │      0.0 │ -1.38173 │ -0.83495 │
│     MRK │  0.00014 │      0.0 │  0.15782 │      0.0 │      0.0 │      0.0 │      0.0 │ -0.17905 │ -0.59899 │  1.33196 │   0.1662 │
│    MSFT │  0.00016 │  0.11456 │      0.0 │      0.0 │      0.0 │  1.23499 │  0.09233 │  1.10146 │ -0.63702 │      0.0 │ -0.71447 │
│    NFLX │  0.00037 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │  0.48081 │  1.52841 │  0.61576 │ -0.98472 │ -0.89268 │
│    NVDA │  0.00138 │      0.0 │      0.0 │  0.52346 │      0.0 │  1.55107 │  0.62854 │  2.58893 │  -0.5397 │ -2.52624 │ -0.99301 │
│    ORLY │  0.00053 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │  0.98705 │      0.0 │
│    PANW │  0.00064 │      0.0 │      0.0 │      0.0 │  -0.2376 │  0.63361 │  0.44361 │  0.51908 │  1.27522 │ -0.82429 │ -1.06368 │
│    QCOM │  0.00028 │      0.0 │      0.0 │  0.76649 │      0.0 │      0.0 │  0.34013 │  1.42907 │ -0.39407 │  -1.4297 │  0.36363 │
│    SBUX │     -0.0 │  0.17677 │      0.0 │      0.0 │      0.0 │ -0.97236 │      0.0 │  0.80465 │  0.81625 │  0.35872 │      0.0 │
│       T │  0.00032 │      0.0 │  0.21049 │ -0.44626 │      0.0 │      0.0 │ -0.10559 │ -0.45951 │ -0.61825 │  1.02494 │  1.29565 │
│    TMUS │  0.00053 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │  0.21026 │  -0.2098 │      0.0 │  0.93129 │      0.0 │
│    TSLA │  0.00163 │      0.0 │      0.0 │      0.0 │      0.0 │  1.30212 │  1.12132 │      0.0 │  1.91689 │ -2.28276 │ -1.12527 │
│     TXN │  -5.0e-5 │      0.0 │      0.0 │  1.07291 │ -0.39368 │  0.29476 │      0.0 │  0.54266 │      0.0 │ -0.43006 │      0.0 │
│    VRTX │  0.00034 │      0.0 │      0.0 │      0.0 │      0.0 │      0.0 │  0.33336 │      0.0 │ -0.38375 │  1.02281 │      0.0 │
└─────────┴──────────┴──────────┴──────────┴──────────┴──────────┴──────────┴──────────┴──────────┴──────────┴──────────┴──────────┘</code></pre><h3 id="2.2.-Optimise-Portfolios"><a class="docs-heading-anchor" href="#2.2.-Optimise-Portfolios">2.2. Optimise Portfolios</a><a id="2.2.-Optimise-Portfolios-1"></a><a class="docs-heading-anchor-permalink" href="#2.2.-Optimise-Portfolios" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Creating the optimisation object.
rm = SD() # Risk measure.
obj = Sharpe() # Objective function. Can be `MinRisk()`, `Utility()`, `Sharpe()`, `MaxRet()`.
class = FM()
# `Trad` optimisation corresponds to the classic mean risk optimisation.
type = Trad(; rm = rm, obj = obj, class = class)
# Classic portfolio.
w1 = optimise!(port, type)
# Factor model portfolio.
pretty_table(w1; formatters = fmt3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌─────────┬───────────┐
│<span class="sgr1"> tickers </span>│<span class="sgr1">   weights </span>│
│<span class="sgr90">  String </span>│<span class="sgr90">   Float64 </span>│
├─────────┼───────────┤
│    AAPL │     0.0 % │
│     ADI │     0.0 % │
│     ADP │     0.0 % │
│    AMGN │     0.0 % │
│    AMZN │     0.0 % │
│    BKNG │     0.0 % │
│   CMCSA │     0.0 % │
│    COST │ 34.8734 % │
│    CSCO │     0.0 % │
│    GILD │  6.1334 % │
│    GOOG │     0.0 % │
│   GOOGL │     0.0 % │
│     HON │     0.0 % │
│    ISRG │     0.0 % │
│     LIN │     0.0 % │
│     MAR │     0.0 % │
│    META │     0.0 % │
│     MRK │     0.0 % │
│    MSFT │     0.0 % │
│    NFLX │     0.0 % │
│    NVDA │ 17.6818 % │
│    ORLY │ 13.8435 % │
│    PANW │  5.5076 % │
│    QCOM │     0.0 % │
│    SBUX │     0.0 % │
│       T │     0.0 % │
│    TMUS │ 12.7358 % │
│    TSLA │  9.2243 % │
│     TXN │     0.0 % │
│    VRTX │     0.0 % │
└─────────┴───────────┘</code></pre><h2 id="3.-Factor-constraints"><a class="docs-heading-anchor" href="#3.-Factor-constraints">3. Factor constraints</a><a id="3.-Factor-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Factor-constraints" title="Permalink"></a></h2><h3 id="3.1.-Creating-the-constraints"><a class="docs-heading-anchor" href="#3.1.-Creating-the-constraints">3.1. Creating the constraints</a><a id="3.1.-Creating-the-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#3.1.-Creating-the-constraints" title="Permalink"></a></h3><p>The function <a href="../../Constraints/WeightConstraints/#PortfolioOptimiser.factor_constraints-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}"><code>factor_constraints</code></a> takes in two dataframes, one defining the constraints, and the loadings matrix and turns them into a matrix and vector which sets the constraints as <span>$\\mathbf{A} \\bm{x} &gt;= \\bm{b}$</span>.</p><p>First lets check out the loadings matrix in order to create feasable constraints.</p><pre><code class="language-julia hljs">pretty_table(describe(port.loadings); formatters = fmt3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌──────────┬─────────────────────┬─────────────┬─────────────────────┬────────────┬──────────┬──────────┐
│<span class="sgr1"> variable </span>│<span class="sgr1">                mean </span>│<span class="sgr1">         min </span>│<span class="sgr1">              median </span>│<span class="sgr1">        max </span>│<span class="sgr1"> nmissing </span>│<span class="sgr1">   eltype </span>│
│<span class="sgr90">   Symbol </span>│<span class="sgr90"> U{Nothing, Float64} </span>│<span class="sgr90">         Any </span>│<span class="sgr90"> U{Nothing, Float64} </span>│<span class="sgr90">        Any </span>│<span class="sgr90">    Int64 </span>│<span class="sgr90"> DataType </span>│
├──────────┼─────────────────────┼─────────────┼─────────────────────┼────────────┼──────────┼──────────┤
│  tickers │             nothing │        AAPL │             nothing │       VRTX │    0.0 % │   String │
│    const │            0.0313 % │    -0.023 % │            0.0272 % │   0.1632 % │    0.0 % │  Float64 │
│     EEMV │            3.2376 % │  -16.2831 % │               0.0 % │  37.4504 % │    0.0 % │  Float64 │
│     EFAV │           -2.7777 % │ -106.8649 % │               0.0 % │  41.8645 % │    0.0 % │  Float64 │
│     GLOF │            6.3326 % │  -52.8028 % │               0.0 % │  107.291 % │    0.0 % │  Float64 │
│     INTF │            1.8834 % │  -39.3675 % │               0.0 % │  81.7623 % │    0.0 % │  Float64 │
│     LRGF │           19.3566 % │  -97.2358 % │               0.0 % │ 170.4226 % │    0.0 % │  Float64 │
│     MTUM │           11.5198 % │  -27.0594 % │               0.0 % │ 112.1322 % │    0.0 % │  Float64 │
│     QUAL │           75.9418 % │  -45.9505 % │           58.5733 % │ 315.1013 % │    0.0 % │  Float64 │
│     SIZE │            5.0374 % │   -91.992 % │               0.0 % │ 191.6895 % │    0.0 % │  Float64 │
│     USMV │          -11.3148 % │ -252.6242 % │               0.0 % │ 133.1962 % │    0.0 % │  Float64 │
│     VLUE │          -10.8522 % │ -112.5268 % │               0.0 % │ 129.5649 % │    0.0 % │  Float64 │
└──────────┴─────────────────────┴─────────────┴─────────────────────┴────────────┴──────────┴──────────┘</code></pre><p>Constrain factors.</p><pre><code class="language-julia hljs">constraints = DataFrame(; Enabled = [true, true, true, true],
                        Factor = [&quot;SIZE&quot;, &quot;QUAL&quot;, &quot;USMV&quot;, &quot;MTUM&quot;],
                        Sign = [&quot;&gt;=&quot;, &quot;&gt;=&quot;, &quot;&lt;=&quot;, &quot;&gt;=&quot;], Value = [0.2, 0.6, -0.7, 0.45],
                        Relative_Factor = [&quot;&quot;, &quot;LRGF&quot;, &quot;&quot;, &quot;&quot;])
pretty_table(constraints)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌─────────┬────────┬────────┬─────────┬─────────────────┐
│<span class="sgr1"> Enabled </span>│<span class="sgr1"> Factor </span>│<span class="sgr1">   Sign </span>│<span class="sgr1">   Value </span>│<span class="sgr1"> Relative_Factor </span>│
│<span class="sgr90">    Bool </span>│<span class="sgr90"> String </span>│<span class="sgr90"> String </span>│<span class="sgr90"> Float64 </span>│<span class="sgr90">          String </span>│
├─────────┼────────┼────────┼─────────┼─────────────────┤
│    true │   SIZE │     &gt;= │     0.2 │                 │
│    true │   QUAL │     &gt;= │     0.6 │            LRGF │
│    true │   USMV │     &lt;= │    -0.7 │                 │
│    true │   MTUM │     &gt;= │    0.45 │                 │
└─────────┴────────┴────────┴─────────┴─────────────────┘</code></pre><p>Create linear constraint matrix and vector and optimise with these constraints.</p><pre><code class="language-julia hljs">A1, B1 = factor_constraints(constraints, port.loadings)

# Clear the arrays because the code asserts the dimensions.
port.a_ineq = Matrix(undef, 0, 0)
port.b_ineq = Vector(undef, 0)
port.a_ineq = A1
port.b_ineq = B1

w2 = optimise!(port, type)
pretty_table(w2; formatters = fmt3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌─────────┬───────────┐
│<span class="sgr1"> tickers </span>│<span class="sgr1">   weights </span>│
│<span class="sgr90">  String </span>│<span class="sgr90">   Float64 </span>│
├─────────┼───────────┤
│    AAPL │  24.956 % │
│     ADI │     0.0 % │
│     ADP │     0.0 % │
│    AMGN │     0.0 % │
│    AMZN │     0.0 % │
│    BKNG │     0.0 % │
│   CMCSA │     0.0 % │
│    COST │ 19.9769 % │
│    CSCO │     0.0 % │
│    GILD │     0.0 % │
│    GOOG │     0.0 % │
│   GOOGL │     0.0 % │
│     HON │     0.0 % │
│    ISRG │     0.0 % │
│     LIN │     0.0 % │
│     MAR │     0.0 % │
│    META │     0.0 % │
│     MRK │     0.0 % │
│    MSFT │     0.0 % │
│    NFLX │     0.0 % │
│    NVDA │  3.7279 % │
│    ORLY │     0.0 % │
│    PANW │  7.7242 % │
│    QCOM │     0.0 % │
│    SBUX │     0.0 % │
│       T │     0.0 % │
│    TMUS │ 10.6207 % │
│    TSLA │ 32.9943 % │
│     TXN │     0.0 % │
│    VRTX │     0.0 % │
└─────────┴───────────┘</code></pre><p>In order to verify that the constraints have been held, we can perform a regression.</p><pre><code class="language-julia hljs"># Add constant term.
X = [ones(size(port.fm_returns, 1)) port.f_returns]
# Portfolio returns according to the factor model.
y = port.fm_returns * w2.weights
# Generalised linear model linking the portfolio returns to the factors in X.
res = GLM.lm(X, y)
# Generate dataframe with the factors and their regression coefficients.
df = DataFrame(; :factors =&gt; [&quot;const&quot;; factors], :coefs =&gt; coef(res))
pretty_table(df; formatters = fmt3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌─────────┬────────────┐
│<span class="sgr1"> factors </span>│<span class="sgr1">      coefs </span>│
│<span class="sgr90">  String </span>│<span class="sgr90">    Float64 </span>│
├─────────┼────────────┤
│   const │   0.0922 % │
│    EEMV │   6.0932 % │
│    EFAV │      0.0 % │
│    GLOF │ -10.9221 % │
│    INTF │  -1.8353 % │
│    LRGF │  110.684 % │
│    MTUM │     45.0 % │
│    QUAL │   50.684 % │
│    SIZE │  39.5277 % │
│    USMV │ -75.9053 % │
│    VLUE │ -66.4477 % │
└─────────┴────────────┘</code></pre><p>We can see that the constraints hold.</p><table><tr><th style="text-align: right">Factor</th><th style="text-align: center">Constraint</th><th style="text-align: left">Value</th></tr><tr><td style="text-align: right">SIZE</td><td style="text-align: center">SIZE &gt;= 0.2</td><td style="text-align: left">0.395261 &gt;= 0.2</td></tr><tr><td style="text-align: right">QUAL</td><td style="text-align: center">LRGF - QUAL &gt;= 0.6</td><td style="text-align: left">1.106847 - 0.506847 = 0.6 &gt;= 0.6</td></tr><tr><td style="text-align: right">USMV</td><td style="text-align: center">USMV &lt;= -0.7</td><td style="text-align: left">-0.75905 &lt;= -0.7</td></tr><tr><td style="text-align: right">MTUM</td><td style="text-align: center">MTUM &gt;= 0.45</td><td style="text-align: left">0.45 &gt;= 0.45</td></tr></table><h3 id="3.2.-Efficient-Frontier"><a class="docs-heading-anchor" href="#3.2.-Efficient-Frontier">3.2. Efficient Frontier</a><a id="3.2.-Efficient-Frontier-1"></a><a class="docs-heading-anchor-permalink" href="#3.2.-Efficient-Frontier" title="Permalink"></a></h3><p>We can plot the efficient frontier for the factor model. Which will look different factor model one because the constraints will have to be satisfied at every point.</p><pre><code class="language-julia hljs">points = 50
frontier = efficient_frontier!(port, type; points = points)
pretty_table(frontier[:weights]; formatters = fmt3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌─────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┬───────────┐
│<span class="sgr1"> tickers </span>│<span class="sgr1">         1 </span>│<span class="sgr1">         2 </span>│<span class="sgr1">         3 </span>│<span class="sgr1">         4 </span>│<span class="sgr1">         5 </span>│<span class="sgr1">         6 </span>│<span class="sgr1">         7 </span>│<span class="sgr1">         8 </span>│<span class="sgr1">         9 </span>│<span class="sgr1">        10 </span>│<span class="sgr1">        11 </span>│<span class="sgr1">        12 </span>│<span class="sgr1">        13 </span>│<span class="sgr1">        14 </span>│<span class="sgr1">        15 </span>│<span class="sgr1">        16 </span>│<span class="sgr1">        17 </span>│<span class="sgr1">        18 </span>│<span class="sgr1">        19 </span>│<span class="sgr1">        20 </span>│<span class="sgr1">        21 </span>│<span class="sgr1">        22 </span>│<span class="sgr1">        23 </span>│<span class="sgr1">        24 </span>│<span class="sgr1">        25 </span>│<span class="sgr1">        26 </span>│<span class="sgr1">        27 </span>│<span class="sgr1">        28 </span>│<span class="sgr1">        29 </span>│<span class="sgr1">        30 </span>│<span class="sgr1">        31 </span>│<span class="sgr1">        32 </span>│<span class="sgr1">        33 </span>│<span class="sgr1">        34 </span>│<span class="sgr1">        35 </span>│<span class="sgr1">        36 </span>│<span class="sgr1">        37 </span>│<span class="sgr1">        38 </span>│<span class="sgr1">        39 </span>│<span class="sgr1">        40 </span>│<span class="sgr1">        41 </span>│<span class="sgr1">        42 </span>│<span class="sgr1">        43 </span>│<span class="sgr1">        44 </span>│<span class="sgr1">        45 </span>│<span class="sgr1">        46 </span>│<span class="sgr1">        47 </span>│<span class="sgr1">        48 </span>│<span class="sgr1">        49 </span>│<span class="sgr1">        50 </span>│<span class="sgr1">        51 </span>│
│<span class="sgr90">  String </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│<span class="sgr90">   Float64 </span>│
├─────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤
│    AAPL │ 13.7863 % │ 21.5767 % │ 22.9553 % │ 24.1933 % │ 26.2126 % │ 28.1315 % │ 29.9625 % │ 31.7354 % │ 32.8949 % │ 32.8352 % │ 32.7782 % │ 32.7222 % │ 32.6668 % │ 32.5958 % │ 32.5566 % │  32.503 % │ 32.4496 % │ 32.3969 % │ 32.3458 % │ 32.2915 % │ 32.2385 % │ 32.1853 % │ 32.1335 % │ 32.0821 % │ 32.0304 % │ 31.9388 % │ 31.6736 % │ 30.1605 % │ 28.6616 % │ 27.1815 % │ 25.7169 % │ 24.2678 % │ 22.8328 % │ 21.4112 % │ 20.0021 % │ 18.6048 % │ 17.2189 % │ 15.8436 % │ 14.4781 % │ 13.1223 % │ 11.7758 % │ 10.4378 % │   9.108 % │  7.7861 % │  6.4716 % │  5.1642 % │  3.8636 % │  2.5696 % │  1.2818 % │     0.0 % │  24.956 % │
│     ADI │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│     ADP │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    AMGN │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    AMZN │  7.0634 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    BKNG │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│   CMCSA │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    COST │     0.0 % │ 11.1274 % │ 18.2481 % │ 19.8472 % │ 20.1915 % │ 20.5206 % │ 20.8448 % │ 21.1377 % │ 20.9677 % │ 19.7268 % │ 18.4989 % │  17.283 % │ 16.0784 % │  14.911 % │ 13.7002 % │  12.525 % │ 11.3589 % │ 10.2018 % │  9.0495 % │  7.9068 % │  6.7702 % │  5.6425 % │   4.517 % │  3.3981 % │  2.2806 % │  1.0883 % │  0.0025 % │  0.0001 % │  0.0003 % │  0.0001 % │  0.0001 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │  0.0001 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │ 19.9769 % │
│    CSCO │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    GILD │  4.2831 % │  0.5266 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    GOOG │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│   GOOGL │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│     HON │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    ISRG │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│     LIN │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│     MAR │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    META │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│     MRK │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    MSFT │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    NFLX │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    NVDA │     0.0 % │  1.7229 % │  2.1157 % │  3.3426 % │  4.3633 % │  5.3335 % │  6.2615 % │  7.1557 % │  7.9901 % │  8.7546 % │  9.5116 % │ 10.2613 % │ 11.0041 % │ 11.7396 % │ 12.4704 % │  13.195 % │ 13.9144 % │ 14.6289 % │ 15.3387 % │ 16.0434 % │ 16.7441 % │  17.441 % │  18.134 % │ 18.8235 % │ 19.5091 % │ 20.1715 % │ 20.7996 % │  21.241 % │ 21.6761 % │ 22.1066 % │ 22.5321 % │ 22.9533 % │ 23.3704 % │ 23.7835 % │  24.193 % │  24.599 % │ 25.0018 % │ 25.4014 % │ 25.7981 % │  26.192 % │ 26.5834 % │ 26.9722 % │ 27.3587 % │ 27.7429 % │ 28.1249 % │ 28.5048 % │ 28.8827 % │ 29.2587 % │  29.633 % │ 30.0055 % │  3.7279 % │
│    ORLY │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │  0.0001 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │  0.0001 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    PANW │ 20.4909 % │ 17.0052 % │ 10.9807 % │  8.1159 % │  7.0765 % │  6.0877 % │  5.1384 % │  4.2306 % │  3.5571 % │  3.3275 % │  3.0973 % │  2.8691 % │   2.643 % │  2.4029 % │  2.1972 % │   1.976 % │  1.7568 % │  1.5372 % │  1.3212 % │  1.1075 % │  0.8946 % │  0.6806 % │  0.4714 % │  0.2619 % │  0.0594 % │  0.0001 % │  0.0007 % │  0.0001 % │  0.0003 % │  0.0001 % │  0.0001 % │  0.0001 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │  0.0001 % │  0.0001 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │  7.7242 % │
│    QCOM │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    SBUX │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│       T │ 15.7214 % │  5.5292 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    TMUS │  7.4996 % │ 11.7582 % │ 13.6603 % │  11.636 % │  8.9478 % │  6.3918 % │  3.9437 % │   1.592 % │  0.0005 % │     0.0 % │  0.0001 % │  0.0001 % │  0.0001 % │     0.0 % │     0.0 % │  0.0001 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │  0.0001 % │     0.0 % │     0.0 % │  0.0001 % │     0.0 % │  0.0001 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │ 10.6207 % │
│    TSLA │ 31.1551 % │ 30.7539 % │ 32.0397 % │  32.865 % │ 33.2081 % │ 33.5347 % │ 33.8492 % │ 34.1481 % │ 34.5896 % │ 35.3559 % │ 36.1138 % │ 36.8641 % │ 37.6075 % │ 38.3506 % │ 39.0754 % │ 39.8005 % │ 40.5203 % │ 41.2351 % │ 41.9447 % │ 42.6508 % │ 43.3524 % │ 44.0504 % │  44.744 % │ 45.4341 % │ 46.1204 % │ 46.8013 % │ 47.5233 % │ 48.5983 % │ 49.6613 % │ 50.7116 % │ 51.7505 % │ 52.7787 % │ 53.7967 % │ 54.8052 % │ 55.8048 % │ 56.7961 % │ 57.7793 % │ 58.7549 % │ 59.7235 % │ 60.6853 % │ 61.6406 % │ 62.5898 % │ 63.5332 % │  64.471 % │ 65.4035 % │  66.331 % │ 67.2537 % │ 68.1717 % │ 69.0852 % │ 69.9945 % │ 32.9943 % │
│     TXN │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
│    VRTX │  0.0002 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │     0.0 % │
└─────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┴───────────┘</code></pre><p>Plot frontier.</p><pre><code class="language-julia hljs">plot_frontier(port; rm = rm)</code></pre><img src="174fac20.svg" alt="Example block output"/><p>Plot frontier area.</p><pre><code class="language-julia hljs">plot_frontier_area(port; rm = rm, kwargs_a = (; legendfontsize = 7))</code></pre><img src="532c6179.svg" alt="Example block output"/><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../3_Mean_Risk_Optimisation_Factor_Models/">« Example 3: Mean Risk Optimisation with Factor Models</a><a class="docs-footer-nextpage" href="../5_Black_Litterman_Mean_Risk_Optimisation/">Example 5: Black Litterman Mean Risk Optimisation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.2 on <span class="colophon-date" title="Monday 28 April 2025 14:32">Monday 28 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
