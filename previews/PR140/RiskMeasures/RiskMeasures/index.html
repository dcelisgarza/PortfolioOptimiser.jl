<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Risk Measures · PortfolioOptimiser.jl</title><meta name="title" content="Risk Measures · PortfolioOptimiser.jl"/><meta property="og:title" content="Risk Measures · PortfolioOptimiser.jl"/><meta property="twitter:title" content="Risk Measures · PortfolioOptimiser.jl"/><meta name="description" content="Documentation for PortfolioOptimiser.jl."/><meta property="og:description" content="Documentation for PortfolioOptimiser.jl."/><meta property="twitter:description" content="Documentation for PortfolioOptimiser.jl."/><meta property="og:url" content="https://dcelisgarza.github.io/PortfolioOptimiser.jl/RiskMeasures/RiskMeasures/"/><meta property="twitter:url" content="https://dcelisgarza.github.io/PortfolioOptimiser.jl/RiskMeasures/RiskMeasures/"/><link rel="canonical" href="https://dcelisgarza.github.io/PortfolioOptimiser.jl/RiskMeasures/RiskMeasures/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="PortfolioOptimiser.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PortfolioOptimiser.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span></li><li><span class="tocitem">API</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox" checked/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Risk Measures</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Risk Measures</a><ul class="internal"><li><a class="tocitem" href="#Specifying-solvers"><span>Specifying solvers</span></a></li><li><a class="tocitem" href="#Abstract-types"><span>Abstract types</span></a></li><li><a class="tocitem" href="#Settings"><span>Settings</span></a></li><li><a class="tocitem" href="#Risk-measures"><span>Risk measures</span></a></li><li><a class="tocitem" href="#Hierarchical-risk-measures"><span>Hierarchical risk measures</span></a></li></ul></li><li><a class="tocitem" href="../RiskValue/">Risk value</a></li><li><a class="tocitem" href="../RiskStatistics/">Risk statistics</a></li><li><a class="tocitem" href="../MiscRiskMeasureFunctions/">Miscelaneous Functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Parameter Estimation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ParameterEstimation/PosdefFix/">Fixing non-positive definite matrices</a></li><li><a class="tocitem" href="../../ParameterEstimation/MatrixDenoising/">Matrix denoising</a></li><li><a class="tocitem" href="../../ParameterEstimation/DetoneMatrix/">Detone matrix</a></li><li><a class="tocitem" href="../../ParameterEstimation/LoGoMatrix/">Detone matrix</a></li><li><a class="tocitem" href="../../ParameterEstimation/DistanceMatrices/">Distance matrices</a></li><li><a class="tocitem" href="../../ParameterEstimation/Clustering/">Clustering</a></li><li><a class="tocitem" href="../../ParameterEstimation/CovCorKurtSkew/">Covariance, correlation, cokurtosis and coskewness</a></li><li><a class="tocitem" href="../../ParameterEstimation/MeanEstimators/">Expected returns</a></li><li><a class="tocitem" href="../../ParameterEstimation/WorstCase/">Worst case mean variance sets</a></li><li><a class="tocitem" href="../../ParameterEstimation/Regression/">Regression</a></li><li><a class="tocitem" href="../../ParameterEstimation/BlackLitterman/">Black Litterman models</a></li><li><a class="tocitem" href="../../ParameterEstimation/OWA/">Ordered Weight Arrays</a></li><li><a class="tocitem" href="../../ParameterEstimation/ParameterEstimationMisc/">Miscelaneous</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Constraints</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Constraints/WeightConstraints/">Weight constraints</a></li><li><a class="tocitem" href="../../Constraints/ViewsConstraints/">Views constraints</a></li><li><a class="tocitem" href="../../Constraints/NetworkConstraints/">Network constraints</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">(HC)Portfolio</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Portfolio/PortfolioTypes/">Types</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioStatistics/">Statistics</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioRisk/">Risk</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioClustering/">Clustering</a></li><li><a class="tocitem" href="../../Portfolio/PortfolioNetwork/">Network</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Optimisation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Optimisation/OptimisationKinds/">Optimisation kinds</a></li><li><a class="tocitem" href="../../Optimisation/ObjectiveFunctions/">Objective functions</a></li><li><a class="tocitem" href="../../Optimisation/PortfolioClasses/">Portfolio classes</a></li><li><a class="tocitem" href="../../Optimisation/AssetAllocation/">Asset allocation</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationConstraints/">Constraints</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationSetup/">Setup functions</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationRiskMeasures/">Risk measures</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationGetZ/">Entropic and relativistic moments</a></li><li><a class="tocitem" href="../../Optimisation/OptimisationFinalisation/">Finalisation functions</a></li></ul></li><li><a class="tocitem" href="../../PlotsExtension/">Plots Extension</a></li><li><a class="tocitem" href="../../References/">References</a></li><li><a class="tocitem" href="../../Contents/">Index</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li><a class="is-disabled">Risk Measures</a></li><li class="is-active"><a href>Risk Measures</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Risk Measures</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/main/docs/src/RiskMeasures/RiskMeasures.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Risk-Measures"><a class="docs-heading-anchor" href="#Risk-Measures">Risk Measures</a><a id="Risk-Measures-1"></a><a class="docs-heading-anchor-permalink" href="#Risk-Measures" title="Permalink"></a></h1><p>Risk measures are the backbone of portfolio optimisation. They allow for the quantification of risk in different ways. This section describes the various risk measures included in <a href="https://github.com/dcelisgarza/PortfolioOptimiser.jl"><code>PortfolioOptimiser</code></a>, explains their properties, formulations and compatibility with the various optimisation types in the library.</p><h2 id="Specifying-solvers"><a class="docs-heading-anchor" href="#Specifying-solvers">Specifying solvers</a><a id="Specifying-solvers-1"></a><a class="docs-heading-anchor-permalink" href="#Specifying-solvers" title="Permalink"></a></h2><p>Some risk measures require solvers to compute the risk measure via <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>. When using high level functions that take in an instance of <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a> as an argument, the solvers will be taken from it. However, it is possible to override them by directly providing the solvers to the risk measure instance.</p><p>The solvers can be specified by any container which implements the <a href="https://docs.julialang.org/en/v1/base/collections/#Base.AbstractDict"><code>AbstractDict</code></a> interfaces. This dictionary must contain key-value pairs for all solvers one wants to use. The key can be of any type, but the value must be a dictionary with the following key-value pairs.</p><ul><li><code>:solver</code>: defines the solver to be used. One can also use <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#optimizer_with_attributes"><code>JuMP.optimizer_with_attributes</code></a> to direcly provide a solver with attributes already attached.</li><li><code>:check_sol</code>: (optional) defines the keyword arguments passed on to <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#is_solved_and_feasible"><code>JuMP.is_solved_and_feasible</code></a> for accepting/rejecting solutions.</li><li><code>:params</code>: (optional) defines solver-specific parameters/attributes.</li><li><code>:add_bridges</code>: (optional) value of the <code>add_bridges</code> kwarg of <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#JuMP.set_optimizer"><code>JuMP.set_optimizer</code></a>, if not provided defaults to <code>true</code>.</li></ul><pre><code class="language-julia hljs">using JuMP, Clarabel
solvers = Dict(
               # Key-value pair for the solver, solution acceptance
               # criteria, model bridge argument, and solver attributes.
               :Clarabel =&gt; Dict(
                                 # Solver we wish to use.
                                 :solver =&gt; Clarabel.Optimizer,
                                 # (Optional) Solution acceptance criteria.
                                 :check_sol =&gt; (allow_local = true, allow_almost = true),
                                 # (Optional) Solver-specific attributes.
                                 :params =&gt; Dict(&quot;verbose&quot; =&gt; false),
                                 # (Optional) Flag for adding JuMP bridges to JuMP.Model()
                                 # defaults to true (https://jump.dev/JuMP.jl/stable/api/JuMP/#Model).
                                 :add_bridges =&gt; false))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{Symbol, Dict{Symbol, Any}} with 1 entry:
  :Clarabel =&gt; Dict(:solver=&gt;Optimizer, :params=&gt;Dict{String, Bool}(&quot;verbose&quot;=&gt;…</code></pre><p>Users are able to provide multiple solvers by adding additional key-value pairs to the top-level dictionary as in the following snippet.</p><pre><code class="language-julia hljs">solvers = Dict(:Clarabel_1 =&gt; Dict(:solver =&gt; Clarabel.Optimizer,
                                   :check_sol =&gt; (allow_local = true, allow_almost = true),
                                   :params =&gt; Dict(&quot;verbose&quot; =&gt; false)),
               # Provide solver with pre-attached attributes and no arguments
               # for the `JuMP.is_solved_and_feasible` function.
               :Clarabel_2 =&gt; Dict(:solver =&gt; JuMP.optimizer_with_attributes(Clarabel.Optimizer,
                                                                             &quot;max_step_fraction&quot; =&gt; 0.75),
                                   # Do not add JuMP bridges to JuMP.Model()
                                   :add_bridges =&gt; false))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{Symbol, Dict{Symbol, Any}} with 2 entries:
  :Clarabel_1 =&gt; Dict(:solver=&gt;Optimizer, :params=&gt;Dict{String, Bool}(&quot;verbose&quot;…
  :Clarabel_2 =&gt; Dict(:solver=&gt;OptimizerWithAttributes(Optimizer, Pair{Abstract…</code></pre><p><a href="https://github.com/dcelisgarza/PortfolioOptimiser.jl"><code>PortfolioOptimiser</code></a> will iterate over the solvers until it finds the first one to successfully solve the problem. If a deterministic ordering is desired (for example when going from relaxed to strict tolerances), use an <a href="https://juliacollections.github.io/OrderedCollections.jl/dev/ordered_containers/#OrderedDicts"><code>OrderedDict</code></a>.</p><h2 id="Abstract-types"><a class="docs-heading-anchor" href="#Abstract-types">Abstract types</a><a id="Abstract-types-1"></a><a class="docs-heading-anchor-permalink" href="#Abstract-types" title="Permalink"></a></h2><p><a href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/"><code>PortfolioOptimiser</code></a>&#39;s risk measures are implemented using Julia&#39;s type hierarchy. This makes it easy to add new ones by implementing the relevant types and methods.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.AbstractRiskMeasure" href="#PortfolioOptimiser.AbstractRiskMeasure"><code>PortfolioOptimiser.AbstractRiskMeasure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractRiskMeasure end</code></pre><p>Supertype for all risk measaures.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.NoOptRiskMeasure"><code>NoOptRiskMeasure</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L5-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RiskMeasure" href="#PortfolioOptimiser.RiskMeasure"><code>PortfolioOptimiser.RiskMeasure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type RiskMeasure &lt;: AbstractRiskMeasure end</code></pre><p>Supertype for risk measures compatible with <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, and <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> optimisation types.</p><p>See also: <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../MiscRiskMeasureFunctions/#PortfolioOptimiser.set_rm_solvers!-Tuple{Union{EDaR, EDaR_r, EVaR, RLDaR, RLDaR_r, RLVaR}, Any}"><code>set_rm_solvers!</code></a>, <a href="../MiscRiskMeasureFunctions/#PortfolioOptimiser.unset_rm_solvers!-Tuple{Union{EDaR, EDaR_r, EVaR, RLDaR, RLDaR_r, RLVaR}, Any}"><code>unset_rm_solvers!</code></a>.</p><p><strong>Implementation requirements</strong></p><p>To ensure a risk measure can be used any of the above optimisation types, it must abide by a few rules.</p><ul><li>Include a <code>settings::RMSettings</code> field, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>.</li></ul><pre><code class="language-julia hljs">struct MyRiskMeasure &lt;: RiskMeasure
    # Fields of MyRiskMeasure
    settings::RMSettings
end</code></pre><ul><li>Implement your measure&#39;s risk calculation method, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>. This will let the library use the risk function everywhere it needs to.</li></ul><pre><code class="language-julia hljs">function calc_risk(my_risk::MyRiskMeasure, w::AbstractVector; kwargs...)
    # Risk measure calculation
end</code></pre><ul><li>A scalar <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> model implementation of <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>. If appropriate, a vector equivalent.</li></ul><pre><code class="language-julia hljs"># The scalar function.
function PortfolioOptimiser.set_rm(port, rm::MyRiskMeasure, type::Union{Trad, RB, NOC};
                                   kwargs...)
    # Get optimisation model.
    model = port.model

    ###
    # Variables, constraints, expressions, etc.
    ###

    # Define the risk expression for MyRiskMeasure
    @expression(model, MyRiskMeasure_risk, ...)

    # Define the key name for the upper bound.
    ub_key = &quot;MyRiskMeasure_risk&quot;

    # Set the upper bound on MyRiskMeasure_risk. 
    # If isinf(rm.settings.ub), no upper bound will be set.
    set_rm_risk_upper_bound(type, model, MyRiskMeasure_risk, rm.settings.ub, ub_key)

    # Add the risk to the risk expression.
    # If rm.settings.flag == true, MyRiskMeasure_risk will be added to the vector of risks.
    # This means it will form part of the objective function when the objective function 
    # is MinRisk, Utility or Sharpe.
    # If rm.settings.flag == false, MyRiskMeasure_risk will only be used as a risk 
    # constraint.
    set_risk_expression(model, MyRiskMeasure_risk, rm.settings.scale, rm.settings.flag)

    return nothing
end

# Vector equivalent if it&#39;s possible to provide multiple instances of MyRiskMeasure.
function PortfolioOptimiser.set_rm(port, rms::AbstractVector{&lt;:MyRiskMeasure},
                                   type::Union{Trad, RB, NOC}; kwargs...)

    # Get optimisation model.
    model = port.model
    count = length(rms)

    ###
    # Variables, constraints, expressions, that can be initialised beforehand etc.
    ###

    # Define the risk expression for MyRiskMeasure.
    # It can also be defined in the iteration using the 
    # `model[key] = @expression(model, ..., ...) `
    # construct, then reference the `model[key]` expression.
    # Or use its anonymous version
    # `key = @expression(model, ..., ...)` 
    # and reference the `key` expression.
    @expression(model, MyRiskMeasure_risk[1:count], ...)

    for (i, rm) ∈ pairs(rms)
        ###
        # Variables, constraints, expressions, that must be set during each iteration.
        # If you want to register them in the model use:
        # `model[constraint_key] = @constraint(model, ..., ...)`
        # `model[expression_key] = @expression(model, ..., ...)`
        # `model[variable_key] = @variable(model, ..., ...)`
        # If you want them to be anonymous (i.e. not registered in the model) use:
        # `constraint_key = @constraint(model, ..., ...)`
        # `expression_key = @expression(model, ..., ...)`
        # `variable_key = @variable(model, ..., ...)`
        # If they were defined outside of the loop like MyRiskMeasure_risk 
        # but need to be modified then use:
        # `add_to_expression!(MyRiskMeasure_risk[i], ...).`
        ###

        # Define the key name for the upper bound.
        ub_key = &quot;MyRiskMeasure_risk_$(i)&quot;

        # Set the upper bound on MyRiskMeasure_risk[i]. 
        # If isinf(rm.settings.ub), no upper bound will be set.
        set_rm_risk_upper_bound(type, model, MyRiskMeasure_risk[i], rm.settings.ub, ub_key)

        # Add the risk to the risk expression.
        # If rm.settings.flag == true, MyRiskMeasure_risk[i] will be added to the vector of
        # risks. This means it will form part of the objective function when the objective 
        # function is MinRisk, Utility or Sharpe.
        # If rm.settings.flag == false, MyRiskMeasure_risk[i] will only be used as a risk 
        # constraint.
        set_risk_expression(model, MyRiskMeasure_risk[i], rm.settings.scale,
                            rm.settings.flag)
    end

    return nothing
end</code></pre><ul><li>If calculating the risk requires solving an optimisation model it must have a <code>solvers::Union{&lt;:AbstractDict, Nothing}</code> field to store <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a>-compatible solvers, and implement <a href="../MiscRiskMeasureFunctions/#PortfolioOptimiser.set_rm_solvers!-Tuple{Union{EDaR, EDaR_r, EVaR, RLDaR, RLDaR_r, RLVaR}, Any}"><code>set_rm_solvers!</code></a> and <a href="../MiscRiskMeasureFunctions/#PortfolioOptimiser.unset_rm_solvers!-Tuple{Union{EDaR, EDaR_r, EVaR, RLDaR, RLDaR_r, RLVaR}, Any}"><code>unset_rm_solvers!</code></a>.</li></ul><pre><code class="language-julia hljs">struct MyRiskMeasure &lt;: RiskMeasure
    # Fields of MyRiskMeasure
    solvers::Union{&lt;:AbstractDict, Nothing}
end

function PortfolioOptimiser.set_rm_solvers!(rm::MyRiskMeasure, solvers)
    flag = false
    if isnothing(rm.solvers) || isempty(rm.solvers)
        rm.solvers = solvers
        flag = true
    end
    return flag
end

function PortfolioOptimiser.unset_rm_solvers!(rm::MyRiskMeasure, flag)
    if flag
        rm.solvers = nothing
    end
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L14-L157">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.HCRiskMeasure" href="#PortfolioOptimiser.HCRiskMeasure"><code>PortfolioOptimiser.HCRiskMeasure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type HCRiskMeasure &lt;: AbstractRiskMeasure end</code></pre><p>Supertype for risk measures compatible with <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, and <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> with any of the previous.</p><p>See also: <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a>, <a href="../MiscRiskMeasureFunctions/#PortfolioOptimiser.set_rm_solvers!-Tuple{Union{EDaR, EDaR_r, EVaR, RLDaR, RLDaR_r, RLVaR}, Any}"><code>set_rm_solvers!</code></a>, <a href="../MiscRiskMeasureFunctions/#PortfolioOptimiser.unset_rm_solvers!-Tuple{Union{EDaR, EDaR_r, EVaR, RLDaR, RLDaR_r, RLVaR}, Any}"><code>unset_rm_solvers!</code></a>.</p><p><strong>Implementation requirements</strong></p><p>To ensure a risk measure can be used by the above optimisation types, it must abide by a few rules.</p><ul><li>Include a <code>settings::HCRMSettings</code> field, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>.</li></ul><pre><code class="language-julia hljs">struct MyHCRiskMeasure &lt;: HCRiskMeasure
    # Fields of MyHCRiskMeasure
    settings::HCRMSettings
end</code></pre><ul><li>Implement your measure&#39;s risk calculation method, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>. This will let the library use the risk function everywhere it needs to.</li></ul><pre><code class="language-julia hljs">function calc_risk(my_risk::MyHCRiskMeasure, w::AbstractVector; kwargs...)
    # Risk measure calculation
end</code></pre><ul><li>If calculating the risk requires solving an optimisation model it must have a <code>solvers::Union{&lt;:AbstractDict, Nothing}</code> field to store <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a>-compatible solvers, and implement <a href="../MiscRiskMeasureFunctions/#PortfolioOptimiser.set_rm_solvers!-Tuple{Union{EDaR, EDaR_r, EVaR, RLDaR, RLDaR_r, RLVaR}, Any}"><code>set_rm_solvers!</code></a> and <a href="../MiscRiskMeasureFunctions/#PortfolioOptimiser.unset_rm_solvers!-Tuple{Union{EDaR, EDaR_r, EVaR, RLDaR, RLDaR_r, RLVaR}, Any}"><code>unset_rm_solvers!</code></a>.</li></ul><pre><code class="language-julia hljs">struct MyHCRiskMeasure &lt;: RiskMeasure
    # Fields of MyHCRiskMeasure
    solvers::Union{&lt;:AbstractDict, Nothing}
end

function PortfolioOptimiser.set_rm_solvers!(rm::MyHCRiskMeasure, solvers)
    flag = false
    if isnothing(rm.solvers) || isempty(rm.solvers)
        rm.solvers = solvers
        flag = true
    end
    return flag
end

function PortfolioOptimiser.unset_rm_solvers!(rm::MyHCRiskMeasure, flag)
    if flag
        rm.solvers = nothing
    end
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L160-L211">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.NoOptRiskMeasure" href="#PortfolioOptimiser.NoOptRiskMeasure"><code>PortfolioOptimiser.NoOptRiskMeasure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type NoOptRiskMeasure &lt;: AbstractRiskMeasure end</code></pre><p>Abstract type for risk measures that cannot be used in optimisations but can be used as performance measurements via <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>. This can be for two reasons:</p><ol><li>They can be negative, therefore unsuitable for <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, and <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> with any of the previous.</li><li>They have no known optimisation formulation, therefore unsuitable for <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, and <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> with any of the previous.</li></ol><p>See also: <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a>.</p><p><strong>Implementation</strong></p><ul><li>Implement your measure&#39;s risk calculation method, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>. This will let the library use the risk function everywhere it needs to.</li></ul><pre><code class="language-julia hljs">struct MyNoOptRiskMeasure &lt;: NoOptRiskMeasure
    # Fields of MyNoOptRiskMeasure
end

function calc_risk(my_risk::MyNoOptRiskMeasure, w::AbstractVector; kwargs...)
    # Risk measure calculation
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L214-L237">source</a></section></article><h2 id="Settings"><a class="docs-heading-anchor" href="#Settings">Settings</a><a id="Settings-1"></a><a class="docs-heading-anchor-permalink" href="#Settings" title="Permalink"></a></h2><p><a href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/"><code>PortfolioOptimiser</code></a> lets users provide multiple risk measures at the same time. They can be added to the risk expression in the optimisation objective, or used to set upper risk bounds. If multiple risk measures are to be used as part of the risk expression in the optimisation objective, it makes sense provide a way to scale each risk contribution in the objective, especially because different risk expressions may have different units, and therefore require appropriate scaling.</p><p>Furthermore, certain risk measures make use of Ordered Weight Array formulations, for which there is an expensive exact formulation, and an approximate, tunable one. We let users decide which one to use, and if they want to use the approximate one they can tune it as they see fit.</p><p>The following structures provide said functionality.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RMSettings" href="#PortfolioOptimiser.RMSettings"><code>PortfolioOptimiser.RMSettings</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct RMSettings{T1 &lt;: Real, T2 &lt;: Real}</code></pre><p>Configuration settings for concrete subtypes of <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>. Having this field makes it possible for a risk measure to be used in any optimisation types that take risk measures as parameters.</p><p>See also: <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a>.</p><p><strong>Keyword Parameters</strong></p><p><strong>In <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> with any of the previous</strong></p><ul><li><p><code>flag::Bool = true</code>:</p><ul><li>If <code>true</code>: it is included in the optimisation&#39;s risk vector.</li><li>If <code>false</code>: it is <em>not</em> included in the optimisation&#39;s risk vector, used when you want to constrain the upper bound of a risk measure without having that risk measure appear in the <a href="../../Optimisation/ObjectiveFunctions/#PortfolioOptimiser.MinRisk"><code>MinRisk</code></a>, <a href="../../Optimisation/ObjectiveFunctions/#PortfolioOptimiser.Utility"><code>Utility</code></a>, or <a href="../../Optimisation/ObjectiveFunctions/#PortfolioOptimiser.Sharpe"><code>Sharpe</code></a> objective measures.</li></ul></li><li><p><code>scale::T1 = 1.0</code>: weight parameter of the risk measure in the <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a> method being used.</p></li><li><p><code>ub::T2 = Inf</code>: upper bound risk constraint.</p></li></ul><p><strong>In <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> with any of the previous</strong></p><ul><li><code>flag::Bool = true</code>: no effect, the risk cannot be bounded in these optimisations.</li><li><code>scale::T1 = 1.0</code>: weight parameter of the risk measure in the <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a> method being used.</li><li><code>ub::T2 = Inf</code>: no effect, the risk cannot be bounded in these optimisations.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Clarabel

# Randomly generated normally distributed returns.
ret = [0.670643    1.94045   -0.0896267   0.851535    -0.268234
       1.33575    -0.541003   2.28744    -0.157588    -1.45177
       -1.91694    -0.167745   0.920495    0.00677243  -1.29112
       0.123141    1.59841   -0.185076    2.58911     -0.250747
       1.92782     1.01679    1.12107     1.09731     -0.99954
       2.07114    -0.513216  -0.532891    0.917748    -0.0346682
       -1.37424    -1.35272   -0.628216   -2.76234     -0.112378
       1.3831      1.14021   -0.577472    0.224504     1.28137
       -0.0577619  -0.10658   -0.637011    1.70933      1.84176
       1.6319      2.05059   -0.21469    -0.640715     1.39879]

# Instantiate portfolio instance.
port = Portfolio(; ret = ret, assets = 1:size(ret, 2),
                 solvers = Dict(:Clarabel =&gt; Dict(:solver =&gt; Clarabel.Optimizer,
                                                  :check_sol =&gt; (allow_local = true,
                                                                 allow_almost = true),
                                                  :params =&gt; Dict(&quot;verbose&quot; =&gt; false))))

# Compute statistics.
asset_statistics!(port)

# Clusterise assets.
cluster_assets!(port)

# Traditional optimisation.
type = Trad(;
            rm = [
                  # Append to the risk vector as `sqrt(252) * sd_risk`
                  SD(; settings = RMSettings(; flag = true, scale = sqrt(252))),
                  # Append to the risk vector as `0.5 * cvar_risk`
                  CVaR(; settings = RMSettings(; scale = 0.5, flag = true)),
                  # Do not add to the risk vector but constrain the maximum
                  # CDaR to 100
                  CDaR(; settings = RMSettings(; flag = false, ub = 100))])
w1 = optimise!(port, type)
#=
5×2 DataFrame
 Row │ tickers  weights     
     │ Int64    Float64     
─────┼──────────────────────
   1 │       1  3.11076e-11
   2 │       2  0.0165189
   3 │       3  0.525957
   4 │       4  0.0220971
   5 │       5  0.435427
=#

# Risk vector only contains the risk measures with `flag == true`, 
# multiplied by the scaling factor
port.model[:risk_vec]
#=
2-element Vector{JuMP.AbstractJuMPScalar}:
 15.874507866387544 sd_risk
 0.5 var + z_cvar[1] + z_cvar[2] + z_cvar[3] + z_cvar[4] + z_cvar[5] + z_cvar[6] + z_cvar[7] + z_cvar[8] + z_cvar[9] + z_cvar[10]
=#

# The risk expression is the sum of the entries in the vector because
# the default scalarisation is the sum of the expressions.
port.model[:risk]
#=
15.874507866387544 sd_risk + 0.5 var + z_cvar[1] + z_cvar[2] + z_cvar[3] + z_cvar[4] + z_cvar[5] + z_cvar[6] + z_cvar[7] + z_cvar[8] + z_cvar[9] + z_cvar[10]
=#

# Check that the CDaR is indeed constrained to be &lt;= 100.
port.model[:cdar_risk_ub]
#=
dar + 2 z_cdar[1] + 2 z_cdar[2] + 2 z_cdar[3] + 2 z_cdar[4] + 2 z_cdar[5] + 2 z_cdar[6] + 2 z_cdar[7] + 2 z_cdar[8] + 2 z_cdar[9] + 2 z_cdar[10] &lt;= 100
=#

# Hierarchical equal risk optimisation.
type = HERC(;
            rm = [
                  # Add to the risk calculation (via `AbstractScalarisation`)
                  # as `sqrt(252) * sd_risk`.
                  SD(; settings = RMSettings(; flag = true, scale = sqrt(252))),
                  # Add to the risk calculation (via `AbstractScalarisation`)
                  # as `0.5 * cvar_risk`.
                  CVaR(; settings = RMSettings(; scale = 0.5, flag = true)),
                  # Add to the risk calculation because `flag` and `ub` have no
                  # effect in hierarchical optimisations.
                  CDaR(; settings = RMSettings(; flag = false, ub = 100))])
w2 = optimise!(port, type)
#=
5×2 DataFrame
 Row │ tickers  weights   
     │ Int64    Float64   
─────┼────────────────────
   1 │       1  0.0548607
   2 │       2  0.0634407
   3 │       3  0.695601
   4 │       4  0.0506031
   5 │       5  0.135495
=#

# There is no `JuMP` model for HRP and HERC so we can&#39;t see the internals. 
# The effects can be seen by changing coefficients.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L240-L368">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.HCRMSettings" href="#PortfolioOptimiser.HCRMSettings"><code>PortfolioOptimiser.HCRMSettings</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct HCRMSettings{T1 &lt;: Real}</code></pre><p>Configuration settings for concrete subtypes of <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>.</p><p>See also: <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HRP"><code>HRP</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.HERC"><code>HERC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><code>scale::T1 = 1.0</code>: weight parameter of the risk measure in the <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.AbstractScalarisation"><code>AbstractScalarisation</code></a> method being used.</li></ul><pre><code class="language-julia hljs"># Randomly generated normally distributed returns.
ret = [0.670643    1.94045   -0.0896267   0.851535    -0.268234
       1.33575    -0.541003   2.28744    -0.157588    -1.45177
       -1.91694    -0.167745   0.920495    0.00677243  -1.29112
       0.123141    1.59841   -0.185076    2.58911     -0.250747
       1.92782     1.01679    1.12107     1.09731     -0.99954
       2.07114    -0.513216  -0.532891    0.917748    -0.0346682
       -1.37424    -1.35272   -0.628216   -2.76234     -0.112378
       1.3831      1.14021   -0.577472    0.224504     1.28137
       -0.0577619  -0.10658   -0.637011    1.70933      1.84176
       1.6319      2.05059   -0.21469    -0.640715     1.39879]

# Instantiate portfolio instance.
port = Portfolio(; ret = ret, assets = 1:size(ret, 2))

# Compute asset statistics.                                                
asset_statistics!(port)

# Clusterise assets.
cluster_assets!(port)

# Hierarchical equal risk optimisation.
type = HERC(;
            rm = [
                  # Add to the risk calculation (via `AbstractScalarisation`)
                  # as `0.5 * dar_risk`.
                  DaR(; settings = HCRMSettings(; scale = 0.5)),
                  # Add to the risk calculation (via `AbstractScalarisation`)
                  # as `3 * var_risk`.
                  VaR(; settings = HCRMSettings(; scale = 3))])
w = optimise!(port, type)
#=
5×2 DataFrame
 Row │ tickers  weights   
     │ Int64    Float64   
─────┼────────────────────
   1 │       1  0.035433
   2 │       2  0.0480019
   3 │       3  0.795106
   4 │       4  0.0245889
   5 │       5  0.0968701
=#

# There is no `JuMP` model for HRP and HERC so we can&#39;t see the internals. 
# The effects can be seen by changing coefficients.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L378-L436">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.OWASettings" href="#PortfolioOptimiser.OWASettings"><code>PortfolioOptimiser.OWASettings</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct OWASettings{T1 &lt;: AbstractVector{&lt;:Real}}</code></pre><p><strong>Description</strong></p><p>Defines the settings for Ordered Weight Array (OWA) risk measures.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>approx::Bool = true</code>: use the p-norm based approximation of the OWA risk measure optimisation.</li><li><code>p::T1 = Float64[2, 3, 4, 10, 50]</code>: vector of the p-norm orders to be used in the approximation.</li></ul><p><strong>Behaviour</strong></p><ul><li><code>p</code> is only used when <code>approx == true</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1928-L1947">source</a></section></article><h2 id="Risk-measures"><a class="docs-heading-anchor" href="#Risk-measures">Risk measures</a><a id="Risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Risk-measures" title="Permalink"></a></h2><p>These risk measures are compatible with both <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a> and optimisations. Different risk measures account for different aspects of the returns.</p><h3 id="Dispersion-risk-measures"><a class="docs-heading-anchor" href="#Dispersion-risk-measures">Dispersion risk measures</a><a id="Dispersion-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Dispersion-risk-measures" title="Permalink"></a></h3><p>These measure the spread of the returns distribution.</p><h4 id="Full-dispersion-risk-measures"><a class="docs-heading-anchor" href="#Full-dispersion-risk-measures">Full dispersion risk measures</a><a id="Full-dispersion-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Full-dispersion-risk-measures" title="Permalink"></a></h4><p>These measure how far the returns deviate from the mean in both the positive and negative directions.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.VarianceFormulation" href="#PortfolioOptimiser.VarianceFormulation"><code>PortfolioOptimiser.VarianceFormulation</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type VarianceFormulation end</code></pre><p>Abstract type for implementing various formulations of the <a href="#PortfolioOptimiser.Variance"><code>Variance</code></a> in <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> with any of the previous optimisation types.</p><p>See also: <a href="#PortfolioOptimiser.Variance"><code>Variance</code></a>, <a href="#PortfolioOptimiser.Quad"><code>Quad</code></a>, <a href="#PortfolioOptimiser.SOC"><code>SOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L444-L450">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.Quad" href="#PortfolioOptimiser.Quad"><code>PortfolioOptimiser.Quad</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Quad &lt;: VarianceFormulation end</code></pre><p>Explicit quadratic formulation for the <a href="#PortfolioOptimiser.Variance"><code>Variance</code></a> as an optimisation model.</p><p class="math-container">\[\begin{align}
\underset{\bm{w}}{\mathrm{opt}} &amp;\qquad \bm{w}^\intercal \mathbf{\Sigma} \bm{w}\\
\end{align}\]</p><p>Where:</p><ul><li><span>$\bm{w}$</span>: is the <code>N×1</code> vector of asset weights.</li><li><span>$\mathbf{\Sigma}$</span>: is the <code>N×N</code> asset covariance matrix.</li></ul><p>See also: <a href="#PortfolioOptimiser.VarianceFormulation"><code>VarianceFormulation</code></a>, <a href="#PortfolioOptimiser.SOC"><code>SOC</code></a>, <a href="#PortfolioOptimiser.Variance"><code>Variance</code></a>.</p><p><strong>Behaviour</strong></p><ul><li>Produces a <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#QuadExpr"><code>QuadExpr</code></a> risk expression <code>variance_risk = dot(w, sigma, w)</code>.</li><li>Not compatible with <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a> optimisations because <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#QuadExpr"><code>QuadExpr</code></a> are not strictly convex.</li><li>No additional variables or constraints introduced.</li><li>Requires a solver capable of handling quadratic expressions.</li><li>Performance may degrade for large portfolios.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Clarabel, LinearAlgebra

# Randomly generated normally distributed returns.
ret = [0.670643    1.94045   -0.0896267   0.851535    -0.268234
       1.33575    -0.541003   2.28744    -0.157588    -1.45177
       -1.91694    -0.167745   0.920495    0.00677243  -1.29112
       0.123141    1.59841   -0.185076    2.58911     -0.250747
       1.92782     1.01679    1.12107     1.09731     -0.99954
       2.07114    -0.513216  -0.532891    0.917748    -0.0346682
       -1.37424    -1.35272   -0.628216   -2.76234     -0.112378
       1.3831      1.14021   -0.577472    0.224504     1.28137
       -0.0577619  -0.10658   -0.637011    1.70933      1.84176
       1.6319      2.05059   -0.21469    -0.640715     1.39879]

# Instantiate portfolio instance.
port = Portfolio(; ret = ret, assets = 1:size(ret, 2),
                 solvers = Dict(:Clarabel =&gt; Dict(:solver =&gt; Clarabel.Optimizer,
                                                  :check_sol =&gt; (allow_local = true,
                                                                 allow_almost = true),
                                                  :params =&gt; Dict(&quot;verbose&quot; =&gt; false))))
# Compute asset statistics.                                                
asset_statistics!(port)

# Explicit quadratic expression for the variance.
w = optimise!(port, Trad(; rm = Variance(; formulation = Quad()), str_names = true))
#=
5×2 DataFrame
 Row │ tickers  weights    
     │ Int64    Float64    
─────┼─────────────────────
   1 │       1  3.5113e-10
   2 │       2  0.0183835
   3 │       3  0.520498
   4 │       4  0.0340474
   5 │       5  0.427071
=#

# Covariance matrix, sigma.
port.cov
#=
5×5 Matrix{Float64}:
 1.89335    0.649754   0.129808     0.602482     0.262616
 0.649754   1.41321   -0.152314     0.785941     0.367755
 0.129808  -0.152314   0.958713    -0.00842172  -0.855604
 0.602482   0.785941  -0.00842172   2.11576      0.113369
 0.262616   0.367755  -0.855604     0.113369     1.32352
=#

# Check that the variance risk is indeed `dot(w, sigma, w)`.
port.model[:variance_risk] == dot(port.model[:w], port.cov, port.model[:w]) # true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L453-L533">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.SOC" href="#PortfolioOptimiser.SOC"><code>PortfolioOptimiser.SOC</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SOC &lt;: VarianceFormulation end</code></pre><p>Second-Order Cone (SOC) formulation for the <a href="#PortfolioOptimiser.Variance"><code>Variance</code></a>. Reformulates the quadratic variance expression using a <a href="https://jump.dev/JuMP.jl/stable/tutorials/conic/tips_and_tricks/#Second-Order-Cone">MOI.SecondOrderCone</a> cone constraint.</p><p class="math-container">\[\begin{align}
\underset{\bm{w}}{\mathrm{opt}} &amp;\qquad \sigma^2\nonumber\\
\textrm{s.t.} &amp;\qquad \left\lVert \mathbf{G} \bm{w} \right\rVert_{2} \leq \sigma\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\bm{w}$</span>: is the <code>N×1</code> vector of asset weights.</li><li><span>$\mathbf{G}$</span>: is a suitable factorisation of the <code>N×N</code> covariance matrix, such as the square root matrix, or the Cholesky factorisation.</li><li><span>$\sigma^2$</span>: is the portfolio variance.</li><li><span>$\lVert \cdot \rVert_{2}$</span>: is the L-2 norm, which is modelled as an <a href="https://jump.dev/JuMP.jl/stable/tutorials/conic/tips_and_tricks/#Second-Order-Cone">MOI.SecondOrderCone</a>.</li></ul><p>See also: <a href="#PortfolioOptimiser.VarianceFormulation"><code>VarianceFormulation</code></a>, <a href="#PortfolioOptimiser.Quad"><code>Quad</code></a>, <a href="#PortfolioOptimiser.Variance"><code>Variance</code></a>.</p><p><strong>Behaviour</strong></p><ul><li>Uses a <a href="https://jump.dev/JuMP.jl/stable/manual/constraints/#Second-order-cone-constraints"><code>SecondOrderCone</code></a> constraint.</li><li>Defines a standard deviation variable <code>dev</code>.</li><li>Produces a <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#QuadExpr"><code>QuadExpr</code></a> risk expression <code>sd_risk = dev^2</code>.</li><li>Not compatible with <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a> (Near Optimal Centering) optimisations because <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#QuadExpr"><code>QuadExpr</code></a> are not strictly convex.</li><li>Often more numerically stable than direct quadratic formulation.</li><li>Better scaling properties for large portfolios.</li><li>Compatible with specialised conic solvers.</li><li>May introduce more variables but often leads to better solution times.</li><li>Particularly effective for large-scale problems.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Clarabel

# Randomly generated normally distributed returns.
ret = [0.670643    1.94045   -0.0896267   0.851535    -0.268234
       1.33575    -0.541003   2.28744    -0.157588    -1.45177
       -1.91694    -0.167745   0.920495    0.00677243  -1.29112
       0.123141    1.59841   -0.185076    2.58911     -0.250747
       1.92782     1.01679    1.12107     1.09731     -0.99954
       2.07114    -0.513216  -0.532891    0.917748    -0.0346682
       -1.37424    -1.35272   -0.628216   -2.76234     -0.112378
       1.3831      1.14021   -0.577472    0.224504     1.28137
       -0.0577619  -0.10658   -0.637011    1.70933      1.84176
       1.6319      2.05059   -0.21469    -0.640715     1.39879]

# Instantiate portfolio instance.
port = Portfolio(; ret = ret, assets = 1:size(ret, 2),
                 solvers = Dict(:Clarabel =&gt; Dict(:solver =&gt; Clarabel.Optimizer,
                                                  :check_sol =&gt; (allow_local = true,
                                                                 allow_almost = true),
                                                  :params =&gt; Dict(&quot;verbose&quot; =&gt; false))))
# Compute asset statistics.                                                
asset_statistics!(port)

# Explicit quadratic expression for the variance.
w = optimise!(port, Trad(; rm = Variance(; formulation = SOC()), str_names = true))
#=
5×2 DataFrame
 Row │ tickers  weights    
     │ Int64    Float64    
─────┼─────────────────────
   1 │       1  2.14218e-9
   2 │       2  0.0183819
   3 │       3  0.520499
   4 │       4  0.0340462
   5 │       5  0.427073
=#

# Covariance matrix, sigma.
port.cov
#=
5×5 Matrix{Float64}:
 1.89335    0.649754   0.129808     0.602482     0.262616
 0.649754   1.41321   -0.152314     0.785941     0.367755
 0.129808  -0.152314   0.958713    -0.00842172  -0.855604
 0.602482   0.785941  -0.00842172   2.11576      0.113369
 0.262616   0.367755  -0.855604     0.113369     1.32352
 =#

# Check that the variance risk exists as an SOC constraint.
port.model[:variance_risk]
#=
dev²
=#

port.model[:constr_dev_soc]
#=
constr_dev_soc : 
[dev, 
1.3339817521328776 w[1] + 0.23752111354642388 w[2] + 0.08772311968949179 w[3] + 0.1933954630317334 w[4] + 0.11104990914089145 w[5], 
0.23752111354642388 w[1] + 1.1172071395407432 w[2] - 0.05472328163488465 w[3] + 0.2914549020386699 w[4] + 0.14389651700778633 w[5],
0.08772311968949179 w[1] - 0.05472328163488465 w[2] + 0.8635663605757948 w[3] - 0.00013005161391315675 w[4] - 0.4497512686528594 w[5],
0.1933954630317334 w[1] + 0.2914549020386699 w[2] - 0.00013005161391315675 w[3] + 1.4117365158022712 w[4] + 0.020326110574790338 w[5],
0.11104990914089145 w[1] + 0.14389651700778633 w[2] - 0.4497512686528594 w[3] + 0.020326110574790338 w[4] + 1.0429726582846264 w[5]]
in MathOptInterface.SecondOrderCone(6)
=#</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L536-L638">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.Variance" href="#PortfolioOptimiser.Variance"><code>PortfolioOptimiser.Variance</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct Variance{T1 &lt;: Union{&lt;:AbstractMatrix, Nothing}} &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Variance.</p><p class="math-container">\[\begin{align}
\mathrm{Variance}(\bm{w},\, \mathbf{\Sigma}) &amp;= \bm{w}^\intercal \, \mathbf{\Sigma}\, \bm{w}\,.
\end{align}\]</p><p>See also: <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::Variance, ::AbstractVector)</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: hierarchical risk measure configuration settings.</li><li><code>sigma::Union{&lt;:AbstractMatrix, Nothing} = nothing</code>: optional covariance matrix.</li></ul><p><strong>Behaviour</strong></p><ul><li>If <code>sigma</code> is <code>nothing</code>: uses the covariance matrix <code>cov</code> from the (or [<code>Portfolio</code>] when used in <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>) instance.</li><li>If <code>sigma</code> provided: uses custom covariance matrix.</li></ul><p><strong>Validation</strong></p><ul><li>When setting <code>sigma</code> at construction or runtime, the matrix must be square (<code>N×N</code>).</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
variance = Variance()

# Custom settings
variance = Variance(; settings = RMSettings(; scale = 3))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2406-L2444">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.SD" href="#PortfolioOptimiser.SD"><code>PortfolioOptimiser.SD</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct SD &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Standard Deviation (SD).</p><p class="math-container">\[\begin{align}
\mathrm{SD}(\bm{w},\, \mathbf{\Sigma}) &amp;= \left(\bm{w}^\intercal \, \mathbf{\Sigma} \, \bm{w}\right)^{1/2}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\bm{w}$</span>: is the <code>N×1</code> vector of asset weights.</li><li><span>$\mathbf{\Sigma}$</span>: is the <code>N×N</code> asset covariance matrix.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.Variance"><code>Variance</code></a>, <a href="#PortfolioOptimiser.SSD"><code>SSD</code></a>, <a href="#PortfolioOptimiser.SVariance"><code>SVariance</code></a>, <a href="../../Optimisation/PortfolioClasses/#PortfolioOptimiser.PortClass"><code>PortClass</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.OptimType"><code>OptimType</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</p></li><li><p><code>sigma::Union{&lt;:AbstractMatrix, Nothing} = nothing</code>: (optional) <code>N×N</code> covariance matrix.</p><ul><li>If <code>nothing</code>: takes its value from the instance <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, the field depends on the <a href="../../Optimisation/PortfolioClasses/#PortfolioOptimiser.PortClass"><code>PortClass</code></a> parameter of the <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.OptimType"><code>OptimType</code></a> used.</li></ul></li></ul><p><strong>Behaviour</strong></p><ul><li>When setting <code>sigma</code> at construction or runtime, the matrix must be square (<code>N×N</code>).</li></ul><p><strong>In <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.Trad"><code>Trad</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.RB"><code>RB</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NCO"><code>NCO</code></a> with any of the previous</strong></p><ul><li>Uses a <a href="https://jump.dev/JuMP.jl/stable/manual/constraints/#Second-order-cone-constraints"><code>SecondOrderCone</code></a> constraint.</li><li>Defines a standard deviation variable <code>sd_risk</code>.</li><li>Sets the <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#AffExpr"><code>AffExpr</code></a> risk expression <code>sd_risk = dev</code>.</li><li>Compatible with <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.NOC"><code>NOC</code></a> (Near Optimal Centering) optimisations because <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#AffExpr"><code>AffExpr</code></a> are strictly convex.</li></ul><p><strong>Functor</strong></p><ul><li><code>(sd::SD)(w::AbstractVector)</code>: computes the Standard Deviation of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Clarabel

# Randomly generated normally distributed returns.
ret = [0.670643    1.94045   -0.0896267   0.851535    -0.268234
       1.33575    -0.541003   2.28744    -0.157588    -1.45177
       -1.91694    -0.167745   0.920495    0.00677243  -1.29112
       0.123141    1.59841   -0.185076    2.58911     -0.250747
       1.92782     1.01679    1.12107     1.09731     -0.99954
       2.07114    -0.513216  -0.532891    0.917748    -0.0346682
       -1.37424    -1.35272   -0.628216   -2.76234     -0.112378
       1.3831      1.14021   -0.577472    0.224504     1.28137
       -0.0577619  -0.10658   -0.637011    1.70933      1.84176
       1.6319      2.05059   -0.21469    -0.640715     1.39879]

# Instantiate portfolio instance.
port = Portfolio(; ret = ret, assets = 1:size(ret, 2),
                 solvers = Dict(:Clarabel =&gt; Dict(:solver =&gt; Clarabel.Optimizer,
                                                  :check_sol =&gt; (allow_local = true,
                                                                 allow_almost = true),
                                                  :params =&gt; Dict(&quot;verbose&quot; =&gt; false))))
# Risk measure
rm = SD()

# Compute asset statistics.                                                
asset_statistics!(port)

# Optimise portfolio.
w1 = optimise!(port, Trad(; rm = rm, str_names = true))
#=
5×2 DataFrame
 Row │ tickers  weights     
     │ Int64    Float64     
─────┼──────────────────────
   1 │       1  1.42346e-10
   2 │       2  0.018383
   3 │       3  0.520498
   4 │       4  0.0340474
   5 │       5  0.427072
=#

# Compute the standard deviation.
r1 = calc_risk(port, :Trad; rm = rm) # 0.3612722213729872

# As a functor.
r1 == SD(; sigma = port.cov)(w1.weights) # true

# Covariance matrix, sigma.
port.cov
#=
5×5 Matrix{Float64}:
 1.89335    0.649754   0.129808     0.602482     0.262616
 0.649754   1.41321   -0.152314     0.785941     0.367755
 0.129808  -0.152314   0.958713    -0.00842172  -0.855604
 0.602482   0.785941  -0.00842172   2.11576      0.113369
 0.262616   0.367755  -0.855604     0.113369     1.32352
=#

# Check that the std risk exists as an SOC constraint.
port.model[:sd_risk]
#=
sd_risk
=#

port.model[:constr_sd_risk_soc]
#=
constr_sd_risk_soc : 
[sd_risk,
1.3339817521328776 w[1] + 0.23752111354642388 w[2] + 0.08772311968949179 w[3] + 0.1933954630317334 w[4] + 0.11104990914089145 w[5],
0.23752111354642388 w[1] + 1.1172071395407432 w[2] - 0.05472328163488465 w[3] + 0.2914549020386699 w[4] + 0.14389651700778633 w[5],
0.08772311968949179 w[1] - 0.05472328163488465 w[2] + 0.8635663605757948 w[3] - 0.00013005161391315675 w[4] - 0.4497512686528594 w[5],
0.1933954630317334 w[1] + 0.2914549020386699 w[2] - 0.00013005161391315675 w[3] + 1.4117365158022712 w[4] + 0.020326110574790338 w[5],
0.11104990914089145 w[1] + 0.14389651700778633 w[2] - 0.4497512686528594 w[3] + 0.020326110574790338 w[4] + 1.0429726582846264 w[5]]
in MathOptInterface.SecondOrderCone(6)
=#

# Clusterise assets.
cluster_assets!(port)

# Hierarchical optimisation, no JuMP model.
w2 = optimise!(port, HRP(; rm = rm))
#=
5×2 DataFrame
 Row │ tickers  weights  
     │ Int64    Float64  
─────┼───────────────────
   1 │       1  0.199755
   2 │       2  0.229988
   3 │       3  0.198033
   4 │       4  0.133306
   5 │       5  0.238918
=#

# Compute the standard deviation.
r2 = calc_risk(port, :HRP; rm = rm) # 0.6547632732108616

# Use SD as a functor.
r2 == SD(; sigma = port.cov)(w2.weights) # true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L641-L783">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.MAD" href="#PortfolioOptimiser.MAD"><code>PortfolioOptimiser.MAD</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct MAD &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Mean Absolute Deviation (MAD). In other words, it is the expected value of the absolute deviation from the expected value of the returns vector. This is a generalisation to accomodate the use of weighted means.</p><p class="math-container">\[\begin{align}
\mathrm{MAD}(\bm{X}) &amp;= \mathbb{E}\left(\left\lvert \bm{X} - \mathbb{E}\left(\bm{X}\right) \right\rvert\right)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\bm{X}$</span>: is the <code>T×1</code> portfolio returns vector.</li><li><span>$\lvert \cdot \rvert$</span>: is the absolute value.</li><li><span>$\mathbb{E}(\cdot)$</span>: is the expected value.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../ParameterEstimation/MeanEstimators/#PortfolioOptimiser.MuSimple"><code>MuSimple</code></a>, <a href="../../Optimisation/OptimisationConstraints/#PortfolioOptimiser.NoKelly"><code>NoKelly</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</p></li><li><p><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: (optional, functor-exclusive) <code>T×1</code> vector of weights for computing the expected value of the returns vector (internal expected value).</p><ul><li>Only used if <code>isnothing(mu) || isempty(mu)</code>, else uses <code>mu</code>.</li></ul></li><li><p><code>we::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: (optional) <code>T×1</code> vector of weights for computing the expected value of the absolute deviation (external expected value).</p></li><li><p><code>mu::Union{&lt;:AbstractVector{&lt;:Real}, Nothing} = nothing</code>: (optional) <code>N×1</code> vector of weights for computing the expected value of the returns vector (internal expected value).</p><ul><li>In the functor: takes precedence over <code>w</code>,</li><li>In optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models: provides the expected returns vector to use. If <code>isnothing(mu)</code>, takes the value from the <code>mu</code> property of the <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a> instance.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(mad::MAD)(X::AbstractMatrix, w::AbstractVector, fees = 0.0)</code>: computes the Mean Absolute Deviation of a <code>T×N</code> returns matrix, and a <code>N×1</code> vector of portfolio weights <code>w</code>, accounting for fees.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L817-L854">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.Kurt" href="#PortfolioOptimiser.Kurt"><code>PortfolioOptimiser.Kurt</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct Kurt &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Square Root Kurtosis.</p><p class="math-container">\[\begin{align}
\mathrm{Kurt}(\bm{X}) &amp;= \left(\dfrac{1}{T} \sum\limits_{t=1}^{T} \left(X_{t} - \mathbb{E}(\bm{X}) \right)^{4} \right)^{1/2}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$T$</span>: is the number of observations.</li><li><span>$X_{t}$</span>: is the <code>t</code>-th value of the portfolio returns vector.</li><li><span>$\mathbb{E}(\cdot)$</span>: is the expected value.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.SKurt"><code>SKurt</code></a>, <a href="#PortfolioOptimiser.Kurtosis"><code>Kurtosis</code></a>, <a href="#PortfolioOptimiser.SKurtosis"><code>SKurtosis</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</p></li><li><p><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: optional <code>T×1</code> vector of weights for computing the expected value of the returns vector (internal expected value).</p><ul><li><code>w</code> has no effect in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models. However, it can be taken into account if <code>mu</code> paramter is computed with the <a href="../../ParameterEstimation/MeanEstimators/#PortfolioOptimiser.MuSimple"><code>MuSimple</code></a> estimator using a weights vector.</li></ul></li><li><p><code>kt::Union{&lt;:AbstractMatrix, Nothing} = nothing</code>: optional <code>N²×N²</code> cokurtosis matrix.</p><ul><li>If <code>nothing</code>: takes its value from the <code>kurt</code> instance <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li><li><code>kt</code> has no effect in optimisations that don&#39;t use <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models, because the kurtosis is computed from the returns vector.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(kurt::Kurt)(x::AbstractVector)</code>: computes the Square Root Kurtosis of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1717-L1753">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RG" href="#PortfolioOptimiser.RG"><code>PortfolioOptimiser.RG</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct RG{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Range.</p><ul><li>Measures the best and worst returns, <span>$\left[\mathrm{WR}(\bm{X}),\, \mathrm{WR}(-\bm{X})\right]$</span>.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::RG, ::AbstractVector)</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
rg = RG()

# Custom settings
rg = RG(; settings = RMSettings(; ub = 0.5))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1842-L1866">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.CVaRRG" href="#PortfolioOptimiser.CVaRRG"><code>PortfolioOptimiser.CVaRRG</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct CVaRRG{T1 &lt;: Real, T2 &lt;: Real} &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Conditional Value at Risk Range.</p><ul><li>Measures the range between the expected loss in the worst <code>alpha %</code> of cases and expected gain in the best <code>beta %</code> of cases, <span>$\left[\mathrm{CVaR}(\bm{X},\, \alpha),\, \mathrm{CVaR}(-\bm{X},\, \beta)\right]$</span>.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::CVaRRG, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.RG"><code>RG</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level of losses, <code>alpha ∈ (0, 1)</code>.</li><li><code>alpha::T2 = 0.05</code>: significance level of gains, <code>beta ∈ (0, 1)</code>.</li></ul><p><strong>Behaviour</strong></p><p><strong>Validation</strong></p><ul><li>When setting <code>alpha</code> at construction or runtime, <code>alpha ∈ (0, 1)</code>.</li><li>When setting <code>beta</code> at construction or runtime, <code>beta ∈ (0, 1)</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1879-L1904">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.TGRG" href="#PortfolioOptimiser.TGRG"><code>PortfolioOptimiser.TGRG</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct TGRG{T1 &lt;: Real, T2 &lt;: Real, T3 &lt;: Integer, T4 &lt;: Real, T5 &lt;: Real, T6 &lt;: Integer} &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Tail Gini Difference Range.</p><ul><li>Measures the range between the worst <code>alpha %</code> tail gini of cases and best <code>beta %</code> tail gini of cases, <span>$\left[\mathrm{TG}(\bm{X},\, \alpha),\, \mathrm{TG}(-\bm{X},\, \beta)\right]$</span>.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.OWASettings"><code>OWASettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::TGRG, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.TG"><code>TG</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>owa::OWASettings = OWASettings()</code>: OWA risk measure settings.</li><li><code>alpha_i::T1 = 0.0001</code>: start value of the significance level of CVaR losses, <code>0 &lt; alpha_i &lt; alpha &lt; 1</code>.</li><li><code>alpha::T2 = 0.05</code>: end value of the significance level of CVaR losses, <code>0 &lt; alpha_i &lt; alpha &lt; 1</code>.</li><li><code>a_sim::T3 = 100</code>: number of CVaRs to approximate the Tail Gini losses, <code>a_sim &gt; 0</code>.</li><li><code>beta_i::T4 = 0.0001</code>: start value of the significance level of CVaR gains, <code>0 &lt; beta_i &lt; beta &lt; 1</code>.</li><li><code>beta::T5 = 0.05</code>: end value of the significance level of CVaR gains, <code>0 &lt; beta_i &lt; beta &lt; 1</code>.</li><li><code>b_sim::T6 = 100</code>: number of CVaRs to approximate the Tail Gini gains, <code>b_sim &gt; 0</code>.</li></ul><p><strong>Behaviour</strong></p><p><strong>Validation</strong></p><ul><li>When setting <code>alpha_i</code> at construction or runtime, <code>0 &lt; alpha_i &lt; alpha &lt; 1</code>.</li><li>When setting <code>alpha</code> at construction or runtime, <code>0 &lt; alpha_i &lt; alpha &lt; 1</code>.</li><li>When setting <code>a_sim</code> at construction or runtime, <code>a_sim &gt; 0</code>.</li><li>When setting <code>beta_i</code> at construction or runtime, <code>0 &lt; beta_i &lt; beta &lt; 1</code>.</li><li>When setting <code>beta</code> at construction or runtime, <code>0 &lt; beta_i &lt; beta &lt; 1</code>.</li><li>When setting <code>b_sim</code> at construction or runtime, <code>b_sim &gt; 0</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2055-L2089">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.GMD" href="#PortfolioOptimiser.GMD"><code>PortfolioOptimiser.GMD</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct GMD &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Gini Mean Difference.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.OWASettings"><code>OWASettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::GMD, ::AbstractVector)</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>owa::OWASettings = OWASettings()</code>: OWA risk measure settings.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1957-L1972">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.Skew" href="#PortfolioOptimiser.Skew"><code>PortfolioOptimiser.Skew</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Skew &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Define the Quadratic Skewness.</p><p class="math-container">\[\begin{align}
\nu &amp;= \bm{w}^{\intercal} \mathbf{V} \bm{w}\\
\end{align}\]</p><p>Where:</p><ul><li><span>$\bm{w}$</span> is the vector of asset weights.</li><li><span>$\mathbf{V}$</span> is the sum of the symmetric negative spectral slices of the coskewness.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.OWASettings"><code>OWASettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::Skew, ::AbstractVector)</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>skew::Union{&lt;:AbstractMatrix, Nothing}</code>: optional <code>N×N²</code> custom coskewness matrix.</li><li><code>V::Union{Nothing, &lt;:AbstractMatrix}</code>: optional <code>Na×Na</code> custom sum of the symmetric negative spectral slices of the coskewness.</li></ul><p><strong>Behaviour</strong></p><p><strong>Coskewness matrix usage</strong></p><ul><li><p>If <code>skew</code> is <code>nothing</code>:</p><ul><li>With <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/<a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>: no effect.</li><li>With : uses the portfolio coskewness matrix <code>skew</code> to generate the <code>V</code> matrix.</li></ul></li><li><p>If <code>skew</code> provided:</p><ul><li>With <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/<a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>: no effect.</li><li>With : uses the custom coskew matrix to generate the <code>V</code> matrix.</li></ul></li></ul><p><strong><code>V</code> matrix</strong></p><ul><li><p>If <code>V</code> is <code>nothing</code>:</p><ul><li>With <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/<a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>: uses the portfolio <code>V</code> matrix.</li><li>With : no effect.</li></ul></li><li><p>If <code>V</code> provided:</p><ul><li>With <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/<a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>: uses the custom <code>V</code> matrix.</li><li>With : no effect.</li></ul></li></ul><p><strong>Validation</strong></p><ul><li>When setting <code>skew</code> at construction or runtime, the matrix must have dimensions (<code>N×N²</code>).</li><li>When setting <code>V</code> at construction or runtime, the matrix must be square (<code>N×N</code>).</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2224-L2282">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.BDVariance" href="#PortfolioOptimiser.BDVariance"><code>PortfolioOptimiser.BDVariance</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct BDVariance &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Define the Brownian Distance Variance.</p><ul><li>Measures linear and non-linear relationships between variables.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.OWASettings"><code>OWASettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::BDVariance, ::AbstractVector)</code></a>.</p><p class="math-container">\[\begin{align}
\mathrm{BDVariance}(\bm{X}) &amp;= \mathrm{BDCov}(\bm{X},\, \bm{X}) =  \dfrac{1}{T^{2}} \sum\limits_{i=1}^{T}\sum\limits_{j=1}^{T} A_{i,\,j}^2\\
\mathrm{BDCov}(\bm{X},\, \bm{Y}) &amp;= \dfrac{1}{T^{2}} \sum\limits_{i=1}^{T} \sum\limits_{j=1}^{T} A_{i,\,j} B_{i,\,j}\\
A_{i,\,j} &amp;= a_{i,\,j} - \bar{a}_{i\,.} - \bar{a}_{.\,j} + \bar{a}_{.\,.}\\
B_{i,\,j} &amp;= b_{i,\,j} - \bar{b}_{i\,.} - \bar{b}_{.\,j} + \bar{b}_{.\,.}\\
a_{i,\,j} &amp;= \lVert X_{i} - X_{j} \rVert_{2}, \quad \forall i,\, j = 1,\, \ldots ,\, T\\
b_{i,\,j} &amp;= \lVert Y_{i} - Y_{j} \rVert_{2}, \quad \forall i,\, j = 1,\, \ldots ,\, T\,.
\end{align}\]</p><p>where:</p><ul><li><span>$\bm{X}$</span> and <span>$\bm{Y}$</span> are random variables, they are equal in this case as they are the portfolio returns.</li><li><span>$a_{i,\,j}$</span> and <span>$b_{i,\,j}$</span> are entries of a distance matrix where <span>$i$</span> and <span>$j$</span> are points in time. Each entry is defined as the Euclidean distance <span>$\lVert \cdot \rVert_{2}$</span> between the value of the random variable at time <span>$i$</span> and its value at time <span>$j$</span>.</li><li><span>$\bar{a}_{i,\,\cdot}$</span> and <span>$\bar{b}_{i,\,\cdot}$</span> are the <span>$i$</span>-th row means of their respective matrices.</li><li><span>$\bar{a}_{\cdot,\,j}$</span> and <span>$\bar{b}_{\cdot,\,j}$</span> are the <span>$j$</span>-th column means of their respective matrices.</li><li><span>$\bar{a}_{\cdot,\,\cdot}$</span> and <span>$\bar{b}_{\cdot,\,\cdot}$</span> are the grand means of their respective matrices.</li><li><span>$A_{i,\,j}$</span> and <span>$B_{i,\,j}$</span> are doubly centered distances.</li></ul><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2169-L2205">source</a></section></article><h4 id="Tracking-and-turnover-risk-measures"><a class="docs-heading-anchor" href="#Tracking-and-turnover-risk-measures">Tracking and turnover risk measures</a><a id="Tracking-and-turnover-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Tracking-and-turnover-risk-measures" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.AbstractTR" href="#PortfolioOptimiser.AbstractTR"><code>PortfolioOptimiser.AbstractTR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractTR end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2608-L2612">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.TrackingErr" href="#PortfolioOptimiser.TrackingErr"><code>PortfolioOptimiser.TrackingErr</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type TrackingErr end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2643-L2647">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.TrackRet" href="#PortfolioOptimiser.TrackRet"><code>PortfolioOptimiser.TrackRet</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@kwdef mutable struct TrackRet{T1 &lt;: Real, T2 &lt;: AbstractVector{&lt;:Real}} &lt;: TrackingErr
    err::T1 = 0.0
    w::T2 = Vector{Float64}(undef, 0)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2680-L2687">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.TrackWeight" href="#PortfolioOptimiser.TrackWeight"><code>PortfolioOptimiser.TrackWeight</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@kwdef mutable struct TrackWeight{T1 &lt;: Real, T2 &lt;: AbstractVector{&lt;:Real}} &lt;: TrackingErr
    err::T1 = 0.0
    w::T2 = Vector{Float64}(undef, 0)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2657-L2664">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.NoTracking" href="#PortfolioOptimiser.NoTracking"><code>PortfolioOptimiser.NoTracking</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct NoTracking &lt;: TrackingErr end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2650-L2654">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.TR" href="#PortfolioOptimiser.TR"><code>PortfolioOptimiser.TR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@kwdef mutable struct TR{T1 &lt;: Union{&lt;:Real, &lt;:AbstractVector{&lt;:Real}},
                         T2 &lt;: AbstractVector{&lt;:Real}} &lt;: AbstractTR
    val::T1 = 0.0
    w::T2 = Vector{Float64}(undef, 0)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2622-L2630">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.NoTR" href="#PortfolioOptimiser.NoTR"><code>PortfolioOptimiser.NoTR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct NoTR &lt;: AbstractTR end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2615-L2619">source</a></section></article><h4 id="Downside-dispersion-risk-measures"><a class="docs-heading-anchor" href="#Downside-dispersion-risk-measures">Downside dispersion risk measures</a><a id="Downside-dispersion-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Downside-dispersion-risk-measures" title="Permalink"></a></h4><p>These measure how far the returns deviate from the mean in the negative direction.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.SSD" href="#PortfolioOptimiser.SSD"><code>PortfolioOptimiser.SSD</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct SSD{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Semi Standard Deviation (SD) below equal to or below the <code>target</code> return threshold.</p><p class="math-container">\[\begin{align}
\mathrm{SSD}(\bm{X}) &amp;= \left(\dfrac{1}{T-1} \sum\limits_{t=1}^{T}\min\left(X_{t} - \mathbb{E}(\bm{X}),\, r\right)^{2}\right)^{1/2}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$T$</span>: is the number of observations.</li><li><span>$X_{t}$</span>: is the <code>t</code>-th value of the portfolio returns vector.</li><li><span>$r$</span>: is the minimum acceptable return.</li><li><span>$\mathbb{E}(\cdot)$</span>: is the expected value.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.SD"><code>SD</code></a>, <a href="#PortfolioOptimiser.Variance"><code>Variance</code></a>, <a href="#PortfolioOptimiser.SVariance"><code>SVariance</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</p></li><li><p><code>target::T1 = 0.0</code>: minimum return threshold for classifying downside returns. Only returns equal to or below this value are considered in the calculation. Must be in the same frequency as the returns.</p></li><li><p><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: optional <code>T×1</code> vector of weights for computing the expected value of the returns vector (internal expected value).</p><ul><li><code>w</code> has no effect in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models. However, it can be taken into account if <code>mu</code> paramter is computed with the <a href="../../ParameterEstimation/MeanEstimators/#PortfolioOptimiser.MuSimple"><code>MuSimple</code></a> estimator using a weights vector.</li></ul></li><li><p><code>mu::Union{&lt;:AbstractVector, Nothing} = nothing</code>: optional vector of expected returns.</p><ul><li>If <code>nothing</code>: takes its value from the <code>mu</code> instance <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li><li>Only used in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models. Other optimisations, as well as the risk calculation, compute its value via the functor.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(ssd::SSD)(x::AbstractVector)</code>: computes the Semi Standard Deviation of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L874-L912">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.FLPM" href="#PortfolioOptimiser.FLPM"><code>PortfolioOptimiser.FLPM</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct FLPM{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio First Lower Partial Moment (FLPM). Measures the dispersion equal to or below the <code>target</code> return threshold. The risk-adjusted return ratio of this risk measure is commonly known as the Omega ratio.</p><p class="math-container">\[\begin{align}
\mathrm{FLPM}(\bm{X},\, r) &amp;= \dfrac{1}{T} \sum\limits_{t=1}^{T}\max\left(r - X_{t},\, 0\right)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$T$</span>: is the number of observations.</li><li><span>$r$</span>: is the minimum acceptable return.</li><li><span>$X_{t}$</span>: is the <code>t</code>-th value of the portfolio returns vector.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.SLPM"><code>SLPM</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</p></li><li><p><code>target::T1 = 0.0</code>: minimum return threshold for classifying downside returns. Only returns equal to or below this value are considered in the calculation. Must be in the same frequency as the returns.</p><ul><li><p>If <code>isinf(target)</code>:</p><ul><li><p>In optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models: it is set to be equal to the dot product of the expected returns vector and weights. The expected returns vector takes its value from <code>mu</code>.</p><ul><li>If <code>isinf(mu)</code>: it takes its value from the <code>mu</code> field of the <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a> instance.</li></ul></li><li><p>When using the functor: it is set to the expected value of the returns vector, which is computed using <code>w</code>.</p></li></ul></li></ul></li><li><p><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: optional <code>T×1</code> vector of weights for computing the expected value of the returns vector.</p><ul><li><code>w</code> has no effect in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models. However, it can be taken into account if <code>mu</code> paramter is computed with the <a href="../../ParameterEstimation/MeanEstimators/#PortfolioOptimiser.MuSimple"><code>MuSimple</code></a> estimator using a weights vector.</li></ul></li><li><p><code>mu::Union{&lt;:Real, AbstractVector{&lt;:Real}} = 0.0</code>: optional minimum return target.</p><ul><li>If <code>isinf(mu)</code>: takes its value from the <code>mu</code> instance <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li><li>If <code>isa(mu, Real)</code>: sets the expected returns vector to this value.</li><li>Only used in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models. Other optimisations, as well as the risk calculation, compute its value via the functor.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(flpm::FLPM)(x::AbstractVector)</code>: computes the First Lower Partial Moment of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L932-L978">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.SLPM" href="#PortfolioOptimiser.SLPM"><code>PortfolioOptimiser.SLPM</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct SLPM{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Second Lower Partial Moment (SLPM). Measures the dispersion equal to or below the <code>target</code> return threshold. The risk-adjusted return ratio of this risk measure is commonly known as the Sortino ratio.</p><p class="math-container">\[\begin{align}
\mathrm{SLPM}(\bm{X},\, r) &amp;= \left(\dfrac{1}{T-1} \sum\limits_{t=1}^{T}\max\left(r - X_{t},\, 0\right)^{2}\right)^{1/2}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$T$</span>: is the number of observations.</li><li><span>$r$</span>: is the minimum acceptable return.</li><li><span>$X_{t}$</span>: is the <code>t</code>-th value of the portfolio returns vector.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.FLPM"><code>FLPM</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</p></li><li><p><code>target::T1 = 0.0</code>: minimum return threshold for classifying downside returns. Only returns equal to or below this value are considered in the calculation. Must be in the same frequency as the returns.</p><ul><li><p>If <code>isinf(target)</code>:</p><ul><li><p>In optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models: it is set to be equal to the dot product of the expected returns vector and weights. The expected returns vector takes its value from <code>mu</code>.</p><ul><li>If <code>isinf(mu)</code>: it takes its value from the <code>mu</code> field of the <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a> instance.</li></ul></li><li><p>When using the functor: it is set to the expected value of the returns vector, which is computed using <code>w</code>.</p></li></ul></li></ul></li><li><p><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: optional <code>T×1</code> vector of weights for computing the expected value of the returns vector.</p><ul><li><code>w</code> has no effect in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models. However, it can be taken into account if <code>mu</code> paramter is computed with the <a href="../../ParameterEstimation/MeanEstimators/#PortfolioOptimiser.MuSimple"><code>MuSimple</code></a> estimator using a weights vector.</li></ul></li><li><p><code>mu::Union{&lt;:Real, AbstractVector{&lt;:Real}} = 0.0</code>: optional minimum return target.</p><ul><li>If <code>isinf(mu)</code>: takes its value from the <code>mu</code> instance <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li><li>If <code>isa(mu, Real)</code>: sets the expected returns vector to this value.</li><li>Only used in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models. Other optimisations, as well as the risk calculation, compute its value via the functor.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(slpm::SLPM)(x::AbstractVector)</code>: computes the Second Lower Partial Moment of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1003-L1049">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.SKurt" href="#PortfolioOptimiser.SKurt"><code>PortfolioOptimiser.SKurt</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct SKurt{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Square Root Semi Kurtosis. Measures the kurtosis equal to or below the <code>target</code> return threshold.</p><p class="math-container">\[\begin{align}
\mathrm{SKurt}(\bm{X}) &amp;= \left(\dfrac{1}{T} \sum\limits_{t=1}^{T} \min\left(X_{t} - \mathbb{E}(\bm{X}),\, r \right)^{4} \right)^{1/2}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$T$</span>: is the number of observations.</li><li><span>$X_{t}$</span>: is the <code>t</code>-th value of the portfolio returns vector.</li><li><span>$r$</span>: is the minimum acceptable return.</li><li><span>$\mathbb{E}(\cdot)$</span>: is the expected value.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.Kurt"><code>Kurt</code></a>, <a href="#PortfolioOptimiser.Kurtosis"><code>Kurtosis</code></a>, <a href="#PortfolioOptimiser.SKurtosis"><code>SKurtosis</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</p></li><li><p><code>target::T1 = 0.0</code>: minimum return threshold for classifying downside returns. Only returns equal to or below this value are considered in the calculation. Must be in the same frequency as the returns.</p></li><li><p><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: optional <code>T×1</code> vector of weights for computing the expected value of the returns vector (internal expected value).</p><ul><li><code>w</code> has no effect in optimisations using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models. However, it can be taken into account if <code>mu</code> paramter is computed with the <a href="../../ParameterEstimation/MeanEstimators/#PortfolioOptimiser.MuSimple"><code>MuSimple</code></a> estimator using a weights vector.</li></ul></li><li><p><code>kt::Union{&lt;:AbstractMatrix, Nothing} = nothing</code>: optional <code>N²×N²</code> semi cokurtosis matrix.</p><ul><li>If <code>nothing</code>: takes its value from the <code>skurt</code> instance <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li><li><code>kt</code> has no effect in optimisations that don&#39;t use <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP</code></a> models, because the kurtosis is computed from the returns vector.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(skurt::SKurt)(x::AbstractVector)</code>: computes the Semi Square Root Kurtosis of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1778-L1816">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.SSkew" href="#PortfolioOptimiser.SSkew"><code>PortfolioOptimiser.SSkew</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SSkew &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Define the Quadratic Semi Skewness.</p><p class="math-container">\[\begin{align}
\nu &amp;= \bm{w}^{\intercal} \mathbf{V} \bm{w}\\
\end{align}\]</p><p>Where:</p><ul><li><span>$\bm{w}$</span> is the vector of asset weights.</li><li><span>$\mathbf{V}$</span> is the sum of the symmetric negative spectral slices of the semicoskewness.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.OWASettings"><code>OWASettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::SSkew, ::AbstractVector)</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>skew::Union{&lt;:AbstractMatrix, Nothing}</code>: optional <code>N×N²</code> custom semi coskewness matrix.</li><li><code>V::Union{Nothing, &lt;:AbstractMatrix}</code>: optional <code>Na×Na</code> custom sum of the symmetric negative spectral slices of the semi coskewness.</li></ul><p><strong>Behaviour</strong></p><p><strong>Coskewness matrix usage</strong></p><ul><li><p>If <code>skew</code> is <code>nothing</code>:</p><ul><li>With <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/<a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>: no effect.</li><li>With : uses the portfolio semi coskewness matrix <code>sskew</code> to generate the <code>V</code> matrix.</li></ul></li><li><p>If <code>skew</code> provided:</p><ul><li>With <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/<a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>: no effect.</li><li>With : uses the custom semi coskew matrix to generate the <code>V</code> matrix.</li></ul></li></ul><p><strong><code>V</code> matrix</strong></p><ul><li><p>If <code>V</code> is <code>nothing</code>:</p><ul><li>With <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/<a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>: uses the portfolio <code>SV</code> matrix.</li><li>With : no effect.</li></ul></li><li><p>If <code>V</code> provided:</p><ul><li>With <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/<a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>: uses the custom <code>V</code> matrix.</li><li>With : no effect.</li></ul></li></ul><p><strong>Validation</strong></p><ul><li>When setting <code>skew</code> at construction or runtime, the matrix must have dimensions (<code>N×N²</code>).</li><li>When setting <code>V</code> at construction or runtime, the matrix must be square (<code>N×N</code>).</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2315-L2373">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.Kurtosis" href="#PortfolioOptimiser.Kurtosis"><code>PortfolioOptimiser.Kurtosis</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct Kurtosis &lt;: HCRiskMeasure</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L3552-L3554">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.SKurtosis" href="#PortfolioOptimiser.SKurtosis"><code>PortfolioOptimiser.SKurtosis</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct SKurtosis{T1} &lt;: HCRiskMeasure</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L3577-L3579">source</a></section></article><h4 id="Worst-case-variance"><a class="docs-heading-anchor" href="#Worst-case-variance">Worst case variance</a><a id="Worst-case-variance-1"></a><a class="docs-heading-anchor-permalink" href="#Worst-case-variance" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.WorstCaseSet" href="#PortfolioOptimiser.WorstCaseSet"><code>PortfolioOptimiser.WorstCaseSet</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type WorstCaseSet end</code></pre><p>Abstract type for subtyping worst case mean variance set types.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2528-L2534">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.Box" href="#PortfolioOptimiser.Box"><code>PortfolioOptimiser.Box</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Box &lt;: WCSetMuSigma end</code></pre><p>Box sets for worst case mean variance optimisation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2539-L2545">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.Ellipse" href="#PortfolioOptimiser.Ellipse"><code>PortfolioOptimiser.Ellipse</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Ellipse &lt;: WCSetMuSigma end</code></pre><p>Elliptical sets for worst case mean variance optimisation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2548-L2554">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.NoWC" href="#PortfolioOptimiser.NoWC"><code>PortfolioOptimiser.NoWC</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@kwdef mutable struct NoWC &lt;: WorstCaseSet
    formulation::VarianceFormulation = SOC()
end</code></pre><p>Use no set for worst case mean variance optimisation.</p><p><strong>Parameters</strong></p><ul><li><code>formulation</code>: quadratic expression formulation of <a href="#PortfolioOptimiser.SD"><code>SD</code></a> risk measure to use <a href="#PortfolioOptimiser.VarianceFormulation"><code>VarianceFormulation</code></a>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2557-L2569">source</a></section></article><h3 id="Downside-risk-measures"><a class="docs-heading-anchor" href="#Downside-risk-measures">Downside risk measures</a><a id="Downside-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Downside-risk-measures" title="Permalink"></a></h3><p>These measure different aspects of the tail (negative side) of the returns distribution.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.WR" href="#PortfolioOptimiser.WR"><code>PortfolioOptimiser.WR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct WR &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Worst Realization/Return (WR). It is the absolute value of the most extreme loss for the period. Best used in combination with other risk measures.</p><ul><li><span>$\mathrm{VaR}(\bm{X},\, \alpha) \leq \mathrm{CVaR}(\bm{X},\, \alpha) \leq \mathrm{EVaR}(\bm{X},\, \alpha) \leq \mathrm{RLVaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{WR}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{WR}(\bm{X}) &amp;= -\min(\bm{X})\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</li></ul><p><strong>Functor</strong></p><ul><li><code>(wr::WR)(x::AbstractVector)</code>: computes the Worst Realisation of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1074-L1102">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.CVaR" href="#PortfolioOptimiser.CVaR"><code>PortfolioOptimiser.CVaR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct CVaR{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Conditional Value at Risk (CVaR). Also known as the Expected Shortfall, it is the weighted average of all tail losses up to the Value at Risk, which is the threshold below or equal to which are the worst <code>alpha %</code> of portfolio returns.</p><ul><li><span>$\mathrm{VaR}(\bm{X},\, \alpha) \leq \mathrm{CVaR}(\bm{X},\, \alpha) \leq \mathrm{EVaR}(\bm{X},\, \alpha) \leq \mathrm{RLVaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{WR}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{CVaR}(\bm{X},\, \alpha) &amp;= \mathrm{VaR}(\bm{X},\, \alpha) + \dfrac{1}{\alpha T} \sum\limits_{t=1}^{T} \max\left(-X_{t} - \mathrm{VaR}(\bm{X},\, \alpha),\, 0\right)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{VaR}(\bm{X},\, \alpha)$</span>: is the Value at Risk as defined in <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li><li><span>$\alpha$</span>: is the significance level.</li><li><span>$T$</span>: is the number of observations.</li><li><span>$X_{t}$</span>: is the <code>t</code>-th value of the portfolio returns vector.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Functor</strong></p><ul><li><code>(cvar::CVaR)(x::AbstractVector)</code>: computes the Conditional Value at Risk of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1113-L1146">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.EVaR" href="#PortfolioOptimiser.EVaR"><code>PortfolioOptimiser.EVaR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct EVaR{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Entropic Value at Risk (EVaR). It is the upper bound of the Chernoff inequality for the <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a> and <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>.</p><ul><li><span>$\mathrm{VaR}(\bm{X},\, \alpha) \leq \mathrm{CVaR}(\bm{X},\, \alpha) \leq \mathrm{EVaR}(\bm{X},\, \alpha) \leq \mathrm{RLVaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{WR}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{EVaR}(\bm{X},\alpha) &amp;= \underset{z &gt; 0}{\inf} \left\{\mathrm{ERM}(\bm{X},\, z, \,\alpha)\right\}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{ERM}(\bm{X},\, z, \,\alpha)$</span> is the entropic risk measure as defined in <a href="../RiskValue/#PortfolioOptimiser.ERM"><code>ERM</code></a>.</li><li><span>$z$</span>: is the entropic value at risk.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li><li><span>$\alpha$</span>: is the significance level.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</p></li><li><p><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</p></li><li><p><code>solvers::Union{&lt;:AbstractDict, Nothing} = nothing</code>: optional abstract dictionary containing the solvers, their settings, solution criteria, and other arguments. In order to solve the problem, a solver must be compatible with <a href="https://jump.dev/JuMP.jl/stable/tutorials/conic/tips_and_tricks/#Exponential-Cone"><code>MOI.ExponentialCone</code></a>.</p><ul><li>If <code>isnothing(solvers)</code>: it takes its value from the <code>solvers</code> field of the instance of <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(evar::EVaR)(x::AbstractVector)</code>: computes the Entropic Value at Risk of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1202-L1238">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RLVaR" href="#PortfolioOptimiser.RLVaR"><code>PortfolioOptimiser.RLVaR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct RLVaR{T1 &lt;: Real, T2 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Relativistic Value at Risk (RLVaR). It is a generalisation of the <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>.</p><ul><li><span>$\mathrm{VaR}(\bm{X},\, \alpha) \leq \mathrm{CVaR}(\bm{X},\, \alpha) \leq \mathrm{EVaR}(\bm{X},\, \alpha) \leq \mathrm{RLVaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{WR}(\bm{X})$</span>.</li><li><span>$\lim\limits_{\kappa \to 0} \mathrm{RLVaR}(\bm{X},\, \alpha,\, \kappa) \approx \mathrm{EVaR}(\bm{X},\, \alpha)$</span></li><li><span>$\lim\limits_{\kappa \to 1} \mathrm{RLVaR}(\bm{X},\, \alpha,\, \kappa) \approx \mathrm{WR}(\bm{X})$</span></li></ul><p class="math-container">\[\begin{align}
\mathrm{RLVaR}(\bm{X},\, \alpha,\, \kappa) &amp;= \mathrm{RRM}(\bm{X},\, \alpha,\, \kappa)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{RRM}(\bm{X},\, \alpha,\, \kappa)$</span> is the Relativistic Risk Measure as defined in <a href="../RiskValue/#PortfolioOptimiser.RRM"><code>RRM</code></a>.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li><li><span>$\alpha$</span>: is the significance level.</li><li><span>$\kappa$</span>: is the relativistic deformation parameter.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</p></li><li><p><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</p></li><li><p><code>kappa::T1 = 0.3</code>: relativistic deformation level, <code>kappa ∈ (0, 1)</code>.</p></li><li><p><code>solvers::Union{&lt;:AbstractDict, Nothing} = nothing</code>: optional abstract dictionary containing the solvers, their settings, solution criteria, and other arguments. In order to solve the problem, a solver must be compatible with <a href="https://jump.dev/JuMP.jl/stable/tutorials/conic/tips_and_tricks/#Exponential-Cone"><code>MOI.ExponentialCone</code></a>.</p><ul><li>If <code>isnothing(solvers)</code>: it takes its value from the <code>solvers</code> field of the instance of <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(rlvar::RLVaR)(x::AbstractVector)</code>: computes the Relativistic Value at Risk of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1259-L1298">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.TG" href="#PortfolioOptimiser.TG"><code>PortfolioOptimiser.TG</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct TG{T1 &lt;: Real, T2 &lt;: Real, T3 &lt;: Integer} &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Tail Gini Difference.</p><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.OWASettings"><code>OWASettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::TG, ::AbstractVector)</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>owa::OWASettings = OWASettings()</code>: OWA risk measure settings.</li><li><code>alpha_i::T1 = 0.0001</code>: start value of the significance level of CVaR losses, <code>0 &lt; alpha_i &lt; alpha &lt; 1</code>.</li><li><code>alpha::T2 = 0.05</code>: end value of the significance level of CVaR losses, <code>0 &lt; alpha_i &lt; alpha &lt; 1</code>.</li><li><code>a_sim::T3 = 100</code>: number of CVaRs to approximate the Tail Gini losses, <code>a_sim &gt; 0</code>.</li></ul><p><strong>Behaviour</strong></p><p><strong>Validation</strong></p><ul><li>When setting <code>alpha_i</code> at construction or runtime, <code>0 &lt; alpha_i &lt; alpha &lt; 1</code>.</li><li>When setting <code>alpha</code> at construction or runtime, <code>0 &lt; alpha_i &lt; alpha &lt; 1</code>.</li><li>When setting <code>a_sim</code> at construction or runtime, <code>a_sim &gt; 0</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
tg = TG()

# Use full risk measure formulation with custom parameters
tg = TG(; alpha = 0.07, owa = OWASettings(; approx = false))

# Use more p-norms and constrain risk without adding it to the problem&#39;s risk expression
tg = TG(; settings = RMSettings(; flag = false, ub = 0.1),
        owa = OWASettings(; p = Float64[1, 2, 4, 8, 16, 32, 64, 128]))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1986-L2024">source</a></section></article><h3 id="Drawdown-risk-measures"><a class="docs-heading-anchor" href="#Drawdown-risk-measures">Drawdown risk measures</a><a id="Drawdown-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Drawdown-risk-measures" title="Permalink"></a></h3><p>These measure the drops in portfolio value from local maxima to subsequent local minima.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.MDD" href="#PortfolioOptimiser.MDD"><code>PortfolioOptimiser.MDD</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct MDD &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Maximum Drawdown of uncompounded cumulative returns (MDD). It measures the largest peak-to-trough decline. Best used in combination with other risk measures. The risk-adjusted return ratio of this risk measure is commonly known as the Calmar ratio.</p><ul><li><span>$\mathrm{DaR}(\bm{X},\, \alpha) \leq \mathrm{CDaR}(\bm{X},\, \alpha) \leq \mathrm{EDaR}(\bm{X},\, \alpha) \leq \mathrm{RLDaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{MDD_{a}}(\bm{X}) &amp;= \max\mathrm{DD_{a}}(\bm{X})\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{a}}(\bm{X})$</span> is the Drawdown of uncompounded cumulative returns as defined in <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>, <a href="#PortfolioOptimiser.CDaR_r"><code>CDaR_r</code></a>, <a href="#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: risk measure configuration settings.</li></ul><p><strong>Functor</strong></p><ul><li><code>(mdd::MDD)(x::AbstractVector)</code>: computes the Maximum Drawdown of uncompounded returns of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1321-L1350">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.ADD" href="#PortfolioOptimiser.ADD"><code>PortfolioOptimiser.ADD</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct ADD &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Average (Expected) Drawdown of uncompounded cumulative returns (ADD). This is a generalisation to accomodate the use of weighted means.</p><p class="math-container">\[\begin{align}
\mathrm{ADD_{a}}(\bm{X}) &amp;= \mathbb{E}\lleft(\mathrm{DD_{a}}(\bm{X}, j)\,\forall j=1\,\ldots\,T\right)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{a}}(\bm{X}, j)$</span> is the Drawdown of uncompounded cumulative returns at time <span>$j$</span> as defined in <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>.</li><li><span>$T$</span>: is the number of observations.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: optional <code>T×1</code> vector of weights for computing the expected value of the returns vector.</li></ul><p><strong>Functor</strong></p><ul><li><code>(add::ADD)(x::AbstractVector)</code>: computes the Average Drawdown of uncompounded cumulative returns of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1375-L1403">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.UCI" href="#PortfolioOptimiser.UCI"><code>PortfolioOptimiser.UCI</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct UCI &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Ulcer Index of uncompounded cumulative returns (UCI). It is the normalised L2-norm of the portfolio drawdowns of uncompounded cumulative returns.</p><p class="math-container">\[\begin{align}
\mathrm{UCI_{a}}(\bm{X}) &amp;= \left(\dfrac{1}{T} \sum\limits_{j=0}^{T} \mathrm{DD_{a}}(\bm{X},\, j)^{2}\right)^{1/2}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{a}}(\bm{X},\, j)$</span> is the Drawdown of uncompounded cumulative returns at time <span>$j$</span> as defined in <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li></ul><p><strong>Functor</strong></p><ul><li><code>(uci::UCI)(x::AbstractVector)</code>: computes the Ulcer Index of uncompounded cumulative returns of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1521-L1548">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.CDaR" href="#PortfolioOptimiser.CDaR"><code>PortfolioOptimiser.CDaR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct CDaR{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Conditional Drawdown at Risk of uncompounded cumulative returns (CDaR). It is the weighted average of all drawdowns up to the Drawdown at Risk, which is the threshold below or equal to which are the worst <code>alpha %</code> of portfolio drawdowns.</p><ul><li><span>$\mathrm{DaR}(\bm{X},\, \alpha) \leq \mathrm{CDaR}(\bm{X},\, \alpha) \leq \mathrm{EDaR}(\bm{X},\, \alpha) \leq \mathrm{RLDaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{CDaR_{a}}(\bm{X},\, \alpha) &amp;= \mathrm{DaR_{a}}(\bm{X},\, \alpha) + \dfrac{1}{\alpha T} \sum\limits_{j=0}^{T} \max\left(\mathrm{DD_{a}}(\bm{X},\, j) - \mathrm{DaR_{a}}(\bm{X},\, \alpha),\, 0 \right)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{a}}(\bm{X},\, j)$</span> is the Drawdown of uncompounded cumulative returns at time <span>$j$</span> as defined in <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>.</li><li><span>$\mathrm{DaR_{a}}(\bm{X},\, \alpha)$</span> is the Drawdown at Risk of uncompounded cumulative returns as defined in <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li><li><span>$\alpha$</span>: is the significance level.</li><li><span>$T$</span>: is the number of observations.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>, <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Functor</strong></p><ul><li><code>(cdar::CDaR)(x::AbstractVector)</code>: computes the Conditional Drawdown at Risk of uncompounded cumulative returns of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1448-L1481">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.EDaR" href="#PortfolioOptimiser.EDaR"><code>PortfolioOptimiser.EDaR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct EDaR{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Entropic Drawdown at Risk of uncompounded cumulative returns (EDaR). It is the upper bound of the Chernoff inequality for the <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a> and <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>.</p><ul><li><span>$\mathrm{DaR}(\bm{X},\, \alpha) \leq \mathrm{CDaR}(\bm{X},\, \alpha) \leq \mathrm{EDaR}(\bm{X},\, \alpha) \leq \mathrm{RLDaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{EDaR_{a}}(\bm{X},\alpha) &amp;= \underset{z &gt; 0}{\inf} \left\{\mathrm{ERM}(\mathrm{DD_{a}}(\bm{X}),\, z, \,\alpha)\right\}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{ERM}(\mathrm{DD_{a}}(\bm{X}),\, z, \,\alpha)$</span> is the Entropic Risk Measure as defined in <a href="../RiskValue/#PortfolioOptimiser.ERM"><code>ERM</code></a>, using the Drawdown of uncompounded cumulative returns as defined in <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>.</li><li><span>$z$</span>: is the entropic drawdown at risk.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li><li><span>$\alpha$</span>: is the significance level.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</p></li><li><p><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</p></li><li><p><code>solvers::Union{&lt;:AbstractDict, Nothing} = nothing</code>: optional abstract dictionary containing the solvers, their settings, solution criteria, and other arguments. In order to solve the problem, a solver must be compatible with <a href="https://jump.dev/JuMP.jl/stable/tutorials/conic/tips_and_tricks/#Exponential-Cone"><code>MOI.ExponentialCone</code></a>.</p><ul><li>If <code>isnothing(solvers)</code>: it takes its value from the <code>solvers</code> field of the instance of <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(edar::EDaR)(x::AbstractVector)</code>: computes the Entropic Drawdown at Risk of uncompounded cumulative returns of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1574-L1610">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RLDaR" href="#PortfolioOptimiser.RLDaR"><code>PortfolioOptimiser.RLDaR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct RLDaR{T1 &lt;: Real, T2 &lt;: Real} &lt;: RiskMeasure</code></pre><p>Measures and computes the portfolio Relativistic Drawdown at Risk of uncompounded cumulative returns (RLVaR). It is a generalisation of the <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>.</p><ul><li><span>$\mathrm{DaR}(\bm{X},\, \alpha) \leq \mathrm{CDaR}(\bm{X},\, \alpha) \leq \mathrm{EDaR}(\bm{X},\, \alpha) \leq \mathrm{RLDaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD}(\bm{X})$</span>.</li><li><span>$\lim\limits_{\kappa \to 0} \mathrm{RLDaR}(\bm{X},\, \alpha,\, \kappa) \approx \mathrm{EDaR}(\bm{X},\, \alpha)$</span></li><li><span>$\lim\limits_{\kappa \to 1} \mathrm{RLDaR}(\bm{X},\, \alpha,\, \kappa) \approx \mathrm{MDD}(\bm{X})$</span></li></ul><p class="math-container">\[\begin{align}
\mathrm{RLDaR_{a}}(\bm{X},\, \alpha,\, \kappa) &amp;= \mathrm{RRM}(\mathrm{DD_{a}}(\bm{X}),\, \alpha,\, \kappa)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{RRM}(\mathrm{DD_{a}}(\bm{X}),\, \alpha,\, \kappa)$</span> is the Relativistic Risk Measure as defined in <a href="../RiskValue/#PortfolioOptimiser.RRM"><code>RRM</code></a>, using the Drawdown of uncompounded cumulative returns as defined in <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>.</li><li><span>$\bm{X}$</span>: is the vector of portfolio returns.</li><li><span>$\alpha$</span>: is the significance level.</li><li><span>$\kappa$</span>: is the relativistic deformation parameter.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="../RiskValue/#PortfolioOptimiser.calc_risk"><code>calc_risk</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>.</p><p><strong>Keyword Parameters</strong></p><ul><li><p><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</p></li><li><p><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</p></li><li><p><code>kappa::T1 = 0.3</code>: relativistic deformation level, <code>kappa ∈ (0, 1)</code>.</p></li><li><p><code>solvers::Union{&lt;:AbstractDict, Nothing} = nothing</code>: optional abstract dictionary containing the solvers, their settings, solution criteria, and other arguments. In order to solve the problem, a solver must be compatible with <a href="https://jump.dev/JuMP.jl/stable/tutorials/conic/tips_and_tricks/#Exponential-Cone"><code>MOI.ExponentialCone</code></a>.</p><ul><li>If <code>isnothing(solvers)</code>: it takes its value from the <code>solvers</code> field of the instance of <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>.</li></ul></li></ul><p><strong>Functor</strong></p><ul><li><code>(rlvar::RLDaR)(x::AbstractVector)</code>: computes the Relativistic Drawdown at Risk of uncompounded cumulative returns of a <code>T×1</code> vector of portfolio returns <code>x</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L1643-L1682">source</a></section></article><h3 id="Linear-moments-(L-moments)"><a class="docs-heading-anchor" href="#Linear-moments-(L-moments)">Linear moments (L-moments)</a><a id="Linear-moments-(L-moments)-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-moments-(L-moments)" title="Permalink"></a></h3><p>This is used to measure linear moments of the returns distribution.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.OWA" href="#PortfolioOptimiser.OWA"><code>PortfolioOptimiser.OWA</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct OWA &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the generic Ordered Weight Array.</p><ul><li>Uses a vector of ordered weights generated by <a href="../../ParameterEstimation/OWA/#PortfolioOptimiser.owa_l_moment"><code>owa_l_moment</code></a> or <a href="../../ParameterEstimation/OWA/#PortfolioOptimiser.owa_l_moment_crm-Tuple{Integer}"><code>owa_l_moment_crm</code></a> for arbitrary L-moment optimisations.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="#PortfolioOptimiser.OWASettings"><code>OWASettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Optimisation/OptimisationRiskMeasures/#PortfolioOptimiser.set_rm-Tuple{Any, Variance, Union{NOC, RB, Trad}}"><code>set_rm</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::OWA, ::AbstractVector)</code></a>, <a href="../../ParameterEstimation/OWA/#PortfolioOptimiser.owa_l_moment"><code>owa_l_moment</code></a>, <a href="../../ParameterEstimation/OWA/#PortfolioOptimiser.owa_l_moment_crm-Tuple{Integer}"><code>owa_l_moment_crm</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>owa::OWASettings = OWASettings()</code>: OWA risk measure settings.</li><li><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: <code>T×1</code> ordered weight vector of arbitrary L-moments generated by <a href="../../ParameterEstimation/OWA/#PortfolioOptimiser.owa_l_moment"><code>owa_l_moment</code></a> or <a href="../../ParameterEstimation/OWA/#PortfolioOptimiser.owa_l_moment_crm-Tuple{Integer}"><code>owa_l_moment_crm</code></a>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2133-L2151">source</a></section></article><h2 id="Hierarchical-risk-measures"><a class="docs-heading-anchor" href="#Hierarchical-risk-measures">Hierarchical risk measures</a><a id="Hierarchical-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Hierarchical-risk-measures" title="Permalink"></a></h2><p>These risk measures are compatible with . Different risk measures account for different aspects of the returns.</p><h3 id="Dispersion-hierarchical-risk-measures"><a class="docs-heading-anchor" href="#Dispersion-hierarchical-risk-measures">Dispersion hierarchical risk measures</a><a id="Dispersion-hierarchical-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Dispersion-hierarchical-risk-measures" title="Permalink"></a></h3><p>These measure the characteristics of the returns distribution.</p><h4 id="Downside-dispersion-hierarchical-risk-measures"><a class="docs-heading-anchor" href="#Downside-dispersion-hierarchical-risk-measures">Downside dispersion hierarchical risk measures</a><a id="Downside-dispersion-hierarchical-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Downside-dispersion-hierarchical-risk-measures" title="Permalink"></a></h4><p>These measure how far the returns deviate from the mean in the negative direction.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.SVariance" href="#PortfolioOptimiser.SVariance"><code>PortfolioOptimiser.SVariance</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct SVariance{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Semi Variance.</p><p class="math-container">\[\begin{align}
\mathrm{SVariance}(\bm{X}) &amp;= \dfrac{1}{T-1} \sum\limits_{t=1}^{T}\min\left(X_{t} - \mathbb{E}(\bm{X}),\, r\right)^{2}\,.
\end{align}\]</p><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::SVariance, ::AbstractVector)</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li><li><code>target::T1 = 0.0</code>: minimum return threshold for downside classification.</li><li><code>w::Union{&lt;:AbstractWeights, Nothing} = nothing</code>: optional <code>T×1</code> vector of weights for expected return calculation.</li></ul><p><strong>Behaviour</strong></p><ul><li>If <code>w</code> is <code>nothing</code>: computes the unweighted mean portfolio return.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
svariance = SVariance()

# Custom configuration with specific target
w = eweights(1:100, 0.3)  # Exponential weights for computing the portfolio mean return
svariance = SVariance(; target = 0.02,  # 2 % return target
                      settings = HCRMSettings(; scale = 2.0), w = w)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2470-L2506">source</a></section></article><h3 id="Downside-hierarchical-risk-measures"><a class="docs-heading-anchor" href="#Downside-hierarchical-risk-measures">Downside hierarchical risk measures</a><a id="Downside-hierarchical-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Downside-hierarchical-risk-measures" title="Permalink"></a></h3><p>These measure different aspects of the tail (negative side) of the returns distribution.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.VaR" href="#PortfolioOptimiser.VaR"><code>PortfolioOptimiser.VaR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct VaR{T1 &lt;: Real} &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Value at Risk.</p><ul><li>Measures lower bound of the losses in the worst <code>alpha %</code> of cases.</li><li><span>$\mathrm{VaR}(\bm{X},\, \alpha) \leq \mathrm{CVaR}(\bm{X},\, \alpha) \leq \mathrm{EVaR}(\bm{X},\, \alpha) \leq \mathrm{RLVaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{WR}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{VaR}(\bm{X},\, \alpha) &amp;= -\underset{t \in (0,\, T)}{\inf} \left\{ X_{t} \in \mathbb{R} \, | \, F_{\bm{X}}(X_{t}) &gt; \alpha \right\}\,.
\end{align}\]</p><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::VaR, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a> <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.CDaR_r"><code>CDaR_r</code></a>, <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>, <a href="#PortfolioOptimiser.MDD_r"><code>MDD_r</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Behaviour</strong></p><p><strong>Validation</strong></p><ul><li>When setting <code>alpha</code> at construction or runtime, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
var = VaR()

# Custom significance level
var = VaR(; settings = HCRMSettings(; scale = 1.0), alpha = 0.01)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2723-L2761">source</a></section></article><h3 id="Drawdown-hierarchical-risk-measures"><a class="docs-heading-anchor" href="#Drawdown-hierarchical-risk-measures">Drawdown hierarchical risk measures</a><a id="Drawdown-hierarchical-risk-measures-1"></a><a class="docs-heading-anchor-permalink" href="#Drawdown-hierarchical-risk-measures" title="Permalink"></a></h3><p>These measure the drops in portfolio value from local maxima to subsequent local minima.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.DaR" href="#PortfolioOptimiser.DaR"><code>PortfolioOptimiser.DaR</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct DaR{T1 &lt;: Real} &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Drawdown at Risk for uncompounded cumulative returns.</p><ul><li>Measures the lower bound of the peak-to-trough loss in the worst <code>alpha %</code> of cases.</li><li><span>$\mathrm{DaR}(\bm{X},\, \alpha) \leq \mathrm{CDaR}(\bm{X},\, \alpha) \leq \mathrm{EDaR}(\bm{X},\, \alpha) \leq \mathrm{RLDaR}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{DaR_{a}}(\bm{X},\, \alpha) &amp;= \underset{j \in (0,\, T)}{\max} \left\{ \mathrm{DD_{a}}(\bm{X},\, j) \in \mathbb{R} \, | \, F_{\mathrm{DD}}\left(\mathrm{DD_{a}}(\bm{X},\, j)\right) &lt; 1 - \alpha \right\}\\
\mathrm{DD_{a}}(\bm{X},\, j) &amp;= \underset{t \in (0,\, j)}{\max}\left( \sum\limits_{i=0}^{t} X_{i} \right) - \sum\limits_{i=0}^{j} X_{i}\\
\mathrm{DD_{a}}(\bm{X}) &amp;= \left\{j \in (0,\,T) \, | \, \mathrm{DD_{a}}(\bm{X},\, j)\right\}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{a}}(\bm{X})$</span> is the Drawdown of uncompounded cumulative returns.</li><li><span>$\mathrm{DD_{a}}(\bm{X},\, j)$</span> is the Drawdown of uncompounded cumulative returns at time <span>$j$</span>.</li><li><span>$\mathrm{DaR_{a}}(\bm{X},\, \alpha)$</span> the Drawdown at Risk of uncompounded cumulative returns.</li></ul><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::DaR, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a> <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.CDaR_r"><code>CDaR_r</code></a>, <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>, <a href="#PortfolioOptimiser.MDD_r"><code>MDD_r</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Behaviour</strong></p><p><strong>Validation</strong></p><ul><li>When setting <code>alpha</code> at construction or runtime, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
dar = DaR()

# Custom significance level
dar = DaR(; settings = HCRMSettings(; scale = 1.0), alpha = 0.01) # 1 % significance level</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2781-L2827">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.DaR_r" href="#PortfolioOptimiser.DaR_r"><code>PortfolioOptimiser.DaR_r</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct DaR_r{T1 &lt;: Real} &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Defines the Drawdown at Risk for compounded cumulative returns.</p><ul><li>Measures the lower bound of the peak-to-trough loss in the worst <code>alpha %</code> of cases.</li><li><span>$\mathrm{DaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{CDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{EDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD_{r}}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{DaR_{r}}(\bm{X},\, \alpha) &amp;= \underset{j \in (0,\, T)}{\max} \left\{ \mathrm{DD_{r}}(\bm{X},\, j) \in \mathbb{R} \, | \, F_{\mathrm{DD}}\left(\mathrm{DD_{r}}(\bm{X},\, j)\right) &lt; 1 - \alpha \right\}\\
\mathrm{DD_{r}}(\bm{X},\, j) &amp;= \underset{t \in (0,\, j)}{\max}\left( \prod\limits_{i=0}^{t} \left(1+X_{i}\right) \right) - \prod\limits_{i=0}^{j} \left(1+X_{i}\right)\\
\mathrm{DD_{r}}(\bm{X}) &amp;= \left\{j \in (0,\,T) \, | \, \mathrm{DD_{r}}(\bm{X},\, j)\right\}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{r}}(\bm{X})$</span> is the Drawdown of compounded cumulative returns.</li><li><span>$\mathrm{DD_{r}}(\bm{X},\, j)$</span> is the Drawdown of compounded cumulative returns at time <span>$j$</span>.</li><li><span>$\mathrm{DaR_{r}}(\bm{X},\, \alpha)$</span> the Drawdown at Risk of compounded cumulative returns.</li></ul><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::DaR_r, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a> <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.CDaR_r"><code>CDaR_r</code></a>, <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>, <a href="#PortfolioOptimiser.MDD_r"><code>MDD_r</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Behaviour</strong></p><p><strong>Validation</strong></p><ul><li>When setting <code>alpha</code> at construction or runtime, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
dar = DaR_r()

# Custom significance level
dar = DaR_r(; settings = HCRMSettings(; scale = 1.0), alpha = 0.01) # 1 % significance level</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2860-L2906">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.MDD_r" href="#PortfolioOptimiser.MDD_r"><code>PortfolioOptimiser.MDD_r</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct MDD_r &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Maximum Drawdown (Calmar ratio) risk measure for compounded cumulative returns.</p><ul><li>Measures the largest peak-to-trough decline.</li><li><span>$\mathrm{DaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{CDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{EDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD_{r}}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{MDD_{r}}(\bm{X}) &amp;= \max \mathrm{DD_{r}}(\bm{X})\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{r}}(\bm{X})$</span> is the Drawdown of compounded cumulative returns as defined in <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>.</li></ul><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::MDD_r, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a> <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.CDaR_r"><code>CDaR_r</code></a>, <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
mdd = MDD_r()

# Custom significance level
mdd = MDD_r(; settings = HCRMSettings(; scale = 1.0), alpha = 0.01) # 1 % significance level</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2938-L2973">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.ADD_r" href="#PortfolioOptimiser.ADD_r"><code>PortfolioOptimiser.ADD_r</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct ADD_r &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Average Drawdown risk measure for uncompounded cumulative returns.</p><ul><li>Measures the average of all peak-to-trough declines.</li><li>Provides a more balanced view than the maximum drawdown <a href="#PortfolioOptimiser.MDD_r"><code>MDD_r</code></a>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{ADD_{r}}(\bm{X}) &amp;= \dfrac{1}{T} \sum\limits_{j=0}^{T} \mathrm{DD_{r}}(\bm{X},\, j)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{r}}(\bm{X},\, j)$</span> is the Drawdown of compounded cumulative returns at time <span>$j$</span> as defined in <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::ADD_r, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.ADD"><code>ADD</code></a>, <a href="#PortfolioOptimiser.MDD_r"><code>MDD_r</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
add = ADD_r()

# Custom significance level
add = ADD_r(; settings = HCRMSettings(; scale = 1.0), alpha = 0.01) # 1 % significance level</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L2997-L3032">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.UCI_r" href="#PortfolioOptimiser.UCI_r"><code>PortfolioOptimiser.UCI_r</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct UCI_r{T1 &lt;: Real} &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Ulcer Index risk measure for compounded cumulative returns.</p><ul><li>Penalizes larger drawdowns more than smaller ones.</li></ul><p class="math-container">\[\begin{align}
\mathrm{UCI_{r}}(\bm{X}) &amp;= \left(\dfrac{1}{T} \sum\limits_{j=0}^{T} \mathrm{DD_{r}}(\bm{X},\, j)^{2}\right)^{1/2}\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{r}}(\bm{X},\, j)$</span> is the Drawdown of compounded cumulative returns at time <span>$j$</span> as defined in <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>.</li></ul><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::UCI_r, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.UCI"><code>UCI</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
uci_r = UCI_r()

# Custom settings
uci_r = UCI_r(; settings = HCRMSettings(; scale = 1.5))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L3159-L3193">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.CDaR_r" href="#PortfolioOptimiser.CDaR_r"><code>PortfolioOptimiser.CDaR_r</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct CDaR_r{T1 &lt;: Real} &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Conditional Drawdown at Risk risk measure for compounded cumulative returns.</p><ul><li>Measures the expected peak-to-trough loss in the worst <code>alpha %</code> of cases.</li><li><span>$\mathrm{DaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{CDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{EDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD_{r}}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{CDaR_{r}}(\bm{X},\, \alpha) &amp;= \mathrm{DaR_{r}}(\bm{X},\, \alpha) + \dfrac{1}{\alpha T} \sum\limits_{j=0}^{T} \max\left(\mathrm{DD_{r}}(\bm{X},\, j) - \mathrm{DaR_{r}}(\bm{X},\, \alpha),\, 0 \right)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{DD_{r}}(\bm{X},\, j)$</span> is the Drawdown of compounded cumulative returns at time <span>$j$</span> as defined in <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>.</li><li><span>$\mathrm{DaR_{r}}(\bm{X},\, \alpha)$</span> the Drawdown at Risk of compounded cumulative returns as defined in <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>.</li></ul><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::CDaR_r, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a> <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>, <a href="#PortfolioOptimiser.MDD_r"><code>MDD_r</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Behaviour</strong></p><p><strong>Validation</strong></p><ul><li>When setting <code>alpha</code> at construction or runtime, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
cdar_r = CDaR_r()

# Custom significance level
cdar_r = CDaR_r(; settings = HCRMSettings(; scale = 1.0), alpha = 0.01) # 1 % significance level</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L3077-L3120">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.EDaR_r" href="#PortfolioOptimiser.EDaR_r"><code>PortfolioOptimiser.EDaR_r</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct EDaR_r{T1 &lt;: Real} &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Entropic Drawdown at Risk risk measure for compounded cumulative returns.</p><ul><li>It is the upper bound of the Chernoff inequality for the <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a> and <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>.</li><li><span>$\mathrm{DaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{CDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{EDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD_{r}}(\bm{X})$</span>.</li></ul><p class="math-container">\[\begin{align}
\mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) &amp;= \mathrm{RRM}(\mathrm{DD_{r}}(\bm{X}),\, \alpha,\, \kappa)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{RRM}(\mathrm{DD_{r}}(\bm{X}),\, \alpha,\, \kappa)$</span> is the Relativistic Risk Measure as defined in <a href="../RiskValue/#PortfolioOptimiser.RRM"><code>RRM</code></a>, using the Drawdown of compounded cumulative returns as defined in <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>.</li></ul><p>See also: <a href="#PortfolioOptimiser.HCRiskMeasure"><code>HCRiskMeasure</code></a>, <a href="#PortfolioOptimiser.HCRMSettings"><code>HCRMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::EDaR_r, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a> <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.CDaR_r"><code>CDaR_r</code></a>, <a href="#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="#PortfolioOptimiser.RLDaR"><code>RLDaR</code></a>, <a href="#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>, <a href="#PortfolioOptimiser.MDD_r"><code>MDD_r</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::HCRMSettings = HCRMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</li><li><code>solvers::Union{&lt;:AbstractDict, Nothing}</code>: optional JuMP-compatible solvers for exponential cone problems.</li></ul><p><strong>Behaviour</strong></p><ul><li><p>Requires solver capability for exponential cone problems.</p></li><li><p>When computing <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::EDaR_r, ::AbstractVector)</code></a>:</p><ul><li>If <code>solvers</code> is <code>nothing</code>: uses <code>solvers</code> from <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/.</li><li>If <code>solvers</code> is provided: use the solvers.</li></ul></li></ul><p><strong>Validation</strong></p><ul><li>When setting <code>alpha</code> at construction or runtime, <code>alpha ∈ (0, 1)</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
edar_r = EDaR_r()

# Custom configuration with specific solver
edar_r = EDaR_r(; alpha = 0.025,  # 2.5 % significance level
                solvers = Dict(&quot;solver&quot; =&gt; my_solver))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L3218-L3269">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.RLDaR_r" href="#PortfolioOptimiser.RLDaR_r"><code>PortfolioOptimiser.RLDaR_r</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct RLDaR_r{T1 &lt;: Real} &lt;: RiskMeasure</code></pre><p><strong>Description</strong></p><p>Relativistic Drawdown at Risk risk measure for compounded cumulative returns.</p><ul><li>It is a generalisation of the <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>.</li><li><span>$\mathrm{DaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{CDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{EDaR_{r}}(\bm{X},\, \alpha) \leq \mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) \leq \mathrm{MDD_{r}}(\bm{X})$</span>.</li><li><span>$\lim\limits_{\kappa \to 0} \mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) \approx \mathrm{EDaR_{r}}(\bm{X},\, \alpha)$</span></li><li><span>$\lim\limits_{\kappa \to 1} \mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) \approx \mathrm{MDD_{r}}(\bm{X})$</span></li></ul><p class="math-container">\[\begin{align}
\mathrm{RLDaR_{r}}(\bm{X},\, \alpha,\, \kappa) &amp;= \mathrm{RRM}(\mathrm{DD_{r}}(\bm{X}),\, \alpha,\, \kappa)\,.
\end{align}\]</p><p>Where:</p><ul><li><span>$\mathrm{RRM}(\mathrm{DD_{r}}(\bm{X}),\, \alpha,\, \kappa)$</span> is the Relativistic Risk Measure as defined in <a href="../RiskValue/#PortfolioOptimiser.RRM"><code>RRM</code></a>, using the Drawdown of compounded cumulative returns as defined in <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>.</li></ul><p>See also: <a href="#PortfolioOptimiser.RiskMeasure"><code>RiskMeasure</code></a>, <a href="#PortfolioOptimiser.RMSettings"><code>RMSettings</code></a>, <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>, <a href="../../Optimisation/OptimisationKinds/#PortfolioOptimiser.optimise!-Tuple{Portfolio, Trad}"><code>optimise!</code></a>, <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::RLDaR_r, ::AbstractVector)</code></a>, <a href="#PortfolioOptimiser.VaR"><code>VaR</code></a>, <a href="#PortfolioOptimiser.CVaR"><code>CVaR</code></a>, <a href="#PortfolioOptimiser.EVaR"><code>EVaR</code></a>, <a href="#PortfolioOptimiser.RLVaR"><code>RLVaR</code></a> <a href="#PortfolioOptimiser.WR"><code>WR</code></a>, <a href="#PortfolioOptimiser.DaR"><code>DaR</code></a>, <a href="#PortfolioOptimiser.DaR_r"><code>DaR_r</code></a>, <a href="#PortfolioOptimiser.CDaR"><code>CDaR</code></a>, <a href="#PortfolioOptimiser.CDaR_r"><code>CDaR_r</code></a>, <a href="#PortfolioOptimiser.EDaR"><code>EDaR</code></a>, <a href="#PortfolioOptimiser.EDaR_r"><code>EDaR_r</code></a>, <a href="#PortfolioOptimiser.RLDaR_r"><code>RLDaR_r</code></a>, <a href="#PortfolioOptimiser.MDD"><code>MDD</code></a>, <a href="#PortfolioOptimiser.MDD_r"><code>MDD_r</code></a>.</p><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li><li><code>alpha::T1 = 0.05</code>: significance level, <code>alpha ∈ (0, 1)</code>.</li><li><code>kappa::T1 = 0.3</code>: significance level, <code>kappa ∈ (0, 1)</code>.</li><li><code>solvers::Union{&lt;:AbstractDict, Nothing}</code>: optional JuMP-compatible solvers for 3D power cone problems.</li></ul><p><strong>Behaviour</strong></p><ul><li><p>Requires solver capability for 3D power cone problems.</p></li><li><p>When computing <a href="../../Portfolio/PortfolioRisk/#PortfolioOptimiser.calc_risk"><code>calc_risk(::RLDaR_r, ::AbstractVector)</code></a>:</p><ul><li>If <code>solvers</code> is <code>nothing</code>: uses <code>solvers</code> from <a href="../../Portfolio/PortfolioTypes/#PortfolioOptimiser.Portfolio"><code>Portfolio</code></a>/.</li><li>If <code>solvers</code> is provided: use the solvers.</li></ul></li></ul><p><strong>Validation</strong></p><ul><li>When setting <code>alpha</code> at construction or runtime, <code>alpha ∈ (0, 1)</code>.</li><li>When setting <code>kappa</code> at construction or runtime, <code>kappa ∈ (0, 1)</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
rldar = RLDaR()

# Custom configuration
rldar = RLDaR(; alpha = 0.05, # 5 % significance level
              kappa = 0.3,    # 30 % Deformation parameter
              solvers = Dict(&quot;solver&quot; =&gt; my_solver))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L3301-L3357">source</a></section></article><h3 id="Equal-risk-contribution"><a class="docs-heading-anchor" href="#Equal-risk-contribution">Equal risk contribution</a><a id="Equal-risk-contribution-1"></a><a class="docs-heading-anchor-permalink" href="#Equal-risk-contribution" title="Permalink"></a></h3><p>This assumes the risk is equally distributed among the variables.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimiser.Equal" href="#PortfolioOptimiser.Equal"><code>PortfolioOptimiser.Equal</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Equal &lt;: HCRiskMeasure</code></pre><p><strong>Description</strong></p><p>Equal risk measure.</p><ul><li>Risk is allocated evenly among a group of assets.</li></ul><p><strong>Fields</strong></p><ul><li><code>settings::RMSettings = RMSettings()</code>: configuration settings for the risk measure.</li></ul><p><strong>Examples</strong></p><pre><code class="language- hljs"># Default settings
equal = Equal()

# Custom configuration
equal = Equal(; settings = HCRMSettings(; scale = 3))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/blob/c6fc8add9dda4a691a260c5ce3235c6db827a685/src/RiskMeasures/Types/RiskMeasureTypes.jl#L3391-L3413">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../RiskValue/">Risk value »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Friday 31 January 2025 21:58">Friday 31 January 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
